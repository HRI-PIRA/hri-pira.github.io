!function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){const n={low_activity_lying:.45,low_activity:.54,singing:.65,mid_activity:.9,sports:1.2,test_1:.54,test_2:.65};function a(e){return"singing"==e?3500:"test_2"==e?2500:100}function o(e){const t=2.7618*(Math.exp(1.1761*3.35)-1),o=a("low_activity");return t*(a(e)/o)*(n[e]/n.low_activity)}function l(e,t,n,a){let o=390625*t+225625;return o*=Math.exp(t*a),o-=225625,o*=Math.exp(-t*a-.5776*a),o=390625*t-o,o*=e,o/(n*(225625*t+130321))}function i(e,t,a,i){0==t&&(t+=.01),console.log(`Calculating pira for: t=${e}, Q=${t}, activity=${a}, V=${i}`);const u=function(e,t){return e/t}(i,t),r=o(a),d=function(e,t){return e*Math.exp(-.5776*t)}(r,u),c=function(e,t){return t/e}(i,t);if(e>u){const o=l(r,c,t,u),i=function(e,t,n,a,o){return e*Math.exp(-t*(o+n))*(t*(o-n)*Math.exp(t*(o+n))-Math.exp(t*o)+Math.exp(t*n))/(a*t)}(d,c,u,t,e);return 1-Math.exp(-(o+i)*n[a])}{const o=l(r,c,t,e);return 1-Math.exp(-o*n[a])}}e.exports={prepareData:function(e,t,n){const a=e;let o=[],l=[],u=[];const r=n;for(let e=50;e<=r;e+=50){o=[];let n=[];for(let l=0;l<=6;l+=.1)p=i(l,e,t,a),p=Math.round(1e4*p)/100,n.push(p),o.push(l);l.push(e),u.push(n)}return{test:o,x:o,y:l,z:u}},prepareDataSimple:function(e,t,n,a){const o=e;console.log("Total airflow for all people in the room is (Q) is "+n);let l=[],u=[],r=[],d=[];for(let e=0;e<=6;e+=1){p=i(e,n,t,o),p=Math.round(1e4*p)/100,u.push(p),l.push(e),r.push(e),d.push(Math.round(p*a/100));for(let a=.1;a<1;a+=.1)p=i(e+a,n,t,o),p=Math.round(1e4*p)/100,u.push(p),l.push(e+a)}return[{x:l,y:u},{x:r,y:d}]},pira:i,f_qa:o,f_Q:function(e){return"very_bad"==e?10:"bad"==e?20:"ok"==e?30:"good"==e?40:"very_good"==e?60:void 0}}},function(e,t,n){const a=n(0).prepareData,o=n(0).prepareDataSimple,l=n(0).f_Q;var i=document.getElementById("volume").value,u=document.getElementById("activity").value,r=document.getElementById("mode").value,d=document.getElementById("airing").value,c=document.getElementById("people").value,s=-1;g();var p=-1;f();const m=document.getElementById("chart");function g(){s=l(d)*c,document.getElementById("usedQ").value=s}function f(){p=l("very_good")*c,document.getElementById("maxQ").value=p}function y(){console.log("The graph must be updated!"),console.log(`Volume: ${i}, activity: ${u}, airing: ${d}`),"simple"===r?(data=o(i,u,s,c),function(e){e[0].mode="lines",e[0].name="PIRA (in %)",e[0].yaxis="y",e[1].type="bar",e[1].yaxis="y2",e[1].name="Potentiell Angesteckte",console.log(e);var t={shareX:!0,xaxis:{title:{text:"Zeit in Stunden"}},yaxis:{title:"PIRA (in %)",overlaying:"y2",tickvals:[10,20,30,40,50,60,70,80,90,100],range:[0,100]},yaxis2:{tickmode:"auto",title:"Anzahl sich potentiell angesteckter Personen (gerundet)",side:"right",range:[0,c]},legend:{y:1,x:0}};Plotly.newPlot(m,e,t,{responsive:!0})}(data)):"expert"===r&&(data=a(i,u,p),function(e){e.type="contour",e.colorbar={title:"PIRA",ticksuffix:"%"},e.hovertemplate="PIRA: %{z:.2f}%<extra></extra>";console.log(e),Plotly.newPlot(m,[e],{showaxeslabels:!0,xaxis_title:"Zeit in Stunden",xaxis:{title:{text:"Zeit in Stunden"}},yaxis:{title:{text:"Volumenstrom in mÂ³/h"}}},{responsive:!0})}(data))}e.exports={modeUpdated:function(e){r=e,y()},volumeUpdated:function(e){i=e,y()},activityUpdated:function(e){u=e,y()},airingUpdated:function(e){d=e,g(),y()},vistypeUpdated:function(e){vistype=e,y()},peopleUpdated:function(e){c=e,g(),f(),y()},usedQUpdated:function(e){s=e,y()},maxQUpdated:function(e){p=e,y()}}},function(e,t,n){n(3);const a=n(1);document.getElementById("mode").addEventListener("input",(function(e){if("expert"==e.target.value){for(el of(simpelElements=document.getElementsByClassName("simple"),simpelElements))el.style.display="none";for(el of(expertElements=document.getElementsByClassName("expert"),expertElements))el.style.display="block"}else if("simple"==e.target.value){for(el of(expertElements=document.getElementsByClassName("simple"),expertElements))el.style.display="block";for(el of(expertElements=document.getElementsByClassName("expert"),expertElements))el.style.display="none"}a.modeUpdated(e.target.value)})),document.getElementById("activity").addEventListener("input",(function(e){a.activityUpdated(e.target.value)})),document.getElementById("people").addEventListener("input",(function(e){""!=e.target.value&&(amount=e.target.value,(1>amount||amount>100)&&(amount=3,e.target.value=amount),a.peopleUpdated(amount))})),document.getElementById("airing").addEventListener("change",(function(e){a.airingUpdated(e.target.value)})),document.getElementById("usedQ").addEventListener("change",(function(e){e.target.value<1?e.target.value=1:e.target.value>3e3&&(e.target.value=3e3),a.usedQUpdated(e.target.value)})),document.getElementById("maxQ").addEventListener("change",(function(e){e.target.value<1?e.target.value=1:e.target.value>3e3&&(e.target.value=3e3),a.maxQUpdated(e.target.value)}))},function(e,t,n){const a=n(1);function o(e,t){this.data=t,this.element=e,e.value=t,e.addEventListener("change",this,!1)}function l(){i.data>10&&i.change(10),i.data<1&&i.change(1),u.data>10&&i.change(10),u.data<1&&i.change(1),r.data>5&&i.change(5),r.data<1&&i.change(1);const e=i.data*u.data*r.data;return console.log(e),document.getElementById("volume").value=e,a.volumeUpdated(e),e}o.prototype.handleEvent=function(e){switch(e.type){case"change":this.change(this.element.value),l()}},o.prototype.change=function(e){this.data=e,this.element.value=e};var i=new o(document.getElementById("length"),document.getElementById("length").value),u=new o(document.getElementById("width"),document.getElementById("width").value),r=new o(document.getElementById("height"),document.getElementById("height").value);l(),e.exports={get:l,init:l}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RhdGEuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyYXBoLmpzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdm9sdW1lLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiUWIiLCJsb3dfYWN0aXZpdHlfbHlpbmciLCJsb3dfYWN0aXZpdHkiLCJzaW5naW5nIiwibWlkX2FjdGl2aXR5Iiwic3BvcnRzIiwidGVzdF8xIiwidGVzdF8yIiwiZl9FIiwiYWN0aXZpdHkiLCJmX3FhIiwicV8wIiwiTWF0aCIsImV4cCIsIkVfMCIsImZfQyIsInFhIiwiQUNIIiwiUSIsInBpcmEiLCJWIiwiY29uc29sZSIsImxvZyIsInRhdSIsImZfdGF1IiwicWF0YXUiLCJmX3FhdGF1IiwiZl9BQ0giLCJDIiwiQ3RhdSIsImZfQ3RhdSIsInByZXBhcmVEYXRhIiwidm9sdW1lIiwibWF4USIsInhBIiwieUEiLCJyb3dzIiwibWF4Iiwicm93Iiwicm91bmQiLCJwdXNoIiwidGVzdCIsIngiLCJ5IiwieiIsInByZXBhcmVEYXRhU2ltcGxlIiwicGVvcGxlIiwieDIiLCJ5MiIsInN0IiwiZl9RIiwiYWlyaW5nIiwiZGF0YUYiLCJkYXRhRlNpbXBsZSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ1c2VkUSIsImNhbGN1bGF0ZVVzZWRRIiwiY2FsY3VsYXRlTWF4USIsImNoYXJ0RGl2IiwidXBkYXRlR3JhcGgiLCJkYXRhIiwieWF4aXMiLCJ0eXBlIiwibGF5b3V0Iiwic2hhcmVYIiwieGF4aXMiLCJ0aXRsZSIsInRleHQiLCJvdmVybGF5aW5nIiwidGlja3ZhbHMiLCJyYW5nZSIsInlheGlzMiIsInRpY2ttb2RlIiwic2lkZSIsImxlZ2VuZCIsIlBsb3RseSIsIm5ld1Bsb3QiLCJyZXNwb25zaXZlIiwiZHJhd1NpbXBsZVBsb3QiLCJjb2xvcmJhciIsInRpY2tzdWZmaXgiLCJob3ZlcnRlbXBsYXRlIiwic2hvd2F4ZXNsYWJlbHMiLCJ4YXhpc190aXRsZSIsImRyYXdDb250b3VyUGxvdCIsIm1vZGVVcGRhdGVkIiwibmV3TW9kZSIsInZvbHVtZVVwZGF0ZWQiLCJuZXdWb2x1bWUiLCJhY3Rpdml0eVVwZGF0ZWQiLCJuZXdBY3Rpdml0eSIsImFpcmluZ1VwZGF0ZWQiLCJuZXdBaXJpbmciLCJ2aXN0eXBlVXBkYXRlZCIsIm5ld1Zpc1R5cGUiLCJ2aXN0eXBlIiwicGVvcGxlVXBkYXRlZCIsIm5ld1Blb3BsZSIsInVzZWRRVXBkYXRlZCIsIm5ld1VzZWRRIiwibWF4UVVwZGF0ZWQiLCJuZXdNYXhRIiwiZ3JhcGgiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJ0YXJnZXQiLCJlbCIsInNpbXBlbEVsZW1lbnRzIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInN0eWxlIiwiZGlzcGxheSIsImV4cGVydEVsZW1lbnRzIiwiYW1vdW50IiwiSW5wdXRFbGVtZW50IiwiZWxlbWVudCIsInRoaXMiLCJ1cGRhdGVWb2x1bWUiLCJsZW5ndGhFbGVtZW50IiwiY2hhbmdlIiwid2lkdGhFbGVtZW50IiwiaGVpZ2h0RWxlbWVudCIsImhhbmRsZUV2ZW50IiwiaW5pdCJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFB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Y3hELEdBQ2JBLEVBMUNUa0YsRUFBYXRILFVBQVU4SCxZQUFjLFNBQVVqQixHQUM3QyxPQUFRQSxFQUFNMUMsTUFDWixJQUFLLFNBQ0hxRCxLQUFLRyxPQUFPSCxLQUFLRCxRQUFRbEksT0FDekJvSSxNQU9OSCxFQUFhdEgsVUFBVTJILE9BQVMsU0FBVXRJLEdBQ3hDbUksS0FBS3ZELEtBQU81RSxFQUNabUksS0FBS0QsUUFBUWxJLE1BQVFBLEdBaUN2QixJQUFJcUksRUFBZ0IsSUFBSUosRUFDdEI1RCxTQUFTQyxlQUFlLFVBQ3hCRCxTQUFTQyxlQUFlLFVBQVV0RSxPQUVoQ3VJLEVBQWUsSUFBSU4sRUFDckI1RCxTQUFTQyxlQUFlLFNBQ3hCRCxTQUFTQyxlQUFlLFNBQVN0RSxPQUUvQndJLEVBQWdCLElBQUlQLEVBQ3RCNUQsU0FBU0MsZUFBZSxVQUN4QkQsU0FBU0MsZUFBZSxVQUFVdEUsT0FFcENvSSxJQUVBdEosRUFBT0QsUUFBVSxDQUNmZSxJQUFLd0ksRUFDTE0sS0FBTU4iLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDIpO1xuIiwiY29uc3QgUWIgPSB7XG4gIGxvd19hY3Rpdml0eV9seWluZzogMC40NSxcbiAgbG93X2FjdGl2aXR5OiAwLjU0LFxuICBzaW5naW5nOiAwLjY1LFxuICBtaWRfYWN0aXZpdHk6IDAuOSxcbiAgc3BvcnRzOiAxLjIsXG4gIHRlc3RfMTogMC41NCwgLy8gdmFsdWUgdXNlZCBpbiB0ZXN0X2RhdGEvUElSX01vZGVsbC5qcGdcbiAgdGVzdF8yOiAwLjY1LCAvLyB2YWx1ZSB1c2VkIGluIHRlc3RfZGF0YS9QSVJfTW9kZWxsX2FrdC5qcGcgYXMgaW5zdHJ1Y3RlZCBieSBtYWlsXG59O1xuXG5mdW5jdGlvbiBmX3RhdShWLCBRKSB7XG4gIHJldHVybiBWIC8gUTtcbn1cblxuZnVuY3Rpb24gZl9FKGFjdGl2aXR5KSB7XG4gIGlmIChhY3Rpdml0eSA9PSBcInNpbmdpbmdcIikge1xuICAgIHJldHVybiAzNTAwO1xuICB9IGVsc2UgaWYgKGFjdGl2aXR5ID09XCJ0ZXN0XzJcIikge1xuICAgIHJldHVybiAyNTAwOyAvLyB2YWx1ZSByZWNlaXZlZCB2aWEgbWFpbCBmcm9tIGtyaWVnZWxcbiAgfSBlbHNlIHJldHVybiAxMDA7XG59XG5cbmZ1bmN0aW9uIGZfUShhaXJpbmcpIHtcbiAgaWYgKGFpcmluZyA9PSBcInZlcnlfYmFkXCIpIHtcbiAgICByZXR1cm4gMTA7XG4gIH0gZWxzZSBpZiAoYWlyaW5nID09IFwiYmFkXCIpIHtcbiAgICByZXR1cm4gMjA7XG4gIH0gZWxzZSBpZiAoYWlyaW5nID09IFwib2tcIikge1xuICAgIHJldHVybiAzMDtcbiAgfSBlbHNlIGlmIChhaXJpbmcgPT0gXCJnb29kXCIpIHtcbiAgICByZXR1cm4gNDA7XG4gIH0gZWxzZSBpZiAoYWlyaW5nID09IFwidmVyeV9nb29kXCIpIHtcbiAgICByZXR1cm4gNjA7XG4gIH1cbn1cblxuZnVuY3Rpb24gZl9xYShhY3Rpdml0eSkge1xuICBjb25zdCBSXzAgPSAzLjM1O1xuICBjb25zdCBxXzAgPSAyLjc2MTggKiAoTWF0aC5leHAoMS4xNzYxICogUl8wKSAtIDEpO1xuXG4gIGNvbnN0IEVfMCA9IGZfRShcImxvd19hY3Rpdml0eVwiKTtcbiAgY29uc3QgRSA9IGZfRShhY3Rpdml0eSk7XG5cbiAgcmV0dXJuIHFfMCAqIChFIC8gRV8wKSAqIChRYlthY3Rpdml0eV0gLyBRYi5sb3dfYWN0aXZpdHkpO1xufVxuXG5mdW5jdGlvbiBmX3FhdGF1KHFhLCB0YXUpIHtcbiAgcmV0dXJuIHFhICogTWF0aC5leHAoLTAuNTc3NiAqIHRhdSk7XG59XG5cbmZ1bmN0aW9uIGZfQUNIKFYsIFEpIHtcbiAgcmV0dXJuIFEgLyBWO1xufVxuXG5mdW5jdGlvbiBmX0MocWEsIEFDSCwgUSwgdCkge1xuICAvLyBudW1lcmF0b3JcblxuICBsZXQgbiA9IDM5MDYyNSAqIEFDSCArIDIyNTYyNTtcbiAgLy8gY29uc29sZS5sb2cobik7XG4gIG4gPSBuICogTWF0aC5leHAoQUNIICogdCk7XG4gIC8vIGNvbnNvbGUubG9nKG4pO1xuICBuID0gbiAtIDIyNTYyNTtcbiAgLy8gY29uc29sZS5sb2cobik7XG4gIG4gPSBuICogTWF0aC5leHAoLUFDSCAqIHQgLSAoMzYxIC8gNjI1KSAqIHQpO1xuICAvLyBjb25zb2xlLmxvZyhuKTtcbiAgbiA9IDM5MDYyNSAqIEFDSCAtIG47XG4gIC8vIGNvbnNvbGUubG9nKG4pO1xuICBuID0gcWEgKiBuO1xuXG4gIC8vIGNvbnNvbGUubG9nKG4pO1xuICAvLyBjb25zb2xlLmxvZyhxYSk7XG4gIC8vIGNvbnNvbGUubG9nKEFDSCk7XG4gIC8vIGNvbnNvbGUubG9nKFEpO1xuICAvLyBjb25zb2xlLmxvZyhcInQ6IFwiICsgdCk7XG5cbiAgLy8gY29uc29sZS5sb2cobik7XG4gIC8vIGRlbm9taW5hdG9yXG4gIGxldCBkID0gUSAqICgyMjU2MjUgKiBBQ0ggKyAxMzAzMjEpO1xuICAvLyBjb25zb2xlLmxvZyhkKTtcblxuICByZXR1cm4gbiAvIGQ7XG59XG5cbmZ1bmN0aW9uIGZfQ3RhdShxYXRhdSwgQUNILCB0YXUsIFEsIHQpIHtcbiAgLy8gbnVtZXJhdG9yXG4gIGxldCBuID1cbiAgICBxYXRhdSAqXG4gICAgTWF0aC5leHAoLUFDSCAqICh0ICsgdGF1KSkgKlxuICAgIChBQ0ggKiAodCAtIHRhdSkgKiBNYXRoLmV4cChBQ0ggKiAodCArIHRhdSkpIC1cbiAgICAgIE1hdGguZXhwKEFDSCAqIHQpICtcbiAgICAgIE1hdGguZXhwKEFDSCAqIHRhdSkpO1xuXG4gIC8vIGRlbm9taW5hdG9yXG4gIGxldCBkID0gUSAqIEFDSDtcblxuICByZXR1cm4gbiAvIGQ7XG59XG5cbmZ1bmN0aW9uIHBpcmEodCwgUSwgYWN0aXZpdHksIFYpIHtcbiAgaWYgKFEgPT0gMCkgUSArPSAwLjAxO1xuICBjb25zb2xlLmxvZyhgQ2FsY3VsYXRpbmcgcGlyYSBmb3I6IHQ9JHt0fSwgUT0ke1F9LCBhY3Rpdml0eT0ke2FjdGl2aXR5fSwgVj0ke1Z9YCk7XG4gIGNvbnN0IHRhdSA9IGZfdGF1KFYsIFEpO1xuICAvLyBjb25zb2xlLmxvZyhcInRhdTogXCIgKyB0YXUpO1xuICBjb25zdCBxYSA9IGZfcWEoYWN0aXZpdHkpO1xuICAvLyBjb25zb2xlLmxvZyhcInFhOiBcIiArIHFhKTtcbiAgY29uc3QgcWF0YXUgPSBmX3FhdGF1KHFhLCB0YXUpO1xuICAvLyBjb25zb2xlLmxvZyhcInFhdGF1OiBcIiArIHFhdGF1KTtcbiAgY29uc3QgQUNIID0gZl9BQ0goViwgUSk7XG4gIC8vIGNvbnNvbGUubG9nKFwiQUNIOiBcIiArIEFDSCk7XG4gIC8vIGNvbnNvbGUubG9nKFwiUWI6IFwiICsgUWJbYWN0aXZpdHldKTtcblxuICBpZiAodCA+IHRhdSkge1xuICAgIGNvbnN0IEMgPSBmX0MocWEsIEFDSCwgUSwgdGF1KTtcbiAgICAvLyBjb25zb2xlLmxvZyhDKTtcbiAgICBjb25zdCBDdGF1ID0gZl9DdGF1KHFhdGF1LCBBQ0gsIHRhdSwgUSwgdCk7XG4gICAgLy8gY29uc29sZS5sb2coQ3RhdSk7XG4gICAgcmV0dXJuIDEgLSBNYXRoLmV4cCgtKEMgKyBDdGF1KSAqIFFiW2FjdGl2aXR5XSk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgQyA9IGZfQyhxYSwgQUNILCBRLCB0KTtcbiAgICAvLyBjb25zb2xlLmxvZyhDKTtcbiAgICByZXR1cm4gMSAtIE1hdGguZXhwKC1DICogUWJbYWN0aXZpdHldKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwcmVwYXJlRGF0YSh2b2x1bWUsIGFjdGl2aXR5LCBtYXhRKSB7XG4gIGNvbnN0IFYgPSB2b2x1bWU7XG5cbiAgbGV0IHhBID0gW107XG4gIGxldCB5QSA9IFtdO1xuICBsZXQgcm93cyA9IFtdO1xuXG4gIGNvbnN0IG1pbiA9IDUwXG4gIGNvbnN0IG1heCA9IG1heFFcblxuICBmb3IgKGxldCBRID0gbWluOyBRIDw9IG1heDsgUSArPSA1MCkge1xuICAgIHhBID0gW107XG4gICAgbGV0IHJvdyA9IFtdO1xuXG4gICAgZm9yIChsZXQgdCA9IDAuMDsgdCA8PSA2LjA7IHQgKz0gMC4xKSB7XG4gICAgICAvLyBob3VycywrIGluY3JlbWVudHMgaW4gaG91cnNcbiAgICAgIHAgPSBwaXJhKHQsIFEsIGFjdGl2aXR5LCBWKTtcbiAgICAgIC8vY29uc29sZS5sb2coXCJQaXJhIGZvciB0PVwiICsgdCArIFwiLCBRPVwiICsgUSArIFwiOiBcIiArIHApO1xuICAgICAgcCA9IE1hdGgucm91bmQocCAqIDEwMDAwKSAvIDEwMDtcbiAgICAgIC8vaWYgKHQgPT0gNiAmJiBRID09IDUwMCkgcCA9IDEwMDtcbiAgICAvLyAgIGlmIChpc05hTihwKSB8fCBwID49IDEwMCkge1xuICAgIC8vICAgICAgIHAgPSAwXG4gICAgLy8gICB9XG4gICAgICByb3cucHVzaChwKTtcbiAgICAgIHhBLnB1c2godCk7XG4gICAgfVxuICAgIHlBLnB1c2goUSk7XG4gICAgcm93cy5wdXNoKHJvdyk7XG4gIH1cblxuICAvLyBmb3IgKGxldCBtaW51dGUgPSAwOyBtaW51dGUgPD0gMzYwOyBtaW51dGUgKz0gMzApIHtcbiAgLy8gICAgIGxldCB0ID0gbWludXRlIC8gNjA7XG4gIC8vICAgICBsZXQgbSA9IG1pbnV0ZSAlIDYwO1xuICAvLyAgICAgbGV0IGggPSAobWludXRlIC0gbSkgLyA2MDtcbiAgLy8gICAgIGxldCB0aW1lID0gaCArIFwiOlwiICsgbSArIFwiaFwiO1xuICAvLyB9XG5cbiAgcmV0dXJuIHtcbiAgICB0ZXN0OiB4QSxcbiAgICB4OiB4QSxcbiAgICB5OiB5QSxcbiAgICB6OiByb3dzLFxuICB9O1xufVxuXG5mdW5jdGlvbiBwcmVwYXJlRGF0YVNpbXBsZSh2b2x1bWUsIGFjdGl2aXR5LCBRLCBwZW9wbGUpIHtcbiAgY29uc3QgViA9IHZvbHVtZTtcbiBcbiAgY29uc29sZS5sb2coYFRvdGFsIGFpcmZsb3cgZm9yIGFsbCBwZW9wbGUgaW4gdGhlIHJvb20gaXMgKFEpIGlzICR7UX1gKVxuXG4gIGxldCB4ID0gW107XG4gIGxldCB5ID0gW107IC8vIHBpcmFcbiAgbGV0IHgyID0gW107IC8vIG9ubHkgdGltZXN0YW1wcyBmb3IgdGhlIGZ1bGwgaG91clxuICBsZXQgeTIgPSBbXTsgLy8gaW5mZWN0ZWQgcGVvcGxlXG5cbiAgZm9yIChsZXQgdCA9IDA7IHQgPD0gNjsgdCArPSAxKSB7XG4gICAgcCA9IHBpcmEodCwgUSwgYWN0aXZpdHksIFYpO1xuICAgIHAgPSBNYXRoLnJvdW5kKHAgKiAxMDAwMCkgLyAxMDA7XG4gICAgeS5wdXNoKHApO1xuICAgIHgucHVzaCh0KTtcbiAgICB4Mi5wdXNoKHQpXG4gICAgeTIucHVzaChNYXRoLnJvdW5kKHAgKiBwZW9wbGUgLyAxMDApKTtcbiAgICAvLyBpbnRlcm1lZGlhdGUgc3RlcHMgZm9yIHBpcmEgb25seSwgbm90IGZvciBuby4gaW5mZWN0ZWQgcGVvcGxlXG4gICAgZm9yIChsZXQgc3QgPSAwLjE7IHN0IDwgMTsgc3QgKz0gMC4xKSB7XG4gICAgICAgIHAgPSBwaXJhKHQgKyBzdCwgUSwgYWN0aXZpdHksIFYpO1xuICAgICAgICBwID0gTWF0aC5yb3VuZChwICogMTAwMDApIC8gMTAwO1xuICAgICAgICB5LnB1c2gocCk7XG4gICAgICAgIHgucHVzaCh0ICsgc3QpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBbXG4gICAge1xuICAgICAgeDogeCxcbiAgICAgIHk6IHlcbiAgICB9LFxuICAgIHtcbiAgICAgIHg6IHgyLFxuICAgICAgeTogeTJcbiAgICB9XG4gIF07XG5cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgcHJlcGFyZURhdGE6IHByZXBhcmVEYXRhLFxuICAgIHByZXBhcmVEYXRhU2ltcGxlOiBwcmVwYXJlRGF0YVNpbXBsZSxcbiAgICBwaXJhOiBwaXJhLFxuICAgIGZfcWE6IGZfcWEsXG4gICAgZl9ROiBmX1Fcbn1cbiIsImNvbnN0IGRhdGFGID0gcmVxdWlyZShcIi4vZGF0YS5qc1wiKS5wcmVwYXJlRGF0YTtcbmNvbnN0IGRhdGFGU2ltcGxlID0gcmVxdWlyZShcIi4vZGF0YS5qc1wiKS5wcmVwYXJlRGF0YVNpbXBsZTtcbmNvbnN0IGZfUSA9IHJlcXVpcmUoXCIuL2RhdGEuanNcIikuZl9RO1xuLy8gY29uc3QgUGxvdGx5ID0gcmVxdWlyZShcInBsb3RseS5qcy1nbDNkLWRpc3QtbWluXCIpIC8vIG5vdCBpbnN0YWxsZWQgdmlhIG5wbSB0byByZWR1Y2UgYnVuZGxlIHNpemVcblxudmFyIHZvbHVtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidm9sdW1lXCIpLnZhbHVlO1xudmFyIGFjdGl2aXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhY3Rpdml0eVwiKS52YWx1ZTtcbi8vIHZhciB2aXN0eXBlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aXN0eXBlXCIpLnZhbHVlO1xudmFyIG1vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1vZGVcIikudmFsdWU7IC8vIHNpbXBsZSBvciBleHBlcnRcbnZhciBhaXJpbmcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFpcmluZ1wiKS52YWx1ZTsgLy8gaW4gdGhlIGZvcm11bGEsIHRoaXMgaXMgUVxudmFyIHBlb3BsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGVvcGxlXCIpLnZhbHVlO1xudmFyIHVzZWRRID0gLTE7XG5jYWxjdWxhdGVVc2VkUSgpO1xudmFyIG1heFEgPSAtMTtcbmNhbGN1bGF0ZU1heFEoKTtcblxuY29uc3QgY2hhcnREaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNoYXJ0XCIpO1xuXG5mdW5jdGlvbiBtb2RlVXBkYXRlZChuZXdNb2RlKSB7XG4gIG1vZGUgPSBuZXdNb2RlO1xuICB1cGRhdGVHcmFwaCgpO1xufVxuXG5mdW5jdGlvbiB2b2x1bWVVcGRhdGVkKG5ld1ZvbHVtZSkge1xuICB2b2x1bWUgPSBuZXdWb2x1bWU7XG4gIHVwZGF0ZUdyYXBoKCk7XG59XG5cbmZ1bmN0aW9uIGFjdGl2aXR5VXBkYXRlZChuZXdBY3Rpdml0eSkge1xuICBhY3Rpdml0eSA9IG5ld0FjdGl2aXR5O1xuICB1cGRhdGVHcmFwaCgpO1xufVxuXG5mdW5jdGlvbiBhaXJpbmdVcGRhdGVkKG5ld0FpcmluZykge1xuICBhaXJpbmcgPSBuZXdBaXJpbmc7XG4gIGNhbGN1bGF0ZVVzZWRRKClcbiAgdXBkYXRlR3JhcGgoKTtcbn1cblxuZnVuY3Rpb24gcGVvcGxlVXBkYXRlZChuZXdQZW9wbGUpIHtcbiAgcGVvcGxlID0gbmV3UGVvcGxlO1xuICBjYWxjdWxhdGVVc2VkUSgpXG4gIGNhbGN1bGF0ZU1heFEoKVxuICB1cGRhdGVHcmFwaCgpO1xufVxuXG5mdW5jdGlvbiB2aXN0eXBlVXBkYXRlZChuZXdWaXNUeXBlKSB7XG4gIHZpc3R5cGUgPSBuZXdWaXNUeXBlO1xuICB1cGRhdGVHcmFwaCgpO1xufVxuXG4vLyB1c2VkUSB1cGRhdGVkIGJ5IG1hbnVhbCB1c2VyIGlucHV0XG5mdW5jdGlvbiB1c2VkUVVwZGF0ZWQobmV3VXNlZFEpIHtcbiAgdXNlZFEgPSBuZXdVc2VkUTtcbiAgdXBkYXRlR3JhcGgoKTtcbn1cblxuLy8gcmVjYWxjdWxhdGUgdXNlZFEgYmFzZWQgb24gYWlyaW5nIGFuZCBwZW9wbGVcbmZ1bmN0aW9uIGNhbGN1bGF0ZVVzZWRRKCkge1xuICB1c2VkUSA9IGZfUShhaXJpbmcpICogcGVvcGxlO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVzZWRRXCIpLnZhbHVlID0gdXNlZFFcbn1cblxuLy8gbWF4USB1cGRhdGVkIGJ5IG1hbnVhbCB1c2VyIGlucHV0XG5mdW5jdGlvbiBtYXhRVXBkYXRlZChuZXdNYXhRKSB7XG4gIG1heFEgPSBuZXdNYXhRXG4gIHVwZGF0ZUdyYXBoKClcbn1cblxuLy8gcmVjYWxjdWxhdGUgbWF4USBiYXNlZCBvbiBwZW9wbGUgYW5kIHZlcnlfZ29vZCBhaXJpbmdcbmZ1bmN0aW9uIGNhbGN1bGF0ZU1heFEoKSB7XG4gIG1heFEgPSBmX1EoXCJ2ZXJ5X2dvb2RcIikgKiBwZW9wbGVcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXhRXCIpLnZhbHVlID0gbWF4UVxufVxuXG5mdW5jdGlvbiB1cGRhdGVHcmFwaCgpIHtcbiAgY29uc29sZS5sb2coXCJUaGUgZ3JhcGggbXVzdCBiZSB1cGRhdGVkIVwiKTtcbiAgY29uc29sZS5sb2coYFZvbHVtZTogJHt2b2x1bWV9LCBhY3Rpdml0eTogJHthY3Rpdml0eX0sIGFpcmluZzogJHthaXJpbmd9YCk7XG5cbiAgaWYgKG1vZGUgPT09IFwic2ltcGxlXCIpIHtcbiAgICBkYXRhID0gZGF0YUZTaW1wbGUodm9sdW1lLCBhY3Rpdml0eSwgdXNlZFEsIHBlb3BsZSlcblxuICAgIGRyYXdTaW1wbGVQbG90KGRhdGEpXG4gIH0gZWxzZSBpZiAobW9kZSA9PT0gXCJleHBlcnRcIikge1xuICAgIGRhdGEgPSBkYXRhRih2b2x1bWUsIGFjdGl2aXR5LCBtYXhRKTtcblxuICAgIC8vIGlmICh2aXN0eXBlID09PSBcInN1cmZhY2VcIikge1xuICAgIC8vICAgZHJhd1N1cmZhY2VQbG90KGRhdGEpO1xuICAgIC8vIH0gZWxzZSB7XG4gICAgLy8gICBkcmF3Q29udG91clBsb3QoZGF0YSk7XG4gICAgLy8gfVxuXG4gICAgZHJhd0NvbnRvdXJQbG90KGRhdGEpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRyYXdTaW1wbGVQbG90KGRhdGEpIHtcbiAgZGF0YVswXS5tb2RlID0gXCJsaW5lc1wiO1xuICBkYXRhWzBdLm5hbWUgPSBcIlBJUkEgKGluICUpXCJcbiAgZGF0YVswXS55YXhpcyA9IFwieVwiXG5cbiAgZGF0YVsxXS50eXBlID0gXCJiYXJcIjtcbiAgZGF0YVsxXS55YXhpcyA9IFwieTJcIjtcbiAgZGF0YVsxXS5uYW1lID0gXCJQb3RlbnRpZWxsIEFuZ2VzdGVja3RlXCJcblxuICBjb25zb2xlLmxvZyhkYXRhKVxuXG4gIHZhciBsYXlvdXQgPSB7XG4gICAgc2hhcmVYOiB0cnVlLFxuICAgIHhheGlzOiB7XG4gICAgICAgIHRpdGxlOiB7XG4gICAgICAgICAgdGV4dDogXCJaZWl0IGluIFN0dW5kZW5cIixcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgeWF4aXM6IHtcbiAgICAgIHRpdGxlOiAnUElSQSAoaW4gJSknLFxuICAgICAgb3ZlcmxheWluZzogJ3kyJyxcbiAgICAgIHRpY2t2YWxzOiBbMTAsIDIwLCAzMCwgNDAsIDUwLCA2MCwgNzAsIDgwLCA5MCwgMTAwXSxcbiAgICAgIHJhbmdlOiBbMCwgMTAwXVxuICAgIH0sXG4gICAgeWF4aXMyOiB7XG4gICAgICB0aWNrbW9kZTogXCJhdXRvXCIsXG4gICAgICB0aXRsZTogJ0FuemFobCBzaWNoIHBvdGVudGllbGwgYW5nZXN0ZWNrdGVyIFBlcnNvbmVuIChnZXJ1bmRldCknLFxuICAgICAgc2lkZTogJ3JpZ2h0JyxcbiAgICAgIHJhbmdlOiBbMCwgcGVvcGxlXVxuICAgIH0sXG4gICAgbGVnZW5kOiB7XG4gICAgICAgIHk6IDEsXG4gICAgICAgIHg6IDAsXG4gICAgICB9XG4gIH07XG5cbiAgUGxvdGx5Lm5ld1Bsb3QoY2hhcnREaXYsIGRhdGEsIGxheW91dCwgeyByZXNwb25zaXZlOiB0cnVlIH0pO1xufVxuXG5mdW5jdGlvbiBkcmF3U3VyZmFjZVBsb3QoZGF0YSkge1xuICBkYXRhLnR5cGUgPSBcInN1cmZhY2VcIjtcbiAgZGF0YS5jb250b3VycyA9IHtcbiAgICB6OiB7XG4gICAgICBzaG93OiB0cnVlLFxuICAgICAgdXNlY29sb3JtYXA6IHRydWUsXG4gICAgICBoaWdobGlnaHRjb2xvcjogXCIjNDJmNDYyXCIsXG4gICAgICBwcm9qZWN0OiB7IHo6IHRydWUgfSxcbiAgICB9LFxuICB9O1xuICBjb25zdCBsYXlvdXQgPSB7XG4gICAgeGF4aXM6IHtcbiAgICAgIHRpdGxlOiB7XG4gICAgICAgIHRleHQ6IFwiWmVpdCBpbiBTdHVuZGVuXCIsXG4gICAgICB9LFxuICAgIH0sXG4gICAgeWF4aXM6IHtcbiAgICAgIHRpdGxlOiB7XG4gICAgICAgIHRleHQ6IFwiVm9sdW1lbnN0cm9tIGluIG1eMy9oXCIsXG4gICAgICB9LFxuICAgIH0sXG4gIH07XG5cbiAgY29uc29sZS5sb2coZGF0YSk7XG4gIFBsb3RseS5uZXdQbG90KGNoYXJ0RGl2LCBbZGF0YV0sIGxheW91dCwgeyByZXNwb25zaXZlOiB0cnVlIH0pO1xufVxuXG5mdW5jdGlvbiBkcmF3Q29udG91clBsb3QoZGF0YSkge1xuICBkYXRhLnR5cGUgPSBcImNvbnRvdXJcIjtcblxuICBkYXRhLmNvbG9yYmFyID0ge1xuICAgIHRpdGxlOiBcIlBJUkFcIixcbiAgICB0aWNrc3VmZml4OiBcIiVcIixcbiAgfTtcblxuICBkYXRhLmhvdmVydGVtcGxhdGUgPSBcIlBJUkE6ICV7ejouMmZ9JTxleHRyYT48L2V4dHJhPlwiO1xuXG4gIGNvbnN0IGxheW91dCA9IHtcbiAgICBzaG93YXhlc2xhYmVsczogdHJ1ZSxcbiAgICB4YXhpc190aXRsZTogXCJaZWl0IGluIFN0dW5kZW5cIixcbiAgICB4YXhpczoge1xuICAgICAgdGl0bGU6IHtcbiAgICAgICAgdGV4dDogXCJaZWl0IGluIFN0dW5kZW5cIixcbiAgICAgIH0sXG4gICAgfSxcbiAgICB5YXhpczoge1xuICAgICAgdGl0bGU6IHtcbiAgICAgICAgdGV4dDogXCJWb2x1bWVuc3Ryb20gaW4gbcKzL2hcIixcbiAgICAgIH0sXG4gICAgfSxcbiAgfTtcblxuICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgUGxvdGx5Lm5ld1Bsb3QoY2hhcnREaXYsIFtkYXRhXSwgbGF5b3V0LCB7IHJlc3BvbnNpdmU6IHRydWUgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBtb2RlVXBkYXRlZDogbW9kZVVwZGF0ZWQsXG4gIHZvbHVtZVVwZGF0ZWQ6IHZvbHVtZVVwZGF0ZWQsXG4gIGFjdGl2aXR5VXBkYXRlZDogYWN0aXZpdHlVcGRhdGVkLFxuICBhaXJpbmdVcGRhdGVkOiBhaXJpbmdVcGRhdGVkLFxuICB2aXN0eXBlVXBkYXRlZDogdmlzdHlwZVVwZGF0ZWQsXG4gIHBlb3BsZVVwZGF0ZWQ6IHBlb3BsZVVwZGF0ZWQsXG4gIHVzZWRRVXBkYXRlZDogdXNlZFFVcGRhdGVkLFxuICBtYXhRVXBkYXRlZDogbWF4UVVwZGF0ZWRcbn07XG4iLCJjb25zdCB2b2x1bWUgPSByZXF1aXJlKFwiLi92b2x1bWUuanNcIik7XG5jb25zdCBncmFwaCA9IHJlcXVpcmUoXCIuL2dyYXBoLmpzXCIpO1xuXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1vZGVcIikuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGZ1bmN0aW9uIChldmVudCkge1xuICAvLyBpZiBleHBlcnQsIGhpZGUgc2ltcGxlIGh0bWwgZWxlbWVudHNcbiAgaWYgKGV2ZW50LnRhcmdldC52YWx1ZSA9PSBcImV4cGVydFwiKSB7XG4gICAgc2ltcGVsRWxlbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwic2ltcGxlXCIpXG4gICAgZm9yIChlbCBvZiBzaW1wZWxFbGVtZW50cykge1xuICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCJcbiAgICB9XG4gICAgZXhwZXJ0RWxlbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZXhwZXJ0XCIpXG4gICAgZm9yIChlbCBvZiBleHBlcnRFbGVtZW50cykge1xuICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiXG4gICAgfVxuICB9IGVsc2UgaWYgKGV2ZW50LnRhcmdldC52YWx1ZSA9PSBcInNpbXBsZVwiKSB7XG4gICAgZXhwZXJ0RWxlbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwic2ltcGxlXCIpXG4gICAgZm9yIChlbCBvZiBleHBlcnRFbGVtZW50cykge1xuICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiXG4gICAgfVxuICAgIGV4cGVydEVsZW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImV4cGVydFwiKVxuICAgIGZvciAoZWwgb2YgZXhwZXJ0RWxlbWVudHMpIHtcbiAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiXG4gICAgfVxuICB9XG4gIGdyYXBoLm1vZGVVcGRhdGVkKGV2ZW50LnRhcmdldC52YWx1ZSlcbn0pO1xuXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFjdGl2aXR5XCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgZ3JhcGguYWN0aXZpdHlVcGRhdGVkKGV2ZW50LnRhcmdldC52YWx1ZSk7XG59KTtcblxuLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aXN0eXBlXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbi8vICAgZ3JhcGgudmlzdHlwZVVwZGF0ZWQoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbi8vIH0pO1xuXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBlb3BsZVwiKS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LnRhcmdldC52YWx1ZSAhPSBcIlwiKSB7XG4gICAgICAgIGFtb3VudCA9IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgICAgICAgaWYgKDEgPiBhbW91bnQgfHwgYW1vdW50ID4gMTAwKSB7XG4gICAgICAgICAgICBhbW91bnQgPSAzXG4gICAgICAgICAgICBldmVudC50YXJnZXQudmFsdWUgPSBhbW91bnRcbiAgICAgICAgfVxuICAgICAgICBncmFwaC5wZW9wbGVVcGRhdGVkKGFtb3VudCk7XG4gICAgfVxufSk7XG5cbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWlyaW5nXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBncmFwaC5haXJpbmdVcGRhdGVkKGV2ZW50LnRhcmdldC52YWx1ZSlcbn0pO1xuXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVzZWRRXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0LnZhbHVlIDwgMSkge1xuICAgICAgICBldmVudC50YXJnZXQudmFsdWUgPSAxXG4gICAgfSBlbHNlIGlmIChldmVudC50YXJnZXQudmFsdWUgPiAzMDAwKSB7XG4gICAgICAgIGV2ZW50LnRhcmdldC52YWx1ZSA9IDMwMDBcbiAgICB9XG4gICAgZ3JhcGgudXNlZFFVcGRhdGVkKGV2ZW50LnRhcmdldC52YWx1ZSlcbn0pO1xuXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1heFFcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmdW5jdGlvbihldmVudCkge1xuICAgIGlmIChldmVudC50YXJnZXQudmFsdWUgPCAxKSB7XG4gICAgICAgIGV2ZW50LnRhcmdldC52YWx1ZSA9IDFcbiAgICB9IGVsc2UgaWYgKGV2ZW50LnRhcmdldC52YWx1ZSA+IDMwMDApIHtcbiAgICAgICAgZXZlbnQudGFyZ2V0LnZhbHVlID0gMzAwMFxuICAgIH1cbiAgICBncmFwaC5tYXhRVXBkYXRlZChldmVudC50YXJnZXQudmFsdWUpXG59KTsiLCJjb25zdCBncmFwaCA9IHJlcXVpcmUoXCIuL2dyYXBoLmpzXCIpO1xuXG5mdW5jdGlvbiBJbnB1dEVsZW1lbnQoZWxlbWVudCwgZGF0YSkge1xuICB0aGlzLmRhdGEgPSBkYXRhO1xuICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICBlbGVtZW50LnZhbHVlID0gZGF0YTtcbiAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIHRoaXMsIGZhbHNlKTtcbn1cblxuLyoqXG4gKiBDYWxsZWQgd2hlbiB0aGUgaW5wdXQgZWxlbWVudCBpcyB1cGRhdGVkLCBlLmcuLCBieSB1c2luZyBhcnJvd3Mgd2hlbiB0eXBlPW51bWJlciBvciBieSBwcmVzc2luZyBlbnRlclxuICovXG5JbnB1dEVsZW1lbnQucHJvdG90eXBlLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gIHN3aXRjaCAoZXZlbnQudHlwZSkge1xuICAgIGNhc2UgXCJjaGFuZ2VcIjpcbiAgICAgIHRoaXMuY2hhbmdlKHRoaXMuZWxlbWVudC52YWx1ZSk7XG4gICAgICB1cGRhdGVWb2x1bWUoKTtcbiAgfVxufTtcblxuLyoqXG4gKiBVcGRhdGUgdGhlIGVsZW1lbnQ7IHRoaXMgbWV0aG9kIHVwZGF0ZXMgdGhlIERPTSByZXByZXNlbnRhdGlvbiBhbmQgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uXG4gKi9cbklucHV0RWxlbWVudC5wcm90b3R5cGUuY2hhbmdlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gIHRoaXMuZGF0YSA9IHZhbHVlO1xuICB0aGlzLmVsZW1lbnQudmFsdWUgPSB2YWx1ZTtcbn07XG5cbmZ1bmN0aW9uIHVwZGF0ZVZvbHVtZSgpIHtcbiAgaWYgKGxlbmd0aEVsZW1lbnQuZGF0YSA+IDEwKSB7XG4gICAgbGVuZ3RoRWxlbWVudC5jaGFuZ2UoMTApXG4gIH1cbiAgaWYgKGxlbmd0aEVsZW1lbnQuZGF0YSA8IDEpIHtcbiAgICBsZW5ndGhFbGVtZW50LmNoYW5nZSgxKVxuICB9XG5cbiAgaWYgKHdpZHRoRWxlbWVudC5kYXRhID4gMTApIHtcbiAgICBsZW5ndGhFbGVtZW50LmNoYW5nZSgxMClcbiAgfVxuICBpZiAod2lkdGhFbGVtZW50LmRhdGEgPCAxKSB7XG4gICAgbGVuZ3RoRWxlbWVudC5jaGFuZ2UoMSlcbiAgfVxuXG4gIGlmIChoZWlnaHRFbGVtZW50LmRhdGEgPiA1KSB7XG4gICAgbGVuZ3RoRWxlbWVudC5jaGFuZ2UoNSlcbiAgfVxuICBpZiAoaGVpZ2h0RWxlbWVudC5kYXRhIDwgMSkge1xuICAgIGxlbmd0aEVsZW1lbnQuY2hhbmdlKDEpXG4gIH1cblxuICBjb25zdCB2b2x1bWUgPSBsZW5ndGhFbGVtZW50LmRhdGEgKiB3aWR0aEVsZW1lbnQuZGF0YSAqIGhlaWdodEVsZW1lbnQuZGF0YTtcbiAgY29uc29sZS5sb2codm9sdW1lKTtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2b2x1bWVcIikudmFsdWUgPSB2b2x1bWU7XG4gIGdyYXBoLnZvbHVtZVVwZGF0ZWQodm9sdW1lKTtcbiAgcmV0dXJuIHZvbHVtZTtcbn1cblxuLy8gaXQgaXMgcG9zc2libGUgdG8gdXBkYXRlIHRoZXNlIGVsZW1lbnRzLCBlLmcuLCB3aXRoIGxlbmd0aEVsZW1lbnQuY2hhbmdlKDEwKVxudmFyIGxlbmd0aEVsZW1lbnQgPSBuZXcgSW5wdXRFbGVtZW50KFxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxlbmd0aFwiKSxcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsZW5ndGhcIikudmFsdWVcbik7XG52YXIgd2lkdGhFbGVtZW50ID0gbmV3IElucHV0RWxlbWVudChcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ3aWR0aFwiKSxcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ3aWR0aFwiKS52YWx1ZVxuKTtcbnZhciBoZWlnaHRFbGVtZW50ID0gbmV3IElucHV0RWxlbWVudChcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJoZWlnaHRcIiksXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaGVpZ2h0XCIpLnZhbHVlXG4pO1xudXBkYXRlVm9sdW1lKCk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBnZXQ6IHVwZGF0ZVZvbHVtZSxcbiAgaW5pdDogdXBkYXRlVm9sdW1lLFxufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=