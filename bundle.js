!function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){const n={low_activity_lying:.45,low_activity:.54,singing:.65,mid_activity:.9,sports:1.2,test_1:.54,test_2:.65};function a(e){return"singing"==e?3500:"test_2"==e?2500:100}function o(e){const t=2.7618*(Math.exp(1.1761*3.35)-1),o=a("low_activity");return t*(a(e)/o)*(n[e]/n.low_activity)}function l(e,t,n,a){let o=390625*t+225625;return o*=Math.exp(t*a),o-=225625,o*=Math.exp(-t*a-.5776*a),o=390625*t-o,o*=e,o/(n*(225625*t+130321))}function i(e,t,a,i){0==t&&(t+=.01),console.log(`Calculating pira for: t=${e}, Q=${t}, activity=${a}, V=${i}`);const u=function(e,t){return e/t}(i,t),r=o(a),d=function(e,t){return e*Math.exp(-.5776*t)}(r,u),c=function(e,t){return t/e}(i,t);if(e>u){const o=l(r,c,t,u);let i=function(e,t,n,a,o){return e*(t*o+Math.exp(-t*o)-1/Math.E-1)/(a*t)}(d,c,0,t,e);return 1-Math.exp(-(o+i)*n[a])}{const o=l(r,c,t,e);return 1-Math.exp(-o*n[a])}}e.exports={prepareData:function(e,t,n){const a=e;let o=[],l=[],u=[];const r=n;for(let e=50;e<=r;e+=50){o=[];let n=[];for(let l=0;l<=6;l+=.1)p=i(l,e,t,a),p=Math.round(1e4*p)/100,n.push(p),o.push(l);l.push(e),u.push(n)}return{test:o,x:o,y:l,z:u}},prepareDataSimple:function(e,t,n,a){const o=e;console.log("Total airflow for all people in the room is (Q) is "+n);let l=[],u=[],r=[],d=[];for(let e=0;e<=6;e+=1){p=i(e,n,t,o),p=Math.round(1e4*p)/100,u.push(p),l.push(e),r.push(e),d.push(Math.round(p*(a-1)/100));for(let a=.1;a<1;a+=.1)p=i(e+a,n,t,o),p=Math.round(1e4*p)/100,u.push(p),l.push(e+a)}return[{x:l,y:u},{x:r,y:d}]},pira:i,f_qa:o,f_Q:function(e){return"very_bad"==e?10:"bad"==e?20:"ok"==e?30:"good"==e?40:"very_good"==e?60:void 0}}},function(e,t,n){const a=n(0).prepareData,o=n(0).prepareDataSimple,l=n(0).f_Q;var i=document.getElementById("volume").value,u=document.getElementById("activity").value,r=document.getElementById("mode").value,d=document.getElementById("airing").value,c=document.getElementById("people").value,s=-1;g();var p=-1;f();const m=document.getElementById("chart");function g(){s=l(d)*c,document.getElementById("usedQ").value=s}function f(){p=l("very_good")*c,document.getElementById("maxQ").value=p}function y(){console.log("The graph must be updated!"),console.log(`Volume: ${i}, activity: ${u}, airing: ${d}`),"simple"===r?(data=o(i,u,s,c),function(e){e[0].mode="lines",e[0].name="PIRA (in %)",e[0].yaxis="y",e[1].type="bar",e[1].yaxis="y2",e[1].name="Potentiell Angesteckte",console.log(e);var t={shareX:!0,xaxis:{title:{text:"Zeit in Stunden"}},yaxis:{title:"PIRA (in %)",overlaying:"y2",tickvals:[10,20,30,40,50,60,70,80,90,100],range:[0,100]},yaxis2:{tickmode:"auto",title:"Anzahl sich potentiell angesteckter Personen (gerundet)",side:"right",range:[0,c-1]},legend:{y:1,x:0}};Plotly.newPlot(m,e,t,{responsive:!0})}(data)):"expert"===r&&(data=a(i,u,p),function(e){e.type="contour",e.colorbar={title:"PIRA",ticksuffix:"%"},e.hovertemplate="PIRA: %{z:.2f}%<extra></extra>";console.log(e),Plotly.newPlot(m,[e],{showaxeslabels:!0,xaxis_title:"Zeit in Stunden",xaxis:{title:{text:"Zeit in Stunden"}},yaxis:{title:{text:"Frischluftmenge in mÂ³/h"}}},{responsive:!0})}(data))}e.exports={modeUpdated:function(e){r=e,y()},volumeUpdated:function(e){i=e,y()},activityUpdated:function(e){u=e,y()},airingUpdated:function(e){d=e,g(),y()},vistypeUpdated:function(e){vistype=e,y()},peopleUpdated:function(e){c=e,g(),f(),y()},usedQUpdated:function(e){s=e,y()},maxQUpdated:function(e){p=e,y()}}},function(e,t,n){n(3);const a=n(1);document.getElementById("mode").addEventListener("input",(function(e){if("expert"==e.target.value){for(el of(simpelElements=document.getElementsByClassName("simple"),simpelElements))el.style.display="none";for(el of(expertElements=document.getElementsByClassName("expert"),expertElements))el.style.display="block"}else if("simple"==e.target.value){for(el of(expertElements=document.getElementsByClassName("simple"),expertElements))el.style.display="block";for(el of(expertElements=document.getElementsByClassName("expert"),expertElements))el.style.display="none"}a.modeUpdated(e.target.value)})),document.getElementById("activity").addEventListener("input",(function(e){a.activityUpdated(e.target.value)})),document.getElementById("people").addEventListener("input",(function(e){""!=e.target.value&&(amount=e.target.value,(1>amount||amount>100)&&(amount=3,e.target.value=amount),a.peopleUpdated(amount))})),document.getElementById("airing").addEventListener("change",(function(e){a.airingUpdated(e.target.value)})),document.getElementById("usedQ").addEventListener("change",(function(e){e.target.value<1?e.target.value=1:e.target.value>6e3&&(e.target.value=6e3),a.usedQUpdated(e.target.value)})),document.getElementById("maxQ").addEventListener("change",(function(e){e.target.value<100?e.target.value=100:e.target.value>6e3&&(e.target.value=6e3),a.maxQUpdated(e.target.value)}))},function(e,t,n){const a=n(1);function o(e,t){this.data=t,this.element=e,e.value=t,e.addEventListener("change",this,!1)}function l(){i.data>10&&i.change(10),i.data<1&&i.change(1),u.data>10&&i.change(10),u.data<1&&i.change(1),r.data>5&&i.change(5),r.data<1&&i.change(1);const e=i.data*u.data*r.data;return console.log(e),document.getElementById("volume").value=e,a.volumeUpdated(e),e}o.prototype.handleEvent=function(e){switch(e.type){case"change":this.change(this.element.value),l()}},o.prototype.change=function(e){this.data=e,this.element.value=e};var i=new o(document.getElementById("length"),document.getElementById("length").value),u=new o(document.getElementById("width"),document.getElementById("width").value),r=new o(document.getElementById("height"),document.getElementById("height").value);l(),e.exports={get:l,init:l}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RhdGEuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyYXBoLmpzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdm9sdW1lLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiUWIiLCJsb3dfYWN0aXZpdHlfbHlpbmciLCJsb3dfYWN0aXZpdHkiLCJzaW5naW5nIiwibWlkX2FjdGl2aXR5Iiwic3BvcnRzIiwidGVzdF8xIiwidGVzdF8yIiwiZl9FIiwiYWN0aXZpdHkiLCJmX3FhIiwicV8wIiwiTWF0aCIsImV4cCIsIkVfMCIsImZfQyIsInFhIiwiQUNIIiwiUSIsInBpcmEiLCJWIiwiY29uc29sZSIsImxvZyIsInRhdSIsImZfdGF1IiwicWF0YXUiLCJmX3FhdGF1IiwiZl9BQ0giLCJDIiwiQ3RhdSIsIkUiLCJmX0N0YXUiLCJwcmVwYXJlRGF0YSIsInZvbHVtZSIsIm1heFEiLCJ4QSIsInlBIiwicm93cyIsIm1heCIsInJvdyIsInJvdW5kIiwicHVzaCIsInRlc3QiLCJ4IiwieSIsInoiLCJwcmVwYXJlRGF0YVNpbXBsZSIsInBlb3BsZSIsIngyIiwieTIiLCJzdCIsImZfUSIsImFpcmluZyIsImRhdGFGIiwiZGF0YUZTaW1wbGUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwidXNlZFEiLCJjYWxjdWxhdGVVc2VkUSIsImNhbGN1bGF0ZU1heFEiLCJjaGFydERpdiIsInVwZGF0ZUdyYXBoIiwiZGF0YSIsInlheGlzIiwidHlwZSIsImxheW91dCIsInNoYXJlWCIsInhheGlzIiwidGl0bGUiLCJ0ZXh0Iiwib3ZlcmxheWluZyIsInRpY2t2YWxzIiwicmFuZ2UiLCJ5YXhpczIiLCJ0aWNrbW9kZSIsInNpZGUiLCJsZWdlbmQiLCJQbG90bHkiLCJuZXdQbG90IiwicmVzcG9uc2l2ZSIsImRyYXdTaW1wbGVQbG90IiwiY29sb3JiYXIiLCJ0aWNrc3VmZml4IiwiaG92ZXJ0ZW1wbGF0ZSIsInNob3dheGVzbGFiZWxzIiwieGF4aXNfdGl0bGUiLCJkcmF3Q29udG91clBsb3QiLCJtb2RlVXBkYXRlZCIsIm5ld01vZGUiLCJ2b2x1bWVVcGRhdGVkIiwibmV3Vm9sdW1lIiwiYWN0aXZpdHlVcGRhdGVkIiwibmV3QWN0aXZpdHkiLCJhaXJpbmdVcGRhdGVkIiwibmV3QWlyaW5nIiwidmlzdHlwZVVwZGF0ZWQiLCJuZXdWaXNUeXBlIiwidmlzdHlwZSIsInBlb3BsZVVwZGF0ZWQiLCJuZXdQZW9wbGUiLCJ1c2VkUVVwZGF0ZWQiLCJuZXdVc2VkUSIsIm1heFFVcGRhdGVkIiwibmV3TWF4USIsImdyYXBoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwidGFyZ2V0IiwiZWwiLCJzaW1wZWxFbGVtZW50cyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJzdHlsZSIsImRpc3BsYXkiLCJleHBlcnRFbGVtZW50cyIsImFtb3VudCIsIklucHV0RWxlbWVudCIsImVsZW1lbnQiLCJ0aGlzIiwidXBkYXRlVm9sdW1lIiwibGVuZ3RoRWxlbWVudCIsImNoYW5nZSIsIndpZHRoRWxlbWVudCIsImhlaWdodEVsZW1lbnQiLCJoYW5kbGVFdmVudCIsImluaXQiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlB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QUFRQSxFQUFNMUMsTUFDWixJQUFLLFNBQ0hxRCxLQUFLRyxPQUFPSCxLQUFLRCxRQUFRbkksT0FDekJxSSxNQU9OSCxFQUFhdkgsVUFBVTRILE9BQVMsU0FBVXZJLEdBQ3hDb0ksS0FBS3ZELEtBQU83RSxFQUNab0ksS0FBS0QsUUFBUW5JLE1BQVFBLEdBaUN2QixJQUFJc0ksRUFBZ0IsSUFBSUosRUFDdEI1RCxTQUFTQyxlQUFlLFVBQ3hCRCxTQUFTQyxlQUFlLFVBQVV2RSxPQUVoQ3dJLEVBQWUsSUFBSU4sRUFDckI1RCxTQUFTQyxlQUFlLFNBQ3hCRCxTQUFTQyxlQUFlLFNBQVN2RSxPQUUvQnlJLEVBQWdCLElBQUlQLEVBQ3RCNUQsU0FBU0MsZUFBZSxVQUN4QkQsU0FBU0MsZUFBZSxVQUFVdkUsT0FFcENxSSxJQUVBdkosRUFBT0QsUUFBVSxDQUNmZSxJQUFLeUksRUFDTE0sS0FBTU4iLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDIpO1xuIiwiY29uc3QgUWIgPSB7XG4gIGxvd19hY3Rpdml0eV9seWluZzogMC40NSxcbiAgbG93X2FjdGl2aXR5OiAwLjU0LFxuICBzaW5naW5nOiAwLjY1LFxuICBtaWRfYWN0aXZpdHk6IDAuOSxcbiAgc3BvcnRzOiAxLjIsXG4gIHRlc3RfMTogMC41NCwgLy8gdmFsdWUgdXNlZCBpbiB0ZXN0X2RhdGEvUElSX01vZGVsbC5qcGdcbiAgdGVzdF8yOiAwLjY1LCAvLyB2YWx1ZSB1c2VkIGluIHRlc3RfZGF0YS9QSVJfTW9kZWxsX2FrdC5qcGcgYXMgaW5zdHJ1Y3RlZCBieSBtYWlsXG59O1xuXG5mdW5jdGlvbiBmX3RhdShWLCBRKSB7XG4gIHJldHVybiBWIC8gUTtcbn1cblxuZnVuY3Rpb24gZl9FKGFjdGl2aXR5KSB7XG4gIGlmIChhY3Rpdml0eSA9PSBcInNpbmdpbmdcIikge1xuICAgIHJldHVybiAzNTAwO1xuICB9IGVsc2UgaWYgKGFjdGl2aXR5ID09XCJ0ZXN0XzJcIikge1xuICAgIHJldHVybiAyNTAwOyAvLyB2YWx1ZSByZWNlaXZlZCB2aWEgbWFpbCBmcm9tIGtyaWVnZWxcbiAgfSBlbHNlIHJldHVybiAxMDA7XG59XG5cbmZ1bmN0aW9uIGZfUShhaXJpbmcpIHtcbiAgaWYgKGFpcmluZyA9PSBcInZlcnlfYmFkXCIpIHtcbiAgICByZXR1cm4gMTA7XG4gIH0gZWxzZSBpZiAoYWlyaW5nID09IFwiYmFkXCIpIHtcbiAgICByZXR1cm4gMjA7XG4gIH0gZWxzZSBpZiAoYWlyaW5nID09IFwib2tcIikge1xuICAgIHJldHVybiAzMDtcbiAgfSBlbHNlIGlmIChhaXJpbmcgPT0gXCJnb29kXCIpIHtcbiAgICByZXR1cm4gNDA7XG4gIH0gZWxzZSBpZiAoYWlyaW5nID09IFwidmVyeV9nb29kXCIpIHtcbiAgICByZXR1cm4gNjA7XG4gIH1cbn1cblxuZnVuY3Rpb24gZl9xYShhY3Rpdml0eSkge1xuICBjb25zdCBSXzAgPSAzLjM1O1xuICBjb25zdCBxXzAgPSAyLjc2MTggKiAoTWF0aC5leHAoMS4xNzYxICogUl8wKSAtIDEpO1xuXG4gIGNvbnN0IEVfMCA9IGZfRShcImxvd19hY3Rpdml0eVwiKTtcbiAgY29uc3QgRSA9IGZfRShhY3Rpdml0eSk7XG5cbiAgcmV0dXJuIHFfMCAqIChFIC8gRV8wKSAqIChRYlthY3Rpdml0eV0gLyBRYi5sb3dfYWN0aXZpdHkpO1xufVxuXG5mdW5jdGlvbiBmX3FhdGF1KHFhLCB0YXUpIHtcbiAgcmV0dXJuIHFhICogTWF0aC5leHAoLTAuNTc3NiAqIHRhdSk7XG59XG5cbmZ1bmN0aW9uIGZfQUNIKFYsIFEpIHtcbiAgcmV0dXJuIFEgLyBWO1xufVxuXG5mdW5jdGlvbiBmX0MocWEsIEFDSCwgUSwgdCkge1xuICAvLyBudW1lcmF0b3JcblxuICBsZXQgbiA9IDM5MDYyNSAqIEFDSCArIDIyNTYyNTtcbiAgLy8gY29uc29sZS5sb2cobik7XG4gIG4gPSBuICogTWF0aC5leHAoQUNIICogdCk7XG4gIC8vIGNvbnNvbGUubG9nKG4pO1xuICBuID0gbiAtIDIyNTYyNTtcbiAgLy8gY29uc29sZS5sb2cobik7XG4gIG4gPSBuICogTWF0aC5leHAoLUFDSCAqIHQgLSAoMzYxIC8gNjI1KSAqIHQpO1xuICAvLyBjb25zb2xlLmxvZyhuKTtcbiAgbiA9IDM5MDYyNSAqIEFDSCAtIG47XG4gIC8vIGNvbnNvbGUubG9nKG4pO1xuICBuID0gcWEgKiBuO1xuXG4gIC8vIGNvbnNvbGUubG9nKG4pO1xuICAvLyBjb25zb2xlLmxvZyhxYSk7XG4gIC8vIGNvbnNvbGUubG9nKEFDSCk7XG4gIC8vIGNvbnNvbGUubG9nKFEpO1xuICAvLyBjb25zb2xlLmxvZyhcInQ6IFwiICsgdCk7XG5cbiAgLy8gY29uc29sZS5sb2cobik7XG4gIC8vIGRlbm9taW5hdG9yXG4gIGxldCBkID0gUSAqICgyMjU2MjUgKiBBQ0ggKyAxMzAzMjEpO1xuICAvLyBjb25zb2xlLmxvZyhkKTtcblxuICByZXR1cm4gbiAvIGQ7XG59XG5cbmZ1bmN0aW9uIGZfQ3RhdShxYXRhdSwgQUNILCB0YXUsIFEsIHQpIHtcbiAgLy8gbnVtZXJhdG9yXG4gIC8vIGxldCBuID0gcWF0YXUgKiBNYXRoLmV4cCgtQUNIICogKHQgKyB0YXUpKSAqIChBQ0ggKiAodCAtIHRhdSkgKiBNYXRoLmV4cChBQ0ggKiAodCArIHRhdSkpIC0gTWF0aC5leHAoQUNIICogdCkgKyBNYXRoLmV4cChBQ0ggKiB0YXUpKTtcbiAgLy8gbGV0IG4gPSBxYXRhdSAqIE1hdGguZXhwKC1BQ0ggKiB0IC0gMSkgKiAoKEFDSCAqIHQgLSAxKSAqIE1hdGguZXhwKEFDSCAqIHQgKyAxKSAtIE1hdGguZXhwKEFDSCAqIHQpICsgTWF0aC5leHAoMSkpO1xuICBsZXQgbiA9IHFhdGF1ICogKEFDSCAqIHQgKyBNYXRoLmV4cCgtQUNIICogdCkgLSAxL01hdGguRSAtIDEpIC8vIHRoaXMgaXMgYSBzaW1wbGlmaWNhdGlvbiBvZiB0aGUgYWJvdmUgZ2VuZXJhdGVkIGJ5IHdvbGZyYW0gYWxwaGFcblxuICAvLyBkZW5vbWluYXRvclxuICBsZXQgZCA9IFEgKiBBQ0g7XG5cbiAgcmV0dXJuIG4gLyBkO1xufVxuXG5mdW5jdGlvbiBwaXJhKHQsIFEsIGFjdGl2aXR5LCBWKSB7XG4gIGlmIChRID09IDApIFEgKz0gMC4wMTtcbiAgY29uc29sZS5sb2coYENhbGN1bGF0aW5nIHBpcmEgZm9yOiB0PSR7dH0sIFE9JHtRfSwgYWN0aXZpdHk9JHthY3Rpdml0eX0sIFY9JHtWfWApO1xuICBjb25zdCB0YXUgPSBmX3RhdShWLCBRKTtcbiAgLy8gY29uc29sZS5sb2coXCJ0YXU6IFwiICsgdGF1KTtcbiAgY29uc3QgcWEgPSBmX3FhKGFjdGl2aXR5KTtcbiAgLy8gY29uc29sZS5sb2coXCJxYTogXCIgKyBxYSk7XG4gIGNvbnN0IHFhdGF1ID0gZl9xYXRhdShxYSwgdGF1KTtcbiAgLy8gY29uc29sZS5sb2coXCJxYXRhdTogXCIgKyBxYXRhdSk7XG4gIGNvbnN0IEFDSCA9IGZfQUNIKFYsIFEpO1xuICAvLyBjb25zb2xlLmxvZyhcIkFDSDogXCIgKyBBQ0gpO1xuICAvLyBjb25zb2xlLmxvZyhcIlFiOiBcIiArIFFiW2FjdGl2aXR5XSk7XG5cbiAgaWYgKHQgPiB0YXUpIHtcbiAgICBjb25zdCBDID0gZl9DKHFhLCBBQ0gsIFEsIHRhdSk7XG4gICAgLy8gY29uc29sZS5sb2coQyk7XG4gICAgbGV0IEN0YXUgPSBmX0N0YXUocWF0YXUsIEFDSCwgdGF1LCBRLCB0KTtcbiAgICAvLyBpZiAoaXNOYU4oQ3RhdSkpIHtcbiAgICAvLyAgICAgQ3RhdSA9IDFcbiAgICAvLyB9XG4gICAgLy8gY29uc29sZS5sb2coQ3RhdSk7XG4gICAgcmV0dXJuIDEgLSBNYXRoLmV4cCgtKEMgKyBDdGF1KSAqIFFiW2FjdGl2aXR5XSk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgQyA9IGZfQyhxYSwgQUNILCBRLCB0KTtcbiAgICAvLyBjb25zb2xlLmxvZyhDKTtcbiAgICByZXR1cm4gMSAtIE1hdGguZXhwKC1DICogUWJbYWN0aXZpdHldKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwcmVwYXJlRGF0YSh2b2x1bWUsIGFjdGl2aXR5LCBtYXhRKSB7XG4gIGNvbnN0IFYgPSB2b2x1bWU7XG5cbiAgbGV0IHhBID0gW107XG4gIGxldCB5QSA9IFtdO1xuICBsZXQgcm93cyA9IFtdO1xuXG4gIGNvbnN0IG1pbiA9IDUwXG4gIGNvbnN0IG1heCA9IG1heFFcblxuICBmb3IgKGxldCBRID0gbWluOyBRIDw9IG1heDsgUSArPSA1MCkge1xuICAgIHhBID0gW107XG4gICAgbGV0IHJvdyA9IFtdO1xuXG4gICAgZm9yIChsZXQgdCA9IDAuMDsgdCA8PSA2LjA7IHQgKz0gMC4xKSB7XG4gICAgICAvLyBob3VycywrIGluY3JlbWVudHMgaW4gaG91cnNcbiAgICAgIHAgPSBwaXJhKHQsIFEsIGFjdGl2aXR5LCBWKTtcbiAgICAgIC8vY29uc29sZS5sb2coXCJQaXJhIGZvciB0PVwiICsgdCArIFwiLCBRPVwiICsgUSArIFwiOiBcIiArIHApO1xuICAgICAgcCA9IE1hdGgucm91bmQocCAqIDEwMDAwKSAvIDEwMDtcbiAgICAgIC8vaWYgKHQgPT0gNiAmJiBRID09IDUwMCkgcCA9IDEwMDtcbiAgICAvLyAgIGlmIChpc05hTihwKSB8fCBwID49IDEwMCkge1xuICAgIC8vICAgICAgIHAgPSAwXG4gICAgLy8gICB9XG4gICAgICByb3cucHVzaChwKTtcbiAgICAgIHhBLnB1c2godCk7XG4gICAgfVxuICAgIHlBLnB1c2goUSk7XG4gICAgcm93cy5wdXNoKHJvdyk7XG4gIH1cblxuICAvLyBmb3IgKGxldCBtaW51dGUgPSAwOyBtaW51dGUgPD0gMzYwOyBtaW51dGUgKz0gMzApIHtcbiAgLy8gICAgIGxldCB0ID0gbWludXRlIC8gNjA7XG4gIC8vICAgICBsZXQgbSA9IG1pbnV0ZSAlIDYwO1xuICAvLyAgICAgbGV0IGggPSAobWludXRlIC0gbSkgLyA2MDtcbiAgLy8gICAgIGxldCB0aW1lID0gaCArIFwiOlwiICsgbSArIFwiaFwiO1xuICAvLyB9XG5cbiAgcmV0dXJuIHtcbiAgICB0ZXN0OiB4QSxcbiAgICB4OiB4QSxcbiAgICB5OiB5QSxcbiAgICB6OiByb3dzXG4gIH07XG59XG5cbmZ1bmN0aW9uIHByZXBhcmVEYXRhU2ltcGxlKHZvbHVtZSwgYWN0aXZpdHksIFEsIHBlb3BsZSkge1xuICBjb25zdCBWID0gdm9sdW1lO1xuIFxuICBjb25zb2xlLmxvZyhgVG90YWwgYWlyZmxvdyBmb3IgYWxsIHBlb3BsZSBpbiB0aGUgcm9vbSBpcyAoUSkgaXMgJHtRfWApXG5cbiAgbGV0IHggPSBbXTtcbiAgbGV0IHkgPSBbXTsgLy8gcGlyYVxuICBsZXQgeDIgPSBbXTsgLy8gb25seSB0aW1lc3RhbXBzIGZvciB0aGUgZnVsbCBob3VyXG4gIGxldCB5MiA9IFtdOyAvLyBpbmZlY3RlZCBwZW9wbGVcblxuICBmb3IgKGxldCB0ID0gMDsgdCA8PSA2OyB0ICs9IDEpIHtcbiAgICBwID0gcGlyYSh0LCBRLCBhY3Rpdml0eSwgVik7XG4gICAgcCA9IE1hdGgucm91bmQocCAqIDEwMDAwKSAvIDEwMDtcbiAgICB5LnB1c2gocCk7XG4gICAgeC5wdXNoKHQpO1xuICAgIHgyLnB1c2godClcbiAgICB5Mi5wdXNoKE1hdGgucm91bmQocCAqIChwZW9wbGUgLSAxKS8gMTAwKSk7IC8vIHRoZSBpbmZlY3RlZCBwZXJzb24gY2Fubm90IGJlIGluZmVjdGVkIGFnYWluXG4gICAgLy8gaW50ZXJtZWRpYXRlIHN0ZXBzIGZvciBwaXJhIG9ubHksIG5vdCBmb3Igbm8uIGluZmVjdGVkIHBlb3BsZVxuICAgIGZvciAobGV0IHN0ID0gMC4xOyBzdCA8IDE7IHN0ICs9IDAuMSkge1xuICAgICAgICBwID0gcGlyYSh0ICsgc3QsIFEsIGFjdGl2aXR5LCBWKTtcbiAgICAgICAgcCA9IE1hdGgucm91bmQocCAqIDEwMDAwKSAvIDEwMDtcbiAgICAgICAgeS5wdXNoKHApO1xuICAgICAgICB4LnB1c2godCArIHN0KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gW1xuICAgIHtcbiAgICAgIHg6IHgsXG4gICAgICB5OiB5XG4gICAgfSxcbiAgICB7XG4gICAgICB4OiB4MixcbiAgICAgIHk6IHkyXG4gICAgfVxuICBdO1xuXG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIHByZXBhcmVEYXRhOiBwcmVwYXJlRGF0YSxcbiAgICBwcmVwYXJlRGF0YVNpbXBsZTogcHJlcGFyZURhdGFTaW1wbGUsXG4gICAgcGlyYTogcGlyYSxcbiAgICBmX3FhOiBmX3FhLFxuICAgIGZfUTogZl9RXG59XG4iLCJjb25zdCBkYXRhRiA9IHJlcXVpcmUoXCIuL2RhdGEuanNcIikucHJlcGFyZURhdGE7XG5jb25zdCBkYXRhRlNpbXBsZSA9IHJlcXVpcmUoXCIuL2RhdGEuanNcIikucHJlcGFyZURhdGFTaW1wbGU7XG5jb25zdCBmX1EgPSByZXF1aXJlKFwiLi9kYXRhLmpzXCIpLmZfUTtcbi8vIGNvbnN0IFBsb3RseSA9IHJlcXVpcmUoXCJwbG90bHkuanMtZ2wzZC1kaXN0LW1pblwiKSAvLyBub3QgaW5zdGFsbGVkIHZpYSBucG0gdG8gcmVkdWNlIGJ1bmRsZSBzaXplXG5cbnZhciB2b2x1bWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZvbHVtZVwiKS52YWx1ZTtcbnZhciBhY3Rpdml0eSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWN0aXZpdHlcIikudmFsdWU7XG4vLyB2YXIgdmlzdHlwZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmlzdHlwZVwiKS52YWx1ZTtcbnZhciBtb2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtb2RlXCIpLnZhbHVlOyAvLyBzaW1wbGUgb3IgZXhwZXJ0XG52YXIgYWlyaW5nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhaXJpbmdcIikudmFsdWU7IC8vIGluIHRoZSBmb3JtdWxhLCB0aGlzIGlzIFFcbnZhciBwZW9wbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBlb3BsZVwiKS52YWx1ZTtcbnZhciB1c2VkUSA9IC0xO1xuY2FsY3VsYXRlVXNlZFEoKTtcbnZhciBtYXhRID0gLTE7XG5jYWxjdWxhdGVNYXhRKCk7XG5cbmNvbnN0IGNoYXJ0RGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjaGFydFwiKTtcblxuZnVuY3Rpb24gbW9kZVVwZGF0ZWQobmV3TW9kZSkge1xuICBtb2RlID0gbmV3TW9kZTtcbiAgdXBkYXRlR3JhcGgoKTtcbn1cblxuZnVuY3Rpb24gdm9sdW1lVXBkYXRlZChuZXdWb2x1bWUpIHtcbiAgdm9sdW1lID0gbmV3Vm9sdW1lO1xuICB1cGRhdGVHcmFwaCgpO1xufVxuXG5mdW5jdGlvbiBhY3Rpdml0eVVwZGF0ZWQobmV3QWN0aXZpdHkpIHtcbiAgYWN0aXZpdHkgPSBuZXdBY3Rpdml0eTtcbiAgdXBkYXRlR3JhcGgoKTtcbn1cblxuZnVuY3Rpb24gYWlyaW5nVXBkYXRlZChuZXdBaXJpbmcpIHtcbiAgYWlyaW5nID0gbmV3QWlyaW5nO1xuICBjYWxjdWxhdGVVc2VkUSgpXG4gIHVwZGF0ZUdyYXBoKCk7XG59XG5cbmZ1bmN0aW9uIHBlb3BsZVVwZGF0ZWQobmV3UGVvcGxlKSB7XG4gIHBlb3BsZSA9IG5ld1Blb3BsZTtcbiAgY2FsY3VsYXRlVXNlZFEoKVxuICBjYWxjdWxhdGVNYXhRKClcbiAgdXBkYXRlR3JhcGgoKTtcbn1cblxuZnVuY3Rpb24gdmlzdHlwZVVwZGF0ZWQobmV3VmlzVHlwZSkge1xuICB2aXN0eXBlID0gbmV3VmlzVHlwZTtcbiAgdXBkYXRlR3JhcGgoKTtcbn1cblxuLy8gdXNlZFEgdXBkYXRlZCBieSBtYW51YWwgdXNlciBpbnB1dFxuZnVuY3Rpb24gdXNlZFFVcGRhdGVkKG5ld1VzZWRRKSB7XG4gIHVzZWRRID0gbmV3VXNlZFE7XG4gIHVwZGF0ZUdyYXBoKCk7XG59XG5cbi8vIHJlY2FsY3VsYXRlIHVzZWRRIGJhc2VkIG9uIGFpcmluZyBhbmQgcGVvcGxlXG5mdW5jdGlvbiBjYWxjdWxhdGVVc2VkUSgpIHtcbiAgdXNlZFEgPSBmX1EoYWlyaW5nKSAqIHBlb3BsZTtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1c2VkUVwiKS52YWx1ZSA9IHVzZWRRXG59XG5cbi8vIG1heFEgdXBkYXRlZCBieSBtYW51YWwgdXNlciBpbnB1dFxuZnVuY3Rpb24gbWF4UVVwZGF0ZWQobmV3TWF4USkge1xuICBtYXhRID0gbmV3TWF4UVxuICB1cGRhdGVHcmFwaCgpXG59XG5cbi8vIHJlY2FsY3VsYXRlIG1heFEgYmFzZWQgb24gcGVvcGxlIGFuZCB2ZXJ5X2dvb2QgYWlyaW5nXG5mdW5jdGlvbiBjYWxjdWxhdGVNYXhRKCkge1xuICBtYXhRID0gZl9RKFwidmVyeV9nb29kXCIpICogcGVvcGxlXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWF4UVwiKS52YWx1ZSA9IG1heFFcbn1cblxuZnVuY3Rpb24gdXBkYXRlR3JhcGgoKSB7XG4gIGNvbnNvbGUubG9nKFwiVGhlIGdyYXBoIG11c3QgYmUgdXBkYXRlZCFcIik7XG4gIGNvbnNvbGUubG9nKGBWb2x1bWU6ICR7dm9sdW1lfSwgYWN0aXZpdHk6ICR7YWN0aXZpdHl9LCBhaXJpbmc6ICR7YWlyaW5nfWApO1xuXG4gIGlmIChtb2RlID09PSBcInNpbXBsZVwiKSB7XG4gICAgZGF0YSA9IGRhdGFGU2ltcGxlKHZvbHVtZSwgYWN0aXZpdHksIHVzZWRRLCBwZW9wbGUpXG5cbiAgICBkcmF3U2ltcGxlUGxvdChkYXRhKVxuICB9IGVsc2UgaWYgKG1vZGUgPT09IFwiZXhwZXJ0XCIpIHtcbiAgICBkYXRhID0gZGF0YUYodm9sdW1lLCBhY3Rpdml0eSwgbWF4USk7XG5cbiAgICAvLyBpZiAodmlzdHlwZSA9PT0gXCJzdXJmYWNlXCIpIHtcbiAgICAvLyAgIGRyYXdTdXJmYWNlUGxvdChkYXRhKTtcbiAgICAvLyB9IGVsc2Uge1xuICAgIC8vICAgZHJhd0NvbnRvdXJQbG90KGRhdGEpO1xuICAgIC8vIH1cblxuICAgIGRyYXdDb250b3VyUGxvdChkYXRhKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBkcmF3U2ltcGxlUGxvdChkYXRhKSB7XG4gIGRhdGFbMF0ubW9kZSA9IFwibGluZXNcIjtcbiAgZGF0YVswXS5uYW1lID0gXCJQSVJBIChpbiAlKVwiXG4gIGRhdGFbMF0ueWF4aXMgPSBcInlcIlxuXG4gIGRhdGFbMV0udHlwZSA9IFwiYmFyXCI7XG4gIGRhdGFbMV0ueWF4aXMgPSBcInkyXCI7XG4gIGRhdGFbMV0ubmFtZSA9IFwiUG90ZW50aWVsbCBBbmdlc3RlY2t0ZVwiXG5cbiAgY29uc29sZS5sb2coZGF0YSlcblxuICB2YXIgbGF5b3V0ID0ge1xuICAgIHNoYXJlWDogdHJ1ZSxcbiAgICB4YXhpczoge1xuICAgICAgICB0aXRsZToge1xuICAgICAgICAgIHRleHQ6IFwiWmVpdCBpbiBTdHVuZGVuXCIsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIHlheGlzOiB7XG4gICAgICB0aXRsZTogJ1BJUkEgKGluICUpJyxcbiAgICAgIG92ZXJsYXlpbmc6ICd5MicsXG4gICAgICB0aWNrdmFsczogWzEwLCAyMCwgMzAsIDQwLCA1MCwgNjAsIDcwLCA4MCwgOTAsIDEwMF0sXG4gICAgICByYW5nZTogWzAsIDEwMF1cbiAgICB9LFxuICAgIHlheGlzMjoge1xuICAgICAgdGlja21vZGU6IFwiYXV0b1wiLFxuICAgICAgdGl0bGU6ICdBbnphaGwgc2ljaCBwb3RlbnRpZWxsIGFuZ2VzdGVja3RlciBQZXJzb25lbiAoZ2VydW5kZXQpJyxcbiAgICAgIHNpZGU6ICdyaWdodCcsXG4gICAgICByYW5nZTogWzAsIHBlb3BsZSAtIDFdIC8vIHRoZSBpbmZlY3RlZCBwZXJzb24gY2FuIG5vdCBiZSBpbmZlY3RlZCBhZ2FpblxuICAgIH0sXG4gICAgbGVnZW5kOiB7XG4gICAgICAgIHk6IDEsXG4gICAgICAgIHg6IDAsXG4gICAgICB9XG4gIH07XG5cbiAgUGxvdGx5Lm5ld1Bsb3QoY2hhcnREaXYsIGRhdGEsIGxheW91dCwgeyByZXNwb25zaXZlOiB0cnVlIH0pO1xufVxuXG5mdW5jdGlvbiBkcmF3U3VyZmFjZVBsb3QoZGF0YSkge1xuICBkYXRhLnR5cGUgPSBcInN1cmZhY2VcIjtcbiAgZGF0YS5jb250b3VycyA9IHtcbiAgICB6OiB7XG4gICAgICBzaG93OiB0cnVlLFxuICAgICAgdXNlY29sb3JtYXA6IHRydWUsXG4gICAgICBoaWdobGlnaHRjb2xvcjogXCIjNDJmNDYyXCIsXG4gICAgICBwcm9qZWN0OiB7IHo6IHRydWUgfSxcbiAgICB9LFxuICB9O1xuICBjb25zdCBsYXlvdXQgPSB7XG4gICAgeGF4aXM6IHtcbiAgICAgIHRpdGxlOiB7XG4gICAgICAgIHRleHQ6IFwiWmVpdCBpbiBTdHVuZGVuXCIsXG4gICAgICB9LFxuICAgIH0sXG4gICAgeWF4aXM6IHtcbiAgICAgIHRpdGxlOiB7XG4gICAgICAgIHRleHQ6IFwiRnJpc2NobHVmdG1lbmdlIGluIG1eMy9oXCIsXG4gICAgICB9LFxuICAgIH0sXG4gIH07XG5cbiAgY29uc29sZS5sb2coZGF0YSk7XG4gIFBsb3RseS5uZXdQbG90KGNoYXJ0RGl2LCBbZGF0YV0sIGxheW91dCwgeyByZXNwb25zaXZlOiB0cnVlIH0pO1xufVxuXG5mdW5jdGlvbiBkcmF3Q29udG91clBsb3QoZGF0YSkge1xuICBkYXRhLnR5cGUgPSBcImNvbnRvdXJcIjtcblxuICBkYXRhLmNvbG9yYmFyID0ge1xuICAgIHRpdGxlOiBcIlBJUkFcIixcbiAgICB0aWNrc3VmZml4OiBcIiVcIixcbiAgfTtcblxuICBkYXRhLmhvdmVydGVtcGxhdGUgPSBcIlBJUkE6ICV7ejouMmZ9JTxleHRyYT48L2V4dHJhPlwiO1xuXG4gIGNvbnN0IGxheW91dCA9IHtcbiAgICBzaG93YXhlc2xhYmVsczogdHJ1ZSxcbiAgICB4YXhpc190aXRsZTogXCJaZWl0IGluIFN0dW5kZW5cIixcbiAgICB4YXhpczoge1xuICAgICAgdGl0bGU6IHtcbiAgICAgICAgdGV4dDogXCJaZWl0IGluIFN0dW5kZW5cIixcbiAgICAgIH0sXG4gICAgfSxcbiAgICB5YXhpczoge1xuICAgICAgdGl0bGU6IHtcbiAgICAgICAgdGV4dDogXCJGcmlzY2hsdWZ0bWVuZ2UgaW4gbcKzL2hcIixcbiAgICAgIH0sXG4gICAgfSxcbiAgfTtcblxuICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgUGxvdGx5Lm5ld1Bsb3QoY2hhcnREaXYsIFtkYXRhXSwgbGF5b3V0LCB7IHJlc3BvbnNpdmU6IHRydWUgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBtb2RlVXBkYXRlZDogbW9kZVVwZGF0ZWQsXG4gIHZvbHVtZVVwZGF0ZWQ6IHZvbHVtZVVwZGF0ZWQsXG4gIGFjdGl2aXR5VXBkYXRlZDogYWN0aXZpdHlVcGRhdGVkLFxuICBhaXJpbmdVcGRhdGVkOiBhaXJpbmdVcGRhdGVkLFxuICB2aXN0eXBlVXBkYXRlZDogdmlzdHlwZVVwZGF0ZWQsXG4gIHBlb3BsZVVwZGF0ZWQ6IHBlb3BsZVVwZGF0ZWQsXG4gIHVzZWRRVXBkYXRlZDogdXNlZFFVcGRhdGVkLFxuICBtYXhRVXBkYXRlZDogbWF4UVVwZGF0ZWRcbn07XG4iLCJjb25zdCB2b2x1bWUgPSByZXF1aXJlKFwiLi92b2x1bWUuanNcIik7XG5jb25zdCBncmFwaCA9IHJlcXVpcmUoXCIuL2dyYXBoLmpzXCIpO1xuXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1vZGVcIikuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGZ1bmN0aW9uIChldmVudCkge1xuICAvLyBpZiBleHBlcnQsIGhpZGUgc2ltcGxlIGh0bWwgZWxlbWVudHNcbiAgaWYgKGV2ZW50LnRhcmdldC52YWx1ZSA9PSBcImV4cGVydFwiKSB7XG4gICAgc2ltcGVsRWxlbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwic2ltcGxlXCIpXG4gICAgZm9yIChlbCBvZiBzaW1wZWxFbGVtZW50cykge1xuICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCJcbiAgICB9XG4gICAgZXhwZXJ0RWxlbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZXhwZXJ0XCIpXG4gICAgZm9yIChlbCBvZiBleHBlcnRFbGVtZW50cykge1xuICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiXG4gICAgfVxuICB9IGVsc2UgaWYgKGV2ZW50LnRhcmdldC52YWx1ZSA9PSBcInNpbXBsZVwiKSB7XG4gICAgZXhwZXJ0RWxlbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwic2ltcGxlXCIpXG4gICAgZm9yIChlbCBvZiBleHBlcnRFbGVtZW50cykge1xuICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiXG4gICAgfVxuICAgIGV4cGVydEVsZW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImV4cGVydFwiKVxuICAgIGZvciAoZWwgb2YgZXhwZXJ0RWxlbWVudHMpIHtcbiAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiXG4gICAgfVxuICB9XG4gIGdyYXBoLm1vZGVVcGRhdGVkKGV2ZW50LnRhcmdldC52YWx1ZSlcbn0pO1xuXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFjdGl2aXR5XCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgZ3JhcGguYWN0aXZpdHlVcGRhdGVkKGV2ZW50LnRhcmdldC52YWx1ZSk7XG59KTtcblxuLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aXN0eXBlXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbi8vICAgZ3JhcGgudmlzdHlwZVVwZGF0ZWQoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbi8vIH0pO1xuXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBlb3BsZVwiKS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LnRhcmdldC52YWx1ZSAhPSBcIlwiKSB7XG4gICAgICAgIGFtb3VudCA9IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgICAgICAgaWYgKDEgPiBhbW91bnQgfHwgYW1vdW50ID4gMTAwKSB7XG4gICAgICAgICAgICBhbW91bnQgPSAzXG4gICAgICAgICAgICBldmVudC50YXJnZXQudmFsdWUgPSBhbW91bnRcbiAgICAgICAgfVxuICAgICAgICBncmFwaC5wZW9wbGVVcGRhdGVkKGFtb3VudCk7XG4gICAgfVxufSk7XG5cbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWlyaW5nXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBncmFwaC5haXJpbmdVcGRhdGVkKGV2ZW50LnRhcmdldC52YWx1ZSlcbn0pO1xuXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVzZWRRXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0LnZhbHVlIDwgMSkge1xuICAgICAgICBldmVudC50YXJnZXQudmFsdWUgPSAxXG4gICAgfSBlbHNlIGlmIChldmVudC50YXJnZXQudmFsdWUgPiA2MDAwKSB7XG4gICAgICAgIGV2ZW50LnRhcmdldC52YWx1ZSA9IDYwMDBcbiAgICB9XG4gICAgZ3JhcGgudXNlZFFVcGRhdGVkKGV2ZW50LnRhcmdldC52YWx1ZSlcbn0pO1xuXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1heFFcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmdW5jdGlvbihldmVudCkge1xuICAgIGlmIChldmVudC50YXJnZXQudmFsdWUgPCAxMDApIHtcbiAgICAgICAgZXZlbnQudGFyZ2V0LnZhbHVlID0gMTAwXG4gICAgfSBlbHNlIGlmIChldmVudC50YXJnZXQudmFsdWUgPiA2MDAwKSB7XG4gICAgICAgIGV2ZW50LnRhcmdldC52YWx1ZSA9IDYwMDBcbiAgICB9XG4gICAgZ3JhcGgubWF4UVVwZGF0ZWQoZXZlbnQudGFyZ2V0LnZhbHVlKVxufSk7IiwiY29uc3QgZ3JhcGggPSByZXF1aXJlKFwiLi9ncmFwaC5qc1wiKTtcblxuZnVuY3Rpb24gSW5wdXRFbGVtZW50KGVsZW1lbnQsIGRhdGEpIHtcbiAgdGhpcy5kYXRhID0gZGF0YTtcbiAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgZWxlbWVudC52YWx1ZSA9IGRhdGE7XG4gIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCB0aGlzLCBmYWxzZSk7XG59XG5cbi8qKlxuICogQ2FsbGVkIHdoZW4gdGhlIGlucHV0IGVsZW1lbnQgaXMgdXBkYXRlZCwgZS5nLiwgYnkgdXNpbmcgYXJyb3dzIHdoZW4gdHlwZT1udW1iZXIgb3IgYnkgcHJlc3NpbmcgZW50ZXJcbiAqL1xuSW5wdXRFbGVtZW50LnByb3RvdHlwZS5oYW5kbGVFdmVudCA9IGZ1bmN0aW9uIChldmVudCkge1xuICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcbiAgICBjYXNlIFwiY2hhbmdlXCI6XG4gICAgICB0aGlzLmNoYW5nZSh0aGlzLmVsZW1lbnQudmFsdWUpO1xuICAgICAgdXBkYXRlVm9sdW1lKCk7XG4gIH1cbn07XG5cbi8qKlxuICogVXBkYXRlIHRoZSBlbGVtZW50OyB0aGlzIG1ldGhvZCB1cGRhdGVzIHRoZSBET00gcmVwcmVzZW50YXRpb24gYW5kIHRoZSBpbnRlcm5hbCByZXByZXNlbnRhdGlvblxuICovXG5JbnB1dEVsZW1lbnQucHJvdG90eXBlLmNoYW5nZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICB0aGlzLmRhdGEgPSB2YWx1ZTtcbiAgdGhpcy5lbGVtZW50LnZhbHVlID0gdmFsdWU7XG59O1xuXG5mdW5jdGlvbiB1cGRhdGVWb2x1bWUoKSB7XG4gIGlmIChsZW5ndGhFbGVtZW50LmRhdGEgPiAxMCkge1xuICAgIGxlbmd0aEVsZW1lbnQuY2hhbmdlKDEwKVxuICB9XG4gIGlmIChsZW5ndGhFbGVtZW50LmRhdGEgPCAxKSB7XG4gICAgbGVuZ3RoRWxlbWVudC5jaGFuZ2UoMSlcbiAgfVxuXG4gIGlmICh3aWR0aEVsZW1lbnQuZGF0YSA+IDEwKSB7XG4gICAgbGVuZ3RoRWxlbWVudC5jaGFuZ2UoMTApXG4gIH1cbiAgaWYgKHdpZHRoRWxlbWVudC5kYXRhIDwgMSkge1xuICAgIGxlbmd0aEVsZW1lbnQuY2hhbmdlKDEpXG4gIH1cblxuICBpZiAoaGVpZ2h0RWxlbWVudC5kYXRhID4gNSkge1xuICAgIGxlbmd0aEVsZW1lbnQuY2hhbmdlKDUpXG4gIH1cbiAgaWYgKGhlaWdodEVsZW1lbnQuZGF0YSA8IDEpIHtcbiAgICBsZW5ndGhFbGVtZW50LmNoYW5nZSgxKVxuICB9XG5cbiAgY29uc3Qgdm9sdW1lID0gbGVuZ3RoRWxlbWVudC5kYXRhICogd2lkdGhFbGVtZW50LmRhdGEgKiBoZWlnaHRFbGVtZW50LmRhdGE7XG4gIGNvbnNvbGUubG9nKHZvbHVtZSk7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidm9sdW1lXCIpLnZhbHVlID0gdm9sdW1lO1xuICBncmFwaC52b2x1bWVVcGRhdGVkKHZvbHVtZSk7XG4gIHJldHVybiB2b2x1bWU7XG59XG5cbi8vIGl0IGlzIHBvc3NpYmxlIHRvIHVwZGF0ZSB0aGVzZSBlbGVtZW50cywgZS5nLiwgd2l0aCBsZW5ndGhFbGVtZW50LmNoYW5nZSgxMClcbnZhciBsZW5ndGhFbGVtZW50ID0gbmV3IElucHV0RWxlbWVudChcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsZW5ndGhcIiksXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGVuZ3RoXCIpLnZhbHVlXG4pO1xudmFyIHdpZHRoRWxlbWVudCA9IG5ldyBJbnB1dEVsZW1lbnQoXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwid2lkdGhcIiksXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwid2lkdGhcIikudmFsdWVcbik7XG52YXIgaGVpZ2h0RWxlbWVudCA9IG5ldyBJbnB1dEVsZW1lbnQoXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaGVpZ2h0XCIpLFxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImhlaWdodFwiKS52YWx1ZVxuKTtcbnVwZGF0ZVZvbHVtZSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZ2V0OiB1cGRhdGVWb2x1bWUsXG4gIGluaXQ6IHVwZGF0ZVZvbHVtZSxcbn07XG4iXSwic291cmNlUm9vdCI6IiJ9