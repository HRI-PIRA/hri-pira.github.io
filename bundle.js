!function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){const n={low_activity_lying:.45,low_activity:.54,singing:.65,mid_activity:.9,sports:1.2,test_1:.54,test_2:.65};function a(e){return"singing"==e?3500:"test_2"==e?2500:100}function o(e){const t=2.7618*(Math.exp(1.1761*3.35)-1),o=a("low_activity");return t*(a(e)/o)*(n[e]/n.low_activity)}function l(e,t,n,a){let o=390625*t+225625;return o*=Math.exp(t*a),o-=225625,o*=Math.exp(-t*a-.5776*a),o=390625*t-o,o*=e,o/(n*(225625*t+130321))}function i(e,t,a,i){0==t&&(t+=.01),console.log(`Calculating pira for: t=${e}, Q=${t}, activity=${a}, V=${i}`);const u=function(e,t){return e/t}(i,t),r=o(a),d=function(e,t){return e*Math.exp(-.5776*t)}(r,u),c=function(e,t){return t/e}(i,t);if(e>u){const o=l(r,c,t,u),i=function(e,t,n,a,o){return e*Math.exp(-t*(o+n))*(t*(o-n)*Math.exp(t*(o+n))-Math.exp(t*o)+Math.exp(t*n))/(a*t)}(d,c,u,t,e);return 1-Math.exp(-(o+i)*n[a])}{const o=l(r,c,t,e);return 1-Math.exp(-o*n[a])}}e.exports={prepareData:function(e,t,n,a){const o=e;let l=[],u=[],r=[],d=3e3;150*a>d&&(d=150*a);for(let e=50;e<=d;e+=50){l=[];let n=[];for(let a=0;a<=6;a+=.1)p=i(a,e,t,o),p=Math.round(1e4*p)/100,n.push(p),l.push(a);u.push(e),r.push(n)}return{test:l,x:l,y:u,z:r}},prepareDataSimple:function(e,t,n,a){const o=e;console.log("Total airflow for all people in the room is (Q) is "+n);let l=[],u=[],r=[],d=[];for(let e=0;e<=6;e+=1){p=i(e,n,t,o),p=Math.round(1e4*p)/100,u.push(p),l.push(e),r.push(e),d.push(Math.round(p*a/100));for(let a=.1;a<1;a+=.1)p=i(e+a,n,t,o),p=Math.round(1e4*p)/100,u.push(p),l.push(e+a)}return[{x:l,y:u},{x:r,y:d}]},pira:i,f_qa:o,f_Q:function(e){return"very_bad"==e?10:"bad"==e?20:"ok"==e?30:"good"==e?40:"very_good"==e?60:void 0}}},function(e,t,n){const a=n(0).prepareData,o=n(0).prepareDataSimple,l=n(0).f_Q;var i=document.getElementById("volume").value,u=document.getElementById("activity").value,r=document.getElementById("mode").value,d=document.getElementById("airing").value,c=document.getElementById("people").value,s=-1;m();const p=document.getElementById("chart");function m(){s=l(d)*c,document.getElementById("usedQ").value=s}function f(){console.log("The graph must be updated!"),console.log(`Volume: ${i}, activity: ${u}, airing: ${d}`),"simple"===r?(data=o(i,u,s,c),function(e){e[0].mode="lines",e[0].name="PIRA (in %)",e[0].yaxis="y",e[1].type="bar",e[1].yaxis="y2",e[1].name="Potentiell Angesteckte",console.log(e);var t={shareX:!0,xaxis:{title:{text:"Zeit in Stunden"}},yaxis:{title:"PIRA (in %)",overlaying:"y2",tickvals:[10,20,30,40,50,60,70,80,90,100],range:[0,100]},yaxis2:{tickmode:"auto",title:"Anzahl sich potentiell angesteckter Personen (gerundet)",side:"right",range:[0,c]},legend:{y:1,x:0}};Plotly.newPlot(p,e,t,{responsive:!0})}(data)):"expert"===r&&(data=a(i,u,d,c),function(e){e.type="contour",e.colorbar={title:"PIRA",ticksuffix:"%"},e.hovertemplate="PIRA: %{z:.2f}%<extra></extra>";console.log(e),Plotly.newPlot(p,[e],{showaxeslabels:!0,xaxis_title:"Zeit in Stunden",xaxis:{title:{text:"Zeit in Stunden"}},yaxis:{title:{text:"Volumenstrom in mÂ³/h"}}},{responsive:!0})}(data))}e.exports={modeUpdated:function(e){r=e,f()},volumeUpdated:function(e){i=e,f()},activityUpdated:function(e){u=e,f()},airingUpdated:function(e){d=e,m(),f()},vistypeUpdated:function(e){vistype=e,f()},peopleUpdated:function(e){c=e,m(),f()},usedQUpdated:function(e){s=e,f()}}},function(e,t,n){n(3);const a=n(1);document.getElementById("mode").addEventListener("input",(function(e){if("expert"==e.target.value){for(el of(simpelElements=document.getElementsByClassName("simple"),simpelElements))el.style.display="none";for(el of(expertElements=document.getElementsByClassName("expert"),expertElements))el.style.display="block"}else if("simple"==e.target.value){for(el of(expertElements=document.getElementsByClassName("simple"),expertElements))el.style.display="block";for(el of(expertElements=document.getElementsByClassName("expert"),expertElements))el.style.display="none"}a.modeUpdated(e.target.value)})),document.getElementById("activity").addEventListener("input",(function(e){a.activityUpdated(e.target.value)})),document.getElementById("people").addEventListener("input",(function(e){""!=e.target.value&&(amount=e.target.value,(1>amount||amount>100)&&(amount=3,e.target.value=amount),a.peopleUpdated(amount))})),document.getElementById("airing").addEventListener("change",(function(e){a.airingUpdated(e.target.value)})),document.getElementById("usedQ").addEventListener("change",(function(e){a.usedQUpdated(e.target.value)}))},function(e,t,n){const a=n(1);function o(e,t){this.data=t,this.element=e,e.value=t,e.addEventListener("change",this,!1)}function l(){i.data>10&&i.change(10),i.data<1&&i.change(1),u.data>10&&i.change(10),u.data<1&&i.change(1),r.data>5&&i.change(5),r.data<1&&i.change(1);const e=i.data*u.data*r.data;return console.log(e),document.getElementById("volume").value=e,a.volumeUpdated(e),e}o.prototype.handleEvent=function(e){switch(e.type){case"change":this.change(this.element.value),l()}},o.prototype.change=function(e){this.data=e,this.element.value=e};var i=new o(document.getElementById("length"),document.getElementById("length").value),u=new o(document.getElementById("width"),document.getElementById("width").value),r=new o(document.getElementById("height"),document.getElementById("height").value);l(),e.exports={get:l,init:l}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RhdGEuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyYXBoLmpzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdm9sdW1lLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiUWIiLCJsb3dfYWN0aXZpdHlfbHlpbmciLCJsb3dfYWN0aXZpdHkiLCJzaW5naW5nIiwibWlkX2FjdGl2aXR5Iiwic3BvcnRzIiwidGVzdF8xIiwidGVzdF8yIiwiZl9FIiwiYWN0aXZpdHkiLCJmX3FhIiwicV8wIiwiTWF0aCIsImV4cCIsIkVfMCIsImZfQyIsInFhIiwiQUNIIiwiUSIsInBpcmEiLCJWIiwiY29uc29sZSIsImxvZyIsInRhdSIsImZfdGF1IiwicWF0YXUiLCJmX3FhdGF1IiwiZl9BQ0giLCJDIiwiQ3RhdSIsImZfQ3RhdSIsInByZXBhcmVEYXRhIiwidm9sdW1lIiwiYWlyIiwicGVvcGxlIiwieEEiLCJ5QSIsInJvd3MiLCJtYXgiLCJyb3ciLCJyb3VuZCIsInB1c2giLCJ0ZXN0IiwieCIsInkiLCJ6IiwicHJlcGFyZURhdGFTaW1wbGUiLCJ4MiIsInkyIiwic3QiLCJmX1EiLCJhaXJpbmciLCJkYXRhRiIsImRhdGFGU2ltcGxlIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInVzZWRRIiwiY2FsY3VsYXRlVXNlZFEiLCJjaGFydERpdiIsInVwZGF0ZUdyYXBoIiwiZGF0YSIsInlheGlzIiwidHlwZSIsImxheW91dCIsInNoYXJlWCIsInhheGlzIiwidGl0bGUiLCJ0ZXh0Iiwib3ZlcmxheWluZyIsInRpY2t2YWxzIiwicmFuZ2UiLCJ5YXhpczIiLCJ0aWNrbW9kZSIsInNpZGUiLCJsZWdlbmQiLCJQbG90bHkiLCJuZXdQbG90IiwicmVzcG9uc2l2ZSIsImRyYXdTaW1wbGVQbG90IiwiY29sb3JiYXIiLCJ0aWNrc3VmZml4IiwiaG92ZXJ0ZW1wbGF0ZSIsInNob3dheGVzbGFiZWxzIiwieGF4aXNfdGl0bGUiLCJkcmF3Q29udG91clBsb3QiLCJtb2RlVXBkYXRlZCIsIm5ld01vZGUiLCJ2b2x1bWVVcGRhdGVkIiwibmV3Vm9sdW1lIiwiYWN0aXZpdHlVcGRhdGVkIiwibmV3QWN0aXZpdHkiLCJhaXJpbmdVcGRhdGVkIiwibmV3QWlyaW5nIiwidmlzdHlwZVVwZGF0ZWQiLCJuZXdWaXNUeXBlIiwidmlzdHlwZSIsInBlb3BsZVVwZGF0ZWQiLCJuZXdQZW9wbGUiLCJ1c2VkUVVwZGF0ZWQiLCJuZXdVc2VkUSIsImdyYXBoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwidGFyZ2V0IiwiZWwiLCJzaW1wZWxFbGVtZW50cyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJzdHlsZSIsImRpc3BsYXkiLCJleHBlcnRFbGVtZW50cyIsImFtb3VudCIsIklucHV0RWxlbWVudCIsImVsZW1lbnQiLCJ0aGlzIiwidXBkYXRlVm9sdW1lIiwibGVuZ3RoRWxlbWVudCIsImNoYW5nZSIsIndpZHRoRWxlbWVudCIsImhlaWdodEVsZW1lbnQiLCJoYW5kbGVFdmVudCIsImluaXQiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUs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LElBQUtxSSxFQUNMTSxLQUFNTiIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMik7XG4iLCJjb25zdCBRYiA9IHtcbiAgbG93X2FjdGl2aXR5X2x5aW5nOiAwLjQ1LFxuICBsb3dfYWN0aXZpdHk6IDAuNTQsXG4gIHNpbmdpbmc6IDAuNjUsXG4gIG1pZF9hY3Rpdml0eTogMC45LFxuICBzcG9ydHM6IDEuMixcbiAgdGVzdF8xOiAwLjU0LCAvLyB2YWx1ZSB1c2VkIGluIHRlc3RfZGF0YS9QSVJfTW9kZWxsLmpwZ1xuICB0ZXN0XzI6IDAuNjUsIC8vIHZhbHVlIHVzZWQgaW4gdGVzdF9kYXRhL1BJUl9Nb2RlbGxfYWt0LmpwZyBhcyBpbnN0cnVjdGVkIGJ5IG1haWxcbn07XG5cbmZ1bmN0aW9uIGZfdGF1KFYsIFEpIHtcbiAgcmV0dXJuIFYgLyBRO1xufVxuXG5mdW5jdGlvbiBmX0UoYWN0aXZpdHkpIHtcbiAgaWYgKGFjdGl2aXR5ID09IFwic2luZ2luZ1wiKSB7XG4gICAgcmV0dXJuIDM1MDA7XG4gIH0gZWxzZSBpZiAoYWN0aXZpdHkgPT1cInRlc3RfMlwiKSB7XG4gICAgcmV0dXJuIDI1MDA7IC8vIHZhbHVlIHJlY2VpdmVkIHZpYSBtYWlsIGZyb20ga3JpZWdlbFxuICB9IGVsc2UgcmV0dXJuIDEwMDtcbn1cblxuZnVuY3Rpb24gZl9RKGFpcmluZykge1xuICBpZiAoYWlyaW5nID09IFwidmVyeV9iYWRcIikge1xuICAgIHJldHVybiAxMDtcbiAgfSBlbHNlIGlmIChhaXJpbmcgPT0gXCJiYWRcIikge1xuICAgIHJldHVybiAyMDtcbiAgfSBlbHNlIGlmIChhaXJpbmcgPT0gXCJva1wiKSB7XG4gICAgcmV0dXJuIDMwO1xuICB9IGVsc2UgaWYgKGFpcmluZyA9PSBcImdvb2RcIikge1xuICAgIHJldHVybiA0MDtcbiAgfSBlbHNlIGlmIChhaXJpbmcgPT0gXCJ2ZXJ5X2dvb2RcIikge1xuICAgIHJldHVybiA2MDtcbiAgfVxufVxuXG5mdW5jdGlvbiBmX3FhKGFjdGl2aXR5KSB7XG4gIGNvbnN0IFJfMCA9IDMuMzU7XG4gIGNvbnN0IHFfMCA9IDIuNzYxOCAqIChNYXRoLmV4cCgxLjE3NjEgKiBSXzApIC0gMSk7XG5cbiAgY29uc3QgRV8wID0gZl9FKFwibG93X2FjdGl2aXR5XCIpO1xuICBjb25zdCBFID0gZl9FKGFjdGl2aXR5KTtcblxuICByZXR1cm4gcV8wICogKEUgLyBFXzApICogKFFiW2FjdGl2aXR5XSAvIFFiLmxvd19hY3Rpdml0eSk7XG59XG5cbmZ1bmN0aW9uIGZfcWF0YXUocWEsIHRhdSkge1xuICByZXR1cm4gcWEgKiBNYXRoLmV4cCgtMC41Nzc2ICogdGF1KTtcbn1cblxuZnVuY3Rpb24gZl9BQ0goViwgUSkge1xuICByZXR1cm4gUSAvIFY7XG59XG5cbmZ1bmN0aW9uIGZfQyhxYSwgQUNILCBRLCB0KSB7XG4gIC8vIG51bWVyYXRvclxuXG4gIGxldCBuID0gMzkwNjI1ICogQUNIICsgMjI1NjI1O1xuICAvLyBjb25zb2xlLmxvZyhuKTtcbiAgbiA9IG4gKiBNYXRoLmV4cChBQ0ggKiB0KTtcbiAgLy8gY29uc29sZS5sb2cobik7XG4gIG4gPSBuIC0gMjI1NjI1O1xuICAvLyBjb25zb2xlLmxvZyhuKTtcbiAgbiA9IG4gKiBNYXRoLmV4cCgtQUNIICogdCAtICgzNjEgLyA2MjUpICogdCk7XG4gIC8vIGNvbnNvbGUubG9nKG4pO1xuICBuID0gMzkwNjI1ICogQUNIIC0gbjtcbiAgLy8gY29uc29sZS5sb2cobik7XG4gIG4gPSBxYSAqIG47XG5cbiAgLy8gY29uc29sZS5sb2cobik7XG4gIC8vIGNvbnNvbGUubG9nKHFhKTtcbiAgLy8gY29uc29sZS5sb2coQUNIKTtcbiAgLy8gY29uc29sZS5sb2coUSk7XG4gIC8vIGNvbnNvbGUubG9nKFwidDogXCIgKyB0KTtcblxuICAvLyBjb25zb2xlLmxvZyhuKTtcbiAgLy8gZGVub21pbmF0b3JcbiAgbGV0IGQgPSBRICogKDIyNTYyNSAqIEFDSCArIDEzMDMyMSk7XG4gIC8vIGNvbnNvbGUubG9nKGQpO1xuXG4gIHJldHVybiBuIC8gZDtcbn1cblxuZnVuY3Rpb24gZl9DdGF1KHFhdGF1LCBBQ0gsIHRhdSwgUSwgdCkge1xuICAvLyBudW1lcmF0b3JcbiAgbGV0IG4gPVxuICAgIHFhdGF1ICpcbiAgICBNYXRoLmV4cCgtQUNIICogKHQgKyB0YXUpKSAqXG4gICAgKEFDSCAqICh0IC0gdGF1KSAqIE1hdGguZXhwKEFDSCAqICh0ICsgdGF1KSkgLVxuICAgICAgTWF0aC5leHAoQUNIICogdCkgK1xuICAgICAgTWF0aC5leHAoQUNIICogdGF1KSk7XG5cbiAgLy8gZGVub21pbmF0b3JcbiAgbGV0IGQgPSBRICogQUNIO1xuXG4gIHJldHVybiBuIC8gZDtcbn1cblxuZnVuY3Rpb24gcGlyYSh0LCBRLCBhY3Rpdml0eSwgVikge1xuICBpZiAoUSA9PSAwKSBRICs9IDAuMDE7XG4gIGNvbnNvbGUubG9nKGBDYWxjdWxhdGluZyBwaXJhIGZvcjogdD0ke3R9LCBRPSR7UX0sIGFjdGl2aXR5PSR7YWN0aXZpdHl9LCBWPSR7Vn1gKTtcbiAgY29uc3QgdGF1ID0gZl90YXUoViwgUSk7XG4gIC8vIGNvbnNvbGUubG9nKFwidGF1OiBcIiArIHRhdSk7XG4gIGNvbnN0IHFhID0gZl9xYShhY3Rpdml0eSk7XG4gIC8vIGNvbnNvbGUubG9nKFwicWE6IFwiICsgcWEpO1xuICBjb25zdCBxYXRhdSA9IGZfcWF0YXUocWEsIHRhdSk7XG4gIC8vIGNvbnNvbGUubG9nKFwicWF0YXU6IFwiICsgcWF0YXUpO1xuICBjb25zdCBBQ0ggPSBmX0FDSChWLCBRKTtcbiAgLy8gY29uc29sZS5sb2coXCJBQ0g6IFwiICsgQUNIKTtcbiAgLy8gY29uc29sZS5sb2coXCJRYjogXCIgKyBRYlthY3Rpdml0eV0pO1xuXG4gIGlmICh0ID4gdGF1KSB7XG4gICAgY29uc3QgQyA9IGZfQyhxYSwgQUNILCBRLCB0YXUpO1xuICAgIC8vIGNvbnNvbGUubG9nKEMpO1xuICAgIGNvbnN0IEN0YXUgPSBmX0N0YXUocWF0YXUsIEFDSCwgdGF1LCBRLCB0KTtcbiAgICAvLyBjb25zb2xlLmxvZyhDdGF1KTtcbiAgICByZXR1cm4gMSAtIE1hdGguZXhwKC0oQyArIEN0YXUpICogUWJbYWN0aXZpdHldKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBDID0gZl9DKHFhLCBBQ0gsIFEsIHQpO1xuICAgIC8vIGNvbnNvbGUubG9nKEMpO1xuICAgIHJldHVybiAxIC0gTWF0aC5leHAoLUMgKiBRYlthY3Rpdml0eV0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHByZXBhcmVEYXRhKHZvbHVtZSwgYWN0aXZpdHksIGFpciwgcGVvcGxlKSB7XG4gIGNvbnN0IFYgPSB2b2x1bWU7XG5cbiAgbGV0IHhBID0gW107XG4gIGxldCB5QSA9IFtdO1xuICBsZXQgcm93cyA9IFtdO1xuXG4gIGxldCBtaW4gPSA1MFxuICBsZXQgbWF4ID0gMzAwMFxuICBcbiAgaWYgKDE1MCAqIHBlb3BsZSA+IG1heCkge1xuICAgICAgbWF4ID0gMTUwICogcGVvcGxlXG4gIH1cblxuICBmb3IgKGxldCBRID0gbWluOyBRIDw9IG1heDsgUSArPSA1MCkge1xuICAgIHhBID0gW107XG4gICAgbGV0IHJvdyA9IFtdO1xuXG4gICAgZm9yIChsZXQgdCA9IDAuMDsgdCA8PSA2LjA7IHQgKz0gMC4xKSB7XG4gICAgICAvLyBob3VycywrIGluY3JlbWVudHMgaW4gaG91cnNcbiAgICAgIHAgPSBwaXJhKHQsIFEsIGFjdGl2aXR5LCBWKTtcbiAgICAgIC8vY29uc29sZS5sb2coXCJQaXJhIGZvciB0PVwiICsgdCArIFwiLCBRPVwiICsgUSArIFwiOiBcIiArIHApO1xuICAgICAgcCA9IE1hdGgucm91bmQocCAqIDEwMDAwKSAvIDEwMDtcbiAgICAgIC8vaWYgKHQgPT0gNiAmJiBRID09IDUwMCkgcCA9IDEwMDtcbiAgICAvLyAgIGlmIChpc05hTihwKSB8fCBwID49IDEwMCkge1xuICAgIC8vICAgICAgIHAgPSAwXG4gICAgLy8gICB9XG4gICAgICByb3cucHVzaChwKTtcbiAgICAgIHhBLnB1c2godCk7XG4gICAgfVxuICAgIHlBLnB1c2goUSk7XG4gICAgcm93cy5wdXNoKHJvdyk7XG4gIH1cblxuICAvLyBmb3IgKGxldCBtaW51dGUgPSAwOyBtaW51dGUgPD0gMzYwOyBtaW51dGUgKz0gMzApIHtcbiAgLy8gICAgIGxldCB0ID0gbWludXRlIC8gNjA7XG4gIC8vICAgICBsZXQgbSA9IG1pbnV0ZSAlIDYwO1xuICAvLyAgICAgbGV0IGggPSAobWludXRlIC0gbSkgLyA2MDtcbiAgLy8gICAgIGxldCB0aW1lID0gaCArIFwiOlwiICsgbSArIFwiaFwiO1xuICAvLyB9XG5cbiAgcmV0dXJuIHtcbiAgICB0ZXN0OiB4QSxcbiAgICB4OiB4QSxcbiAgICB5OiB5QSxcbiAgICB6OiByb3dzLFxuICB9O1xufVxuXG5mdW5jdGlvbiBwcmVwYXJlRGF0YVNpbXBsZSh2b2x1bWUsIGFjdGl2aXR5LCBRLCBwZW9wbGUpIHtcbiAgY29uc3QgViA9IHZvbHVtZTtcbiBcbiAgY29uc29sZS5sb2coYFRvdGFsIGFpcmZsb3cgZm9yIGFsbCBwZW9wbGUgaW4gdGhlIHJvb20gaXMgKFEpIGlzICR7UX1gKVxuXG4gIGxldCB4ID0gW107XG4gIGxldCB5ID0gW107IC8vIHBpcmFcbiAgbGV0IHgyID0gW107IC8vIG9ubHkgdGltZXN0YW1wcyBmb3IgdGhlIGZ1bGwgaG91clxuICBsZXQgeTIgPSBbXTsgLy8gaW5mZWN0ZWQgcGVvcGxlXG5cbiAgZm9yIChsZXQgdCA9IDA7IHQgPD0gNjsgdCArPSAxKSB7XG4gICAgcCA9IHBpcmEodCwgUSwgYWN0aXZpdHksIFYpO1xuICAgIHAgPSBNYXRoLnJvdW5kKHAgKiAxMDAwMCkgLyAxMDA7XG4gICAgeS5wdXNoKHApO1xuICAgIHgucHVzaCh0KTtcbiAgICB4Mi5wdXNoKHQpXG4gICAgeTIucHVzaChNYXRoLnJvdW5kKHAgKiBwZW9wbGUgLyAxMDApKTtcbiAgICAvLyBpbnRlcm1lZGlhdGUgc3RlcHMgZm9yIHBpcmEgb25seSwgbm90IGZvciBuby4gaW5mZWN0ZWQgcGVvcGxlXG4gICAgZm9yIChsZXQgc3QgPSAwLjE7IHN0IDwgMTsgc3QgKz0gMC4xKSB7XG4gICAgICAgIHAgPSBwaXJhKHQgKyBzdCwgUSwgYWN0aXZpdHksIFYpO1xuICAgICAgICBwID0gTWF0aC5yb3VuZChwICogMTAwMDApIC8gMTAwO1xuICAgICAgICB5LnB1c2gocCk7XG4gICAgICAgIHgucHVzaCh0ICsgc3QpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBbXG4gICAge1xuICAgICAgeDogeCxcbiAgICAgIHk6IHlcbiAgICB9LFxuICAgIHtcbiAgICAgIHg6IHgyLFxuICAgICAgeTogeTJcbiAgICB9XG4gIF07XG5cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgcHJlcGFyZURhdGE6IHByZXBhcmVEYXRhLFxuICAgIHByZXBhcmVEYXRhU2ltcGxlOiBwcmVwYXJlRGF0YVNpbXBsZSxcbiAgICBwaXJhOiBwaXJhLFxuICAgIGZfcWE6IGZfcWEsXG4gICAgZl9ROiBmX1Fcbn1cbiIsImNvbnN0IGRhdGFGID0gcmVxdWlyZShcIi4vZGF0YS5qc1wiKS5wcmVwYXJlRGF0YTtcbmNvbnN0IGRhdGFGU2ltcGxlID0gcmVxdWlyZShcIi4vZGF0YS5qc1wiKS5wcmVwYXJlRGF0YVNpbXBsZTtcbmNvbnN0IGZfUSA9IHJlcXVpcmUoXCIuL2RhdGEuanNcIikuZl9RO1xuLy8gY29uc3QgUGxvdGx5ID0gcmVxdWlyZShcInBsb3RseS5qcy1nbDNkLWRpc3QtbWluXCIpIC8vIG5vdCBpbnN0YWxsZWQgdmlhIG5wbSB0byByZWR1Y2UgYnVuZGxlIHNpemVcblxudmFyIHZvbHVtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidm9sdW1lXCIpLnZhbHVlO1xudmFyIGFjdGl2aXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhY3Rpdml0eVwiKS52YWx1ZTtcbi8vIHZhciB2aXN0eXBlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aXN0eXBlXCIpLnZhbHVlO1xudmFyIG1vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1vZGVcIikudmFsdWU7IC8vIHNpbXBsZSBvciBleHBlcnRcbnZhciBhaXJpbmcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFpcmluZ1wiKS52YWx1ZTsgLy8gaW4gdGhlIGZvcm11bGEsIHRoaXMgaXMgUVxudmFyIHBlb3BsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGVvcGxlXCIpLnZhbHVlO1xudmFyIHVzZWRRID0gLTE7XG5jYWxjdWxhdGVVc2VkUSgpO1xuXG5jb25zdCBjaGFydERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2hhcnRcIik7XG5cbmZ1bmN0aW9uIG1vZGVVcGRhdGVkKG5ld01vZGUpIHtcbiAgbW9kZSA9IG5ld01vZGU7XG4gIHVwZGF0ZUdyYXBoKCk7XG59XG5cbmZ1bmN0aW9uIHZvbHVtZVVwZGF0ZWQobmV3Vm9sdW1lKSB7XG4gIHZvbHVtZSA9IG5ld1ZvbHVtZTtcbiAgdXBkYXRlR3JhcGgoKTtcbn1cblxuZnVuY3Rpb24gYWN0aXZpdHlVcGRhdGVkKG5ld0FjdGl2aXR5KSB7XG4gIGFjdGl2aXR5ID0gbmV3QWN0aXZpdHk7XG4gIHVwZGF0ZUdyYXBoKCk7XG59XG5cbmZ1bmN0aW9uIGFpcmluZ1VwZGF0ZWQobmV3QWlyaW5nKSB7XG4gIGFpcmluZyA9IG5ld0FpcmluZztcbiAgY2FsY3VsYXRlVXNlZFEoKVxuICB1cGRhdGVHcmFwaCgpO1xufVxuXG5mdW5jdGlvbiBwZW9wbGVVcGRhdGVkKG5ld1Blb3BsZSkge1xuICBwZW9wbGUgPSBuZXdQZW9wbGU7XG4gIGNhbGN1bGF0ZVVzZWRRKClcbiAgdXBkYXRlR3JhcGgoKTtcbn1cblxuZnVuY3Rpb24gdmlzdHlwZVVwZGF0ZWQobmV3VmlzVHlwZSkge1xuICB2aXN0eXBlID0gbmV3VmlzVHlwZTtcbiAgdXBkYXRlR3JhcGgoKTtcbn1cblxuLy8gdXNlZFEgdXBkYXRlZCBieSBtYW51YWwgdXNlciBpbnB1dFxuZnVuY3Rpb24gdXNlZFFVcGRhdGVkKG5ld1VzZWRRKSB7XG4gIHVzZWRRID0gbmV3VXNlZFE7XG4gIHVwZGF0ZUdyYXBoKCk7XG59XG5cbi8vIHJlY2FsY3VsYXRlIHVzZWRRIGJhc2VkIG9uIGFpcmluZyBhbmQgcGVvcGxlXG5mdW5jdGlvbiBjYWxjdWxhdGVVc2VkUSgpIHtcbiAgdXNlZFEgPSBmX1EoYWlyaW5nKSAqIHBlb3BsZTtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1c2VkUVwiKS52YWx1ZSA9IHVzZWRRXG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUdyYXBoKCkge1xuICBjb25zb2xlLmxvZyhcIlRoZSBncmFwaCBtdXN0IGJlIHVwZGF0ZWQhXCIpO1xuICBjb25zb2xlLmxvZyhgVm9sdW1lOiAke3ZvbHVtZX0sIGFjdGl2aXR5OiAke2FjdGl2aXR5fSwgYWlyaW5nOiAke2FpcmluZ31gKTtcblxuICBpZiAobW9kZSA9PT0gXCJzaW1wbGVcIikge1xuICAgIGRhdGEgPSBkYXRhRlNpbXBsZSh2b2x1bWUsIGFjdGl2aXR5LCB1c2VkUSwgcGVvcGxlKVxuXG4gICAgZHJhd1NpbXBsZVBsb3QoZGF0YSlcbiAgfSBlbHNlIGlmIChtb2RlID09PSBcImV4cGVydFwiKSB7XG4gICAgZGF0YSA9IGRhdGFGKHZvbHVtZSwgYWN0aXZpdHksIGFpcmluZywgcGVvcGxlKTtcblxuICAgIC8vIGlmICh2aXN0eXBlID09PSBcInN1cmZhY2VcIikge1xuICAgIC8vICAgZHJhd1N1cmZhY2VQbG90KGRhdGEpO1xuICAgIC8vIH0gZWxzZSB7XG4gICAgLy8gICBkcmF3Q29udG91clBsb3QoZGF0YSk7XG4gICAgLy8gfVxuXG4gICAgZHJhd0NvbnRvdXJQbG90KGRhdGEpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRyYXdTaW1wbGVQbG90KGRhdGEpIHtcbiAgZGF0YVswXS5tb2RlID0gXCJsaW5lc1wiO1xuICBkYXRhWzBdLm5hbWUgPSBcIlBJUkEgKGluICUpXCJcbiAgZGF0YVswXS55YXhpcyA9IFwieVwiXG5cbiAgZGF0YVsxXS50eXBlID0gXCJiYXJcIjtcbiAgZGF0YVsxXS55YXhpcyA9IFwieTJcIjtcbiAgZGF0YVsxXS5uYW1lID0gXCJQb3RlbnRpZWxsIEFuZ2VzdGVja3RlXCJcblxuICBjb25zb2xlLmxvZyhkYXRhKVxuXG4gIHZhciBsYXlvdXQgPSB7XG4gICAgc2hhcmVYOiB0cnVlLFxuICAgIHhheGlzOiB7XG4gICAgICAgIHRpdGxlOiB7XG4gICAgICAgICAgdGV4dDogXCJaZWl0IGluIFN0dW5kZW5cIixcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgeWF4aXM6IHtcbiAgICAgIHRpdGxlOiAnUElSQSAoaW4gJSknLFxuICAgICAgb3ZlcmxheWluZzogJ3kyJyxcbiAgICAgIHRpY2t2YWxzOiBbMTAsIDIwLCAzMCwgNDAsIDUwLCA2MCwgNzAsIDgwLCA5MCwgMTAwXSxcbiAgICAgIHJhbmdlOiBbMCwgMTAwXVxuICAgIH0sXG4gICAgeWF4aXMyOiB7XG4gICAgICB0aWNrbW9kZTogXCJhdXRvXCIsXG4gICAgICB0aXRsZTogJ0FuemFobCBzaWNoIHBvdGVudGllbGwgYW5nZXN0ZWNrdGVyIFBlcnNvbmVuIChnZXJ1bmRldCknLFxuICAgICAgc2lkZTogJ3JpZ2h0JyxcbiAgICAgIHJhbmdlOiBbMCwgcGVvcGxlXVxuICAgIH0sXG4gICAgbGVnZW5kOiB7XG4gICAgICAgIHk6IDEsXG4gICAgICAgIHg6IDAsXG4gICAgICB9XG4gIH07XG5cbiAgUGxvdGx5Lm5ld1Bsb3QoY2hhcnREaXYsIGRhdGEsIGxheW91dCwgeyByZXNwb25zaXZlOiB0cnVlIH0pO1xufVxuXG5mdW5jdGlvbiBkcmF3U3VyZmFjZVBsb3QoZGF0YSkge1xuICBkYXRhLnR5cGUgPSBcInN1cmZhY2VcIjtcbiAgZGF0YS5jb250b3VycyA9IHtcbiAgICB6OiB7XG4gICAgICBzaG93OiB0cnVlLFxuICAgICAgdXNlY29sb3JtYXA6IHRydWUsXG4gICAgICBoaWdobGlnaHRjb2xvcjogXCIjNDJmNDYyXCIsXG4gICAgICBwcm9qZWN0OiB7IHo6IHRydWUgfSxcbiAgICB9LFxuICB9O1xuICBjb25zdCBsYXlvdXQgPSB7XG4gICAgeGF4aXM6IHtcbiAgICAgIHRpdGxlOiB7XG4gICAgICAgIHRleHQ6IFwiWmVpdCBpbiBTdHVuZGVuXCIsXG4gICAgICB9LFxuICAgIH0sXG4gICAgeWF4aXM6IHtcbiAgICAgIHRpdGxlOiB7XG4gICAgICAgIHRleHQ6IFwiVm9sdW1lbnN0cm9tIGluIG1eMy9oXCIsXG4gICAgICB9LFxuICAgIH0sXG4gIH07XG5cbiAgY29uc29sZS5sb2coZGF0YSk7XG4gIFBsb3RseS5uZXdQbG90KGNoYXJ0RGl2LCBbZGF0YV0sIGxheW91dCwgeyByZXNwb25zaXZlOiB0cnVlIH0pO1xufVxuXG5mdW5jdGlvbiBkcmF3Q29udG91clBsb3QoZGF0YSkge1xuICBkYXRhLnR5cGUgPSBcImNvbnRvdXJcIjtcblxuICBkYXRhLmNvbG9yYmFyID0ge1xuICAgIHRpdGxlOiBcIlBJUkFcIixcbiAgICB0aWNrc3VmZml4OiBcIiVcIixcbiAgfTtcblxuICBkYXRhLmhvdmVydGVtcGxhdGUgPSBcIlBJUkE6ICV7ejouMmZ9JTxleHRyYT48L2V4dHJhPlwiO1xuXG4gIGNvbnN0IGxheW91dCA9IHtcbiAgICBzaG93YXhlc2xhYmVsczogdHJ1ZSxcbiAgICB4YXhpc190aXRsZTogXCJaZWl0IGluIFN0dW5kZW5cIixcbiAgICB4YXhpczoge1xuICAgICAgdGl0bGU6IHtcbiAgICAgICAgdGV4dDogXCJaZWl0IGluIFN0dW5kZW5cIixcbiAgICAgIH0sXG4gICAgfSxcbiAgICB5YXhpczoge1xuICAgICAgdGl0bGU6IHtcbiAgICAgICAgdGV4dDogXCJWb2x1bWVuc3Ryb20gaW4gbcKzL2hcIixcbiAgICAgIH0sXG4gICAgfSxcbiAgfTtcblxuICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgUGxvdGx5Lm5ld1Bsb3QoY2hhcnREaXYsIFtkYXRhXSwgbGF5b3V0LCB7IHJlc3BvbnNpdmU6IHRydWUgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBtb2RlVXBkYXRlZDogbW9kZVVwZGF0ZWQsXG4gIHZvbHVtZVVwZGF0ZWQ6IHZvbHVtZVVwZGF0ZWQsXG4gIGFjdGl2aXR5VXBkYXRlZDogYWN0aXZpdHlVcGRhdGVkLFxuICBhaXJpbmdVcGRhdGVkOiBhaXJpbmdVcGRhdGVkLFxuICB2aXN0eXBlVXBkYXRlZDogdmlzdHlwZVVwZGF0ZWQsXG4gIHBlb3BsZVVwZGF0ZWQ6IHBlb3BsZVVwZGF0ZWQsXG4gIHVzZWRRVXBkYXRlZDogdXNlZFFVcGRhdGVkXG59O1xuIiwiY29uc3Qgdm9sdW1lID0gcmVxdWlyZShcIi4vdm9sdW1lLmpzXCIpO1xuY29uc3QgZ3JhcGggPSByZXF1aXJlKFwiLi9ncmFwaC5qc1wiKTtcblxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtb2RlXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgLy8gaWYgZXhwZXJ0LCBoaWRlIHNpbXBsZSBodG1sIGVsZW1lbnRzXG4gIGlmIChldmVudC50YXJnZXQudmFsdWUgPT0gXCJleHBlcnRcIikge1xuICAgIHNpbXBlbEVsZW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInNpbXBsZVwiKVxuICAgIGZvciAoZWwgb2Ygc2ltcGVsRWxlbWVudHMpIHtcbiAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiXG4gICAgfVxuICAgIGV4cGVydEVsZW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImV4cGVydFwiKVxuICAgIGZvciAoZWwgb2YgZXhwZXJ0RWxlbWVudHMpIHtcbiAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIlxuICAgIH1cbiAgfSBlbHNlIGlmIChldmVudC50YXJnZXQudmFsdWUgPT0gXCJzaW1wbGVcIikge1xuICAgIGV4cGVydEVsZW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInNpbXBsZVwiKVxuICAgIGZvciAoZWwgb2YgZXhwZXJ0RWxlbWVudHMpIHtcbiAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIlxuICAgIH1cbiAgICBleHBlcnRFbGVtZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJleHBlcnRcIilcbiAgICBmb3IgKGVsIG9mIGV4cGVydEVsZW1lbnRzKSB7XG4gICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxuICAgIH1cbiAgfVxuICBncmFwaC5tb2RlVXBkYXRlZChldmVudC50YXJnZXQudmFsdWUpXG59KTtcblxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhY3Rpdml0eVwiKS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gIGdyYXBoLmFjdGl2aXR5VXBkYXRlZChldmVudC50YXJnZXQudmFsdWUpO1xufSk7XG5cbi8vIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmlzdHlwZVwiKS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4vLyAgIGdyYXBoLnZpc3R5cGVVcGRhdGVkKGV2ZW50LnRhcmdldC52YWx1ZSk7XG4vLyB9KTtcblxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwZW9wbGVcIikuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIGlmIChldmVudC50YXJnZXQudmFsdWUgIT0gXCJcIikge1xuICAgICAgICBhbW91bnQgPSBldmVudC50YXJnZXQudmFsdWU7XG4gICAgICAgIGlmICgxID4gYW1vdW50IHx8IGFtb3VudCA+IDEwMCkge1xuICAgICAgICAgICAgYW1vdW50ID0gM1xuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnZhbHVlID0gYW1vdW50XG4gICAgICAgIH1cbiAgICAgICAgZ3JhcGgucGVvcGxlVXBkYXRlZChhbW91bnQpO1xuICAgIH1cbn0pO1xuXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFpcmluZ1wiKS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgZ3JhcGguYWlyaW5nVXBkYXRlZChldmVudC50YXJnZXQudmFsdWUpXG59KTtcblxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1c2VkUVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgZ3JhcGgudXNlZFFVcGRhdGVkKGV2ZW50LnRhcmdldC52YWx1ZSlcbn0pOyIsImNvbnN0IGdyYXBoID0gcmVxdWlyZShcIi4vZ3JhcGguanNcIik7XG5cbmZ1bmN0aW9uIElucHV0RWxlbWVudChlbGVtZW50LCBkYXRhKSB7XG4gIHRoaXMuZGF0YSA9IGRhdGE7XG4gIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gIGVsZW1lbnQudmFsdWUgPSBkYXRhO1xuICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgdGhpcywgZmFsc2UpO1xufVxuXG4vKipcbiAqIENhbGxlZCB3aGVuIHRoZSBpbnB1dCBlbGVtZW50IGlzIHVwZGF0ZWQsIGUuZy4sIGJ5IHVzaW5nIGFycm93cyB3aGVuIHR5cGU9bnVtYmVyIG9yIGJ5IHByZXNzaW5nIGVudGVyXG4gKi9cbklucHV0RWxlbWVudC5wcm90b3R5cGUuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgc3dpdGNoIChldmVudC50eXBlKSB7XG4gICAgY2FzZSBcImNoYW5nZVwiOlxuICAgICAgdGhpcy5jaGFuZ2UodGhpcy5lbGVtZW50LnZhbHVlKTtcbiAgICAgIHVwZGF0ZVZvbHVtZSgpO1xuICB9XG59O1xuXG4vKipcbiAqIFVwZGF0ZSB0aGUgZWxlbWVudDsgdGhpcyBtZXRob2QgdXBkYXRlcyB0aGUgRE9NIHJlcHJlc2VudGF0aW9uIGFuZCB0aGUgaW50ZXJuYWwgcmVwcmVzZW50YXRpb25cbiAqL1xuSW5wdXRFbGVtZW50LnByb3RvdHlwZS5jaGFuZ2UgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgdGhpcy5kYXRhID0gdmFsdWU7XG4gIHRoaXMuZWxlbWVudC52YWx1ZSA9IHZhbHVlO1xufTtcblxuZnVuY3Rpb24gdXBkYXRlVm9sdW1lKCkge1xuICBpZiAobGVuZ3RoRWxlbWVudC5kYXRhID4gMTApIHtcbiAgICBsZW5ndGhFbGVtZW50LmNoYW5nZSgxMClcbiAgfVxuICBpZiAobGVuZ3RoRWxlbWVudC5kYXRhIDwgMSkge1xuICAgIGxlbmd0aEVsZW1lbnQuY2hhbmdlKDEpXG4gIH1cblxuICBpZiAod2lkdGhFbGVtZW50LmRhdGEgPiAxMCkge1xuICAgIGxlbmd0aEVsZW1lbnQuY2hhbmdlKDEwKVxuICB9XG4gIGlmICh3aWR0aEVsZW1lbnQuZGF0YSA8IDEpIHtcbiAgICBsZW5ndGhFbGVtZW50LmNoYW5nZSgxKVxuICB9XG5cbiAgaWYgKGhlaWdodEVsZW1lbnQuZGF0YSA+IDUpIHtcbiAgICBsZW5ndGhFbGVtZW50LmNoYW5nZSg1KVxuICB9XG4gIGlmIChoZWlnaHRFbGVtZW50LmRhdGEgPCAxKSB7XG4gICAgbGVuZ3RoRWxlbWVudC5jaGFuZ2UoMSlcbiAgfVxuXG4gIGNvbnN0IHZvbHVtZSA9IGxlbmd0aEVsZW1lbnQuZGF0YSAqIHdpZHRoRWxlbWVudC5kYXRhICogaGVpZ2h0RWxlbWVudC5kYXRhO1xuICBjb25zb2xlLmxvZyh2b2x1bWUpO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZvbHVtZVwiKS52YWx1ZSA9IHZvbHVtZTtcbiAgZ3JhcGgudm9sdW1lVXBkYXRlZCh2b2x1bWUpO1xuICByZXR1cm4gdm9sdW1lO1xufVxuXG4vLyBpdCBpcyBwb3NzaWJsZSB0byB1cGRhdGUgdGhlc2UgZWxlbWVudHMsIGUuZy4sIHdpdGggbGVuZ3RoRWxlbWVudC5jaGFuZ2UoMTApXG52YXIgbGVuZ3RoRWxlbWVudCA9IG5ldyBJbnB1dEVsZW1lbnQoXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGVuZ3RoXCIpLFxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxlbmd0aFwiKS52YWx1ZVxuKTtcbnZhciB3aWR0aEVsZW1lbnQgPSBuZXcgSW5wdXRFbGVtZW50KFxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIndpZHRoXCIpLFxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIndpZHRoXCIpLnZhbHVlXG4pO1xudmFyIGhlaWdodEVsZW1lbnQgPSBuZXcgSW5wdXRFbGVtZW50KFxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImhlaWdodFwiKSxcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJoZWlnaHRcIikudmFsdWVcbik7XG51cGRhdGVWb2x1bWUoKTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGdldDogdXBkYXRlVm9sdW1lLFxuICBpbml0OiB1cGRhdGVWb2x1bWUsXG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==