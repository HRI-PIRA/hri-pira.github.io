!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){const o=n(1).prepareData,a=n(1).prepareDataSimple;var l=document.getElementById("volume").value,i=document.getElementById("activity").value,r=document.getElementById("mode").value,u=document.getElementById("air").value,d=document.getElementById("people").value;const c=document.getElementById("chart");function s(){console.log("The graph must be updated!"),console.log(`Volume: ${l}, activity: ${i}, air: ${u}`),"simple"===r?(data=a(l,i,u,d),function(e){e[0].mode="lines",e[0].name="PIRA (in %)",e[0].yaxis="y",e[1].type="bar",e[1].yaxis="y2",e[1].name="Potentiell Infizierte",console.log(e);var t={shareX:!0,yaxis:{title:"PIRA (in %)",overlaying:"y2",tickvals:[10,20,30,40,50,60,70,80,90,100],range:[0,100]},yaxis2:{tickmode:"linear",title:"Anzahl sich potentiell angesteckter Personen (gerundet)",side:"right",dtick:1,range:[0,d]}};Plotly.newPlot(c,e,t,{responsive:!0})}(data)):"expert"===r&&(data=o(l,i,u,d),function(e){e.type="contour",e.colorbar={title:"PIRA",ticksuffix:"%"},e.hovertemplate="PIRA: %{z:.2f}%<extra></extra>";console.log(e),Plotly.newPlot(c,[e],{showaxeslabels:!0,xaxis_title:"Zeit in Stunden",xaxis:{title:{text:"Zeit in Stunden"}},yaxis:{title:{text:"Volumenstrom in mÂ³/h"}}},{responsive:!0})}(data))}e.exports={modeUpdated:function(e){r=e,s()},volumeUpdated:function(e){l=e,s()},activityUpdated:function(e){i=e,s()},airUpdated:function(e){u=e,s()},vistypeUpdated:function(e){vistype=e,s()},peopleUpdated:function(e){d=e,s()}}},function(e,t){const n={low_activity_lying:.45,low_activity:.54,singing:.65,mid_activity:.9,sports:1.2,test_1:.54,test_2:.65};function o(e){return"singing"==e?3500:"test_2"==e?2500:100}function a(e){const t=2.7618*(Math.exp(1.1761*3.35)-1),a=o("low_activity");return t*(o(e)/a)*(n[e]/n.low_activity)}function l(e,t,n,o){let a=390625*t+225625;return a*=Math.exp(t*o),a-=225625,a*=Math.exp(-t*o-.5776*o),a=390625*t-a,a*=e,a/(n*(225625*t+130321))}function i(e,t,o,i){0==t&&(t+=.01),console.log(`Calculating pira for: t=${e}, Q=${t}, activity=${o}, V=${i}`);const r=function(e,t){return e/t}(i,t),u=a(o),d=function(e,t){return e*Math.exp(-.5776*t)}(u,r),c=function(e,t){return t/e}(i,t);if(e>r){const a=l(u,c,t,r),i=function(e,t,n,o,a){return e*Math.exp(-t*(a+n))*(t*(a-n)*Math.exp(t*(a+n))-Math.exp(t*a)+Math.exp(t*n))/(o*t)}(d,c,r,t,e);return 1-Math.exp(-(a+i)*n[o])}{const a=l(u,c,t,e);return 1-Math.exp(-a*n[o])}}e.exports={prepareData:function(e,t,n,o){const a=e;let l=[],r=[],u=[],d=3e3;300*o>d&&(d=300*o);for(let e=50;e<=d;e+=50){l=[];let n=[];for(let o=0;o<=6;o+=.1)p=i(o,e,t,a),p=Math.round(1e4*p)/100,n.push(p),l.push(o);r.push(e),u.push(n)}return{test:l,x:l,y:r,z:u}},prepareDataSimple:function(e,t,n,o){const a=e,l=function(e){return"very_bad"==e?10:"bad"==e?20:"ok"==e?30:"good"==e?40:"very_good"==e?60:void 0}(n)*o;console.log("Total airflow for all people in the room is (Q) is "+l);let r=[],u=[],d=[],c=[];for(let e=0;e<=6;e+=1){p=i(e,l,t,a),p=Math.round(1e4*p)/100,u.push(p),r.push(e),d.push(e),c.push(Math.round(p*o/100));for(let n=.1;n<1;n+=.1)p=i(e+n,l,t,a),p=Math.round(1e4*p)/100,u.push(p),r.push(e+n)}return[{x:r,y:u},{x:d,y:c}]},pira:i,f_qa:a}},function(e,t,n){n(3);const o=n(0);document.getElementById("mode").addEventListener("input",(function(e){if("expert"==e.target.value){for(el of(simpelElements=document.getElementsByClassName("simple"),simpelElements))el.style.display="none";for(el of(expertElements=document.getElementsByClassName("expert"),expertElements))el.style.display="block"}else if("simple"==e.target.value){for(el of(expertElements=document.getElementsByClassName("simple"),expertElements))el.style.display="block";for(el of(expertElements=document.getElementsByClassName("expert"),expertElements))el.style.display="none"}o.modeUpdated(e.target.value)})),document.getElementById("activity").addEventListener("input",(function(e){o.activityUpdated(e.target.value)})),document.getElementById("people").addEventListener("input",(function(e){""!=e.target.value&&(amount=e.target.value,(1>amount||amount>100)&&(amount=3,e.target.value=amount),o.peopleUpdated(amount))})),document.getElementById("air").addEventListener("change",(function(e){o.airUpdated(e.target.value)}))},function(e,t,n){const o=n(0);function a(e,t){this.data=t,this.element=e,e.value=t,e.addEventListener("change",this,!1)}function l(){i.data>10&&i.change(10),i.data<1&&i.change(1),r.data>10&&i.change(10),r.data<1&&i.change(1),u.data>5&&i.change(5),u.data<1&&i.change(1);const e=i.data*r.data*u.data;return console.log(e),document.getElementById("volume").value=e,o.volumeUpdated(e),e}a.prototype.handleEvent=function(e){switch(e.type){case"change":this.change(this.element.value),l()}},a.prototype.change=function(e){this.data=e,this.element.value=e};var i=new a(document.getElementById("length"),document.getElementById("length").value),r=new a(document.getElementById("width"),document.getElementById("width").value),u=new a(document.getElementById("height"),document.getElementById("height").value);l(),e.exports={get:l,init:l}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyYXBoLmpzIiwid2VicGFjazovLy8uL3NyYy9kYXRhLmpzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdm9sdW1lLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZGF0YUYiLCJwcmVwYXJlRGF0YSIsImRhdGFGU2ltcGxlIiwicHJlcGFyZURhdGFTaW1wbGUiLCJ2b2x1bWUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiYWN0aXZpdHkiLCJhaXIiLCJwZW9wbGUiLCJjaGFydERpdiIsInVwZGF0ZUdyYXBoIiwiY29uc29sZSIsImxvZyIsImRhdGEiLCJ5YXhpcyIsInR5cGUiLCJsYXlvdXQiLCJzaGFyZVgiLCJ0aXRsZSIsIm92ZXJsYXlpbmciLCJ0aWNrdmFscyIsInJhbmdlIiwieWF4aXMyIiwidGlja21vZGUiLCJzaWRlIiwiZHRpY2siLCJQbG90bHkiLCJuZXdQbG90IiwicmVzcG9uc2l2ZSIsImRyYXdTaW1wbGVQbG90IiwiY29sb3JiYXIiLCJ0aWNrc3VmZml4IiwiaG92ZXJ0ZW1wbGF0ZSIsInNob3dheGVzbGFiZWxzIiwieGF4aXNfdGl0bGUiLCJ4YXhpcyIsInRleHQiLCJkcmF3Q29udG91clBsb3QiLCJtb2RlVXBkYXRlZCIsIm5ld01vZGUiLCJ2b2x1bWVVcGRhdGVkIiwibmV3Vm9sdW1lIiwiYWN0aXZpdHlVcGRhdGVkIiwibmV3QWN0aXZpdHkiLCJhaXJVcGRhdGVkIiwibmV3QWlyIiwidmlzdHlwZVVwZGF0ZWQiLCJuZXdWaXNUeXBlIiwidmlzdHlwZSIsInBlb3BsZVVwZGF0ZWQiLCJuZXdQZW9wbGUiLCJRYiIsImxvd19hY3Rpdml0eV9seWluZyIsImxvd19hY3Rpdml0eSIsInNpbmdpbmciLCJtaWRfYWN0aXZpdHkiLCJzcG9ydHMiLCJ0ZXN0XzEiLCJ0ZXN0XzIiLCJmX0UiLCJmX3FhIiwicV8wIiwiTWF0aCIsImV4cCIsIkVfMCIsImZfQyIsInFhIiwiQUNIIiwiUSIsInBpcmEiLCJWIiwidGF1IiwiZl90YXUiLCJxYXRhdSIsImZfcWF0YXUiLCJmX0FDSCIsIkMiLCJDdGF1IiwiZl9DdGF1IiwieEEiLCJ5QSIsInJvd3MiLCJtYXgiLCJyb3ciLCJyb3VuZCIsInB1c2giLCJ0ZXN0IiwieCIsInkiLCJ6IiwiZl9RIiwieDIiLCJ5MiIsInN0IiwiZ3JhcGgiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJ0YXJnZXQiLCJlbCIsInNpbXBlbEVsZW1lbnRzIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInN0eWxlIiwiZGlzcGxheSIsImV4cGVydEVsZW1lbnRzIiwiYW1vdW50IiwiSW5wdXRFbGVtZW50IiwiZWxlbWVudCIsInRoaXMiLCJ1cGRhdGVWb2x1bWUiLCJsZW5ndGhFbGVtZW50IiwiY2hhbmdlIiwid2lkdGhFbGVtZW50IiwiaGVpZ2h0RWxlbWVudCIsImhhbmRsZUV2ZW50IiwiaW5pdCJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdI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QU8sR0FDdkJnRyxFQUFjQyxPQUFPLEdBR3ZCLE1BQU0zRyxFQUFTMEcsRUFBY2hHLEtBQU9rRyxFQUFhbEcsS0FBT21HLEVBQWNuRyxLQUl0RSxPQUhBRixRQUFRQyxJQUFJVCxHQUNaQyxTQUFTQyxlQUFlLFVBQVVyQixNQUFRbUIsRUFDMUMyRixFQUFNdEQsY0FBY3JDLEdBQ2JBLEVBMUNUc0csRUFBYTlHLFVBQVVzSCxZQUFjLFNBQVVqQixHQUM3QyxPQUFRQSxFQUFNakYsTUFDWixJQUFLLFNBQ0g0RixLQUFLRyxPQUFPSCxLQUFLRCxRQUFRMUgsT0FDekI0SCxNQU9OSCxFQUFhOUcsVUFBVW1ILE9BQVMsU0FBVTlILEdBQ3hDMkgsS0FBSzlGLEtBQU83QixFQUNaMkgsS0FBS0QsUUFBUTFILE1BQVFBLEdBaUN2QixJQUFJNkgsRUFBZ0IsSUFBSUosRUFDdEJyRyxTQUFTQyxlQUFlLFVBQ3hCRCxTQUFTQyxlQUFlLFVBQVVyQixPQUVoQytILEVBQWUsSUFBSU4sRUFDckJyRyxTQUFTQyxlQUFlLFNBQ3hCRCxTQUFTQyxlQUFlLFNBQVNyQixPQUUvQmdJLEVBQWdCLElBQUlQLEVBQ3RCckcsU0FBU0MsZUFBZSxVQUN4QkQsU0FBU0MsZUFBZSxVQUFVckIsT0FFcEM0SCxJQUVBOUksRUFBT0QsUUFBVSxDQUNmZSxJQUFLZ0ksRUFDTE0sS0FBTU4iLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDIpO1xuIiwiY29uc3QgZGF0YUYgPSByZXF1aXJlKFwiLi9kYXRhLmpzXCIpLnByZXBhcmVEYXRhO1xuY29uc3QgZGF0YUZTaW1wbGUgPSByZXF1aXJlKFwiLi9kYXRhLmpzXCIpLnByZXBhcmVEYXRhU2ltcGxlO1xuLy8gY29uc3QgUGxvdGx5ID0gcmVxdWlyZShcInBsb3RseS5qcy1nbDNkLWRpc3QtbWluXCIpIC8vIG5vdCBpbnN0YWxsZWQgdmlhIG5wbSB0byByZWR1Y2UgYnVuZGxlIHNpemVcblxudmFyIHZvbHVtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidm9sdW1lXCIpLnZhbHVlO1xudmFyIGFjdGl2aXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhY3Rpdml0eVwiKS52YWx1ZTtcbi8vIHZhciB2aXN0eXBlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aXN0eXBlXCIpLnZhbHVlO1xudmFyIG1vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1vZGVcIikudmFsdWU7IC8vIHNpbXBsZSBvciBleHBlcnRcbnZhciBhaXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFpclwiKS52YWx1ZTsgLy8gaW4gdGhlIGZvcm11bGEsIHRoaXMgaXMgUVxudmFyIHBlb3BsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGVvcGxlXCIpLnZhbHVlO1xuXG5jb25zdCBjaGFydERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2hhcnRcIik7XG5cbmZ1bmN0aW9uIG1vZGVVcGRhdGVkKG5ld01vZGUpIHtcbiAgbW9kZSA9IG5ld01vZGU7XG4gIHVwZGF0ZUdyYXBoKCk7XG59XG5cbmZ1bmN0aW9uIHZvbHVtZVVwZGF0ZWQobmV3Vm9sdW1lKSB7XG4gIHZvbHVtZSA9IG5ld1ZvbHVtZTtcbiAgdXBkYXRlR3JhcGgoKTtcbn1cblxuZnVuY3Rpb24gYWN0aXZpdHlVcGRhdGVkKG5ld0FjdGl2aXR5KSB7XG4gIGFjdGl2aXR5ID0gbmV3QWN0aXZpdHk7XG4gIHVwZGF0ZUdyYXBoKCk7XG59XG5cbmZ1bmN0aW9uIGFpclVwZGF0ZWQobmV3QWlyKSB7XG4gIGFpciA9IG5ld0FpcjtcbiAgdXBkYXRlR3JhcGgoKTtcbn1cblxuZnVuY3Rpb24gcGVvcGxlVXBkYXRlZChuZXdQZW9wbGUpIHtcbiAgcGVvcGxlID0gbmV3UGVvcGxlO1xuICB1cGRhdGVHcmFwaCgpO1xufVxuXG5mdW5jdGlvbiB2aXN0eXBlVXBkYXRlZChuZXdWaXNUeXBlKSB7XG4gIHZpc3R5cGUgPSBuZXdWaXNUeXBlO1xuICB1cGRhdGVHcmFwaCgpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVHcmFwaCgpIHtcbiAgY29uc29sZS5sb2coXCJUaGUgZ3JhcGggbXVzdCBiZSB1cGRhdGVkIVwiKTtcbiAgY29uc29sZS5sb2coYFZvbHVtZTogJHt2b2x1bWV9LCBhY3Rpdml0eTogJHthY3Rpdml0eX0sIGFpcjogJHthaXJ9YCk7XG5cbiAgaWYgKG1vZGUgPT09IFwic2ltcGxlXCIpIHtcbiAgICBkYXRhID0gZGF0YUZTaW1wbGUodm9sdW1lLCBhY3Rpdml0eSwgYWlyLCBwZW9wbGUpXG5cbiAgICBkcmF3U2ltcGxlUGxvdChkYXRhKVxuICB9IGVsc2UgaWYgKG1vZGUgPT09IFwiZXhwZXJ0XCIpIHtcbiAgICBkYXRhID0gZGF0YUYodm9sdW1lLCBhY3Rpdml0eSwgYWlyLCBwZW9wbGUpO1xuXG4gICAgLy8gaWYgKHZpc3R5cGUgPT09IFwic3VyZmFjZVwiKSB7XG4gICAgLy8gICBkcmF3U3VyZmFjZVBsb3QoZGF0YSk7XG4gICAgLy8gfSBlbHNlIHtcbiAgICAvLyAgIGRyYXdDb250b3VyUGxvdChkYXRhKTtcbiAgICAvLyB9XG5cbiAgICBkcmF3Q29udG91clBsb3QoZGF0YSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZHJhd1NpbXBsZVBsb3QoZGF0YSkge1xuICBkYXRhWzBdLm1vZGUgPSBcImxpbmVzXCI7XG4gIGRhdGFbMF0ubmFtZSA9IFwiUElSQSAoaW4gJSlcIlxuICBkYXRhWzBdLnlheGlzID0gXCJ5XCJcblxuICBkYXRhWzFdLnR5cGUgPSBcImJhclwiO1xuICBkYXRhWzFdLnlheGlzID0gXCJ5MlwiO1xuICBkYXRhWzFdLm5hbWUgPSBcIlBvdGVudGllbGwgSW5maXppZXJ0ZVwiXG5cbiAgY29uc29sZS5sb2coZGF0YSlcblxuICB2YXIgbGF5b3V0ID0ge1xuICAgIHNoYXJlWDogdHJ1ZSxcbiAgICB5YXhpczoge1xuICAgICAgdGl0bGU6ICdQSVJBIChpbiAlKScsXG4gICAgICBvdmVybGF5aW5nOiAneTInLFxuICAgICAgdGlja3ZhbHM6IFsxMCwgMjAsIDMwLCA0MCwgNTAsIDYwLCA3MCwgODAsIDkwLCAxMDBdLFxuICAgICAgcmFuZ2U6IFswLCAxMDBdXG4gICAgfSxcbiAgICB5YXhpczI6IHtcbiAgICAgIHRpY2ttb2RlOiBcImxpbmVhclwiLFxuICAgICAgdGl0bGU6ICdBbnphaGwgc2ljaCBwb3RlbnRpZWxsIGFuZ2VzdGVja3RlciBQZXJzb25lbiAoZ2VydW5kZXQpJyxcbiAgICAgIHNpZGU6ICdyaWdodCcsXG4gICAgICBkdGljazogMS4wLFxuICAgICAgcmFuZ2U6IFswLCBwZW9wbGVdXG4gICAgfVxuICB9O1xuXG4gIFBsb3RseS5uZXdQbG90KGNoYXJ0RGl2LCBkYXRhLCBsYXlvdXQsIHsgcmVzcG9uc2l2ZTogdHJ1ZSB9KTtcbn1cblxuZnVuY3Rpb24gZHJhd1N1cmZhY2VQbG90KGRhdGEpIHtcbiAgZGF0YS50eXBlID0gXCJzdXJmYWNlXCI7XG4gIGRhdGEuY29udG91cnMgPSB7XG4gICAgejoge1xuICAgICAgc2hvdzogdHJ1ZSxcbiAgICAgIHVzZWNvbG9ybWFwOiB0cnVlLFxuICAgICAgaGlnaGxpZ2h0Y29sb3I6IFwiIzQyZjQ2MlwiLFxuICAgICAgcHJvamVjdDogeyB6OiB0cnVlIH0sXG4gICAgfSxcbiAgfTtcbiAgY29uc3QgbGF5b3V0ID0ge1xuICAgIHhheGlzOiB7XG4gICAgICB0aXRsZToge1xuICAgICAgICB0ZXh0OiBcIlplaXQgaW4gU3R1bmRlblwiLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHlheGlzOiB7XG4gICAgICB0aXRsZToge1xuICAgICAgICB0ZXh0OiBcIlZvbHVtZW5zdHJvbSBpbiBtXjMvaFwiLFxuICAgICAgfSxcbiAgICB9LFxuICB9O1xuXG4gIGNvbnNvbGUubG9nKGRhdGEpO1xuICBQbG90bHkubmV3UGxvdChjaGFydERpdiwgW2RhdGFdLCBsYXlvdXQsIHsgcmVzcG9uc2l2ZTogdHJ1ZSB9KTtcbn1cblxuZnVuY3Rpb24gZHJhd0NvbnRvdXJQbG90KGRhdGEpIHtcbiAgZGF0YS50eXBlID0gXCJjb250b3VyXCI7XG5cbiAgZGF0YS5jb2xvcmJhciA9IHtcbiAgICB0aXRsZTogXCJQSVJBXCIsXG4gICAgdGlja3N1ZmZpeDogXCIlXCIsXG4gIH07XG5cbiAgZGF0YS5ob3ZlcnRlbXBsYXRlID0gXCJQSVJBOiAle3o6LjJmfSU8ZXh0cmE+PC9leHRyYT5cIjtcblxuICBjb25zdCBsYXlvdXQgPSB7XG4gICAgc2hvd2F4ZXNsYWJlbHM6IHRydWUsXG4gICAgeGF4aXNfdGl0bGU6IFwiWmVpdCBpbiBTdHVuZGVuXCIsXG4gICAgeGF4aXM6IHtcbiAgICAgIHRpdGxlOiB7XG4gICAgICAgIHRleHQ6IFwiWmVpdCBpbiBTdHVuZGVuXCIsXG4gICAgICB9LFxuICAgIH0sXG4gICAgeWF4aXM6IHtcbiAgICAgIHRpdGxlOiB7XG4gICAgICAgIHRleHQ6IFwiVm9sdW1lbnN0cm9tIGluIG3Csy9oXCIsXG4gICAgICB9LFxuICAgIH0sXG4gIH07XG5cbiAgY29uc29sZS5sb2coZGF0YSk7XG4gIFBsb3RseS5uZXdQbG90KGNoYXJ0RGl2LCBbZGF0YV0sIGxheW91dCwgeyByZXNwb25zaXZlOiB0cnVlIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgbW9kZVVwZGF0ZWQ6IG1vZGVVcGRhdGVkLFxuICB2b2x1bWVVcGRhdGVkOiB2b2x1bWVVcGRhdGVkLFxuICBhY3Rpdml0eVVwZGF0ZWQ6IGFjdGl2aXR5VXBkYXRlZCxcbiAgYWlyVXBkYXRlZDogYWlyVXBkYXRlZCxcbiAgdmlzdHlwZVVwZGF0ZWQ6IHZpc3R5cGVVcGRhdGVkLFxuICBwZW9wbGVVcGRhdGVkOiBwZW9wbGVVcGRhdGVkXG59O1xuIiwiY29uc3QgUWIgPSB7XG4gIGxvd19hY3Rpdml0eV9seWluZzogMC40NSxcbiAgbG93X2FjdGl2aXR5OiAwLjU0LFxuICBzaW5naW5nOiAwLjY1LFxuICBtaWRfYWN0aXZpdHk6IDAuOSxcbiAgc3BvcnRzOiAxLjIsXG4gIHRlc3RfMTogMC41NCwgLy8gdmFsdWUgdXNlZCBpbiB0ZXN0X2RhdGEvUElSX01vZGVsbC5qcGdcbiAgdGVzdF8yOiAwLjY1LCAvLyB2YWx1ZSB1c2VkIGluIHRlc3RfZGF0YS9QSVJfTW9kZWxsX2FrdC5qcGcgYXMgaW5zdHJ1Y3RlZCBieSBtYWlsXG59O1xuXG5mdW5jdGlvbiBmX3RhdShWLCBRKSB7XG4gIHJldHVybiBWIC8gUTtcbn1cblxuZnVuY3Rpb24gZl9FKGFjdGl2aXR5KSB7XG4gIGlmIChhY3Rpdml0eSA9PSBcInNpbmdpbmdcIikge1xuICAgIHJldHVybiAzNTAwO1xuICB9IGVsc2UgaWYgKGFjdGl2aXR5ID09XCJ0ZXN0XzJcIikge1xuICAgIHJldHVybiAyNTAwOyAvLyB2YWx1ZSByZWNlaXZlZCB2aWEgbWFpbCBmcm9tIGtyaWVnZWxcbiAgfSBlbHNlIHJldHVybiAxMDA7XG59XG5cbmZ1bmN0aW9uIGZfUShhaXIpIHtcbiAgaWYgKGFpciA9PSBcInZlcnlfYmFkXCIpIHtcbiAgICByZXR1cm4gMTA7XG4gIH0gZWxzZSBpZiAoYWlyID09IFwiYmFkXCIpIHtcbiAgICByZXR1cm4gMjA7XG4gIH0gZWxzZSBpZiAoYWlyID09IFwib2tcIikge1xuICAgIHJldHVybiAzMDtcbiAgfSBlbHNlIGlmIChhaXIgPT0gXCJnb29kXCIpIHtcbiAgICByZXR1cm4gNDA7XG4gIH0gZWxzZSBpZiAoYWlyID09IFwidmVyeV9nb29kXCIpIHtcbiAgICByZXR1cm4gNjA7XG4gIH1cbn1cblxuZnVuY3Rpb24gZl9xYShhY3Rpdml0eSkge1xuICBjb25zdCBSXzAgPSAzLjM1O1xuICBjb25zdCBxXzAgPSAyLjc2MTggKiAoTWF0aC5leHAoMS4xNzYxICogUl8wKSAtIDEpO1xuXG4gIGNvbnN0IEVfMCA9IGZfRShcImxvd19hY3Rpdml0eVwiKTtcbiAgY29uc3QgRSA9IGZfRShhY3Rpdml0eSk7XG5cbiAgcmV0dXJuIHFfMCAqIChFIC8gRV8wKSAqIChRYlthY3Rpdml0eV0gLyBRYi5sb3dfYWN0aXZpdHkpO1xufVxuXG5mdW5jdGlvbiBmX3FhdGF1KHFhLCB0YXUpIHtcbiAgcmV0dXJuIHFhICogTWF0aC5leHAoLTAuNTc3NiAqIHRhdSk7XG59XG5cbmZ1bmN0aW9uIGZfQUNIKFYsIFEpIHtcbiAgcmV0dXJuIFEgLyBWO1xufVxuXG5mdW5jdGlvbiBmX0MocWEsIEFDSCwgUSwgdCkge1xuICAvLyBudW1lcmF0b3JcblxuICBsZXQgbiA9IDM5MDYyNSAqIEFDSCArIDIyNTYyNTtcbiAgLy8gY29uc29sZS5sb2cobik7XG4gIG4gPSBuICogTWF0aC5leHAoQUNIICogdCk7XG4gIC8vIGNvbnNvbGUubG9nKG4pO1xuICBuID0gbiAtIDIyNTYyNTtcbiAgLy8gY29uc29sZS5sb2cobik7XG4gIG4gPSBuICogTWF0aC5leHAoLUFDSCAqIHQgLSAoMzYxIC8gNjI1KSAqIHQpO1xuICAvLyBjb25zb2xlLmxvZyhuKTtcbiAgbiA9IDM5MDYyNSAqIEFDSCAtIG47XG4gIC8vIGNvbnNvbGUubG9nKG4pO1xuICBuID0gcWEgKiBuO1xuXG4gIC8vIGNvbnNvbGUubG9nKG4pO1xuICAvLyBjb25zb2xlLmxvZyhxYSk7XG4gIC8vIGNvbnNvbGUubG9nKEFDSCk7XG4gIC8vIGNvbnNvbGUubG9nKFEpO1xuICAvLyBjb25zb2xlLmxvZyhcInQ6IFwiICsgdCk7XG5cbiAgLy8gY29uc29sZS5sb2cobik7XG4gIC8vIGRlbm9taW5hdG9yXG4gIGxldCBkID0gUSAqICgyMjU2MjUgKiBBQ0ggKyAxMzAzMjEpO1xuICAvLyBjb25zb2xlLmxvZyhkKTtcblxuICByZXR1cm4gbiAvIGQ7XG59XG5cbmZ1bmN0aW9uIGZfQ3RhdShxYXRhdSwgQUNILCB0YXUsIFEsIHQpIHtcbiAgLy8gbnVtZXJhdG9yXG4gIGxldCBuID1cbiAgICBxYXRhdSAqXG4gICAgTWF0aC5leHAoLUFDSCAqICh0ICsgdGF1KSkgKlxuICAgIChBQ0ggKiAodCAtIHRhdSkgKiBNYXRoLmV4cChBQ0ggKiAodCArIHRhdSkpIC1cbiAgICAgIE1hdGguZXhwKEFDSCAqIHQpICtcbiAgICAgIE1hdGguZXhwKEFDSCAqIHRhdSkpO1xuXG4gIC8vIGRlbm9taW5hdG9yXG4gIGxldCBkID0gUSAqIEFDSDtcblxuICByZXR1cm4gbiAvIGQ7XG59XG5cbmZ1bmN0aW9uIHBpcmEodCwgUSwgYWN0aXZpdHksIFYpIHtcbiAgaWYgKFEgPT0gMCkgUSArPSAwLjAxO1xuICBjb25zb2xlLmxvZyhgQ2FsY3VsYXRpbmcgcGlyYSBmb3I6IHQ9JHt0fSwgUT0ke1F9LCBhY3Rpdml0eT0ke2FjdGl2aXR5fSwgVj0ke1Z9YCk7XG4gIGNvbnN0IHRhdSA9IGZfdGF1KFYsIFEpO1xuICAvLyBjb25zb2xlLmxvZyhcInRhdTogXCIgKyB0YXUpO1xuICBjb25zdCBxYSA9IGZfcWEoYWN0aXZpdHkpO1xuICAvLyBjb25zb2xlLmxvZyhcInFhOiBcIiArIHFhKTtcbiAgY29uc3QgcWF0YXUgPSBmX3FhdGF1KHFhLCB0YXUpO1xuICAvLyBjb25zb2xlLmxvZyhcInFhdGF1OiBcIiArIHFhdGF1KTtcbiAgY29uc3QgQUNIID0gZl9BQ0goViwgUSk7XG4gIC8vIGNvbnNvbGUubG9nKFwiQUNIOiBcIiArIEFDSCk7XG4gIC8vIGNvbnNvbGUubG9nKFwiUWI6IFwiICsgUWJbYWN0aXZpdHldKTtcblxuICBpZiAodCA+IHRhdSkge1xuICAgIGNvbnN0IEMgPSBmX0MocWEsIEFDSCwgUSwgdGF1KTtcbiAgICAvLyBjb25zb2xlLmxvZyhDKTtcbiAgICBjb25zdCBDdGF1ID0gZl9DdGF1KHFhdGF1LCBBQ0gsIHRhdSwgUSwgdCk7XG4gICAgLy8gY29uc29sZS5sb2coQ3RhdSk7XG4gICAgcmV0dXJuIDEgLSBNYXRoLmV4cCgtKEMgKyBDdGF1KSAqIFFiW2FjdGl2aXR5XSk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgQyA9IGZfQyhxYSwgQUNILCBRLCB0KTtcbiAgICAvLyBjb25zb2xlLmxvZyhDKTtcbiAgICByZXR1cm4gMSAtIE1hdGguZXhwKC1DICogUWJbYWN0aXZpdHldKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwcmVwYXJlRGF0YSh2b2x1bWUsIGFjdGl2aXR5LCBhaXIsIHBlb3BsZSkge1xuICBjb25zdCBWID0gdm9sdW1lO1xuXG4gIGxldCB4QSA9IFtdO1xuICBsZXQgeUEgPSBbXTtcbiAgbGV0IHJvd3MgPSBbXTtcblxuICBsZXQgbWluID0gNTBcbiAgbGV0IG1heCA9IDMwMDBcbiAgXG4gIGlmICgzMDAgKiBwZW9wbGUgPiBtYXgpIHtcbiAgICAgIG1heCA9IDMwMCAqIHBlb3BsZVxuICB9XG5cbiAgZm9yIChsZXQgUSA9IG1pbjsgUSA8PSBtYXg7IFEgKz0gNTApIHtcbiAgICB4QSA9IFtdO1xuICAgIGxldCByb3cgPSBbXTtcblxuICAgIGZvciAobGV0IHQgPSAwLjA7IHQgPD0gNi4wOyB0ICs9IDAuMSkge1xuICAgICAgLy8gaG91cnMsKyBpbmNyZW1lbnRzIGluIGhvdXJzXG4gICAgICBwID0gcGlyYSh0LCBRLCBhY3Rpdml0eSwgVik7XG4gICAgICAvL2NvbnNvbGUubG9nKFwiUGlyYSBmb3IgdD1cIiArIHQgKyBcIiwgUT1cIiArIFEgKyBcIjogXCIgKyBwKTtcbiAgICAgIHAgPSBNYXRoLnJvdW5kKHAgKiAxMDAwMCkgLyAxMDA7XG4gICAgICAvL2lmICh0ID09IDYgJiYgUSA9PSA1MDApIHAgPSAxMDA7XG4gICAgICByb3cucHVzaChwKTtcbiAgICAgIHhBLnB1c2godCk7XG4gICAgfVxuICAgIHlBLnB1c2goUSk7XG4gICAgcm93cy5wdXNoKHJvdyk7XG4gIH1cblxuICAvLyBmb3IgKGxldCBtaW51dGUgPSAwOyBtaW51dGUgPD0gMzYwOyBtaW51dGUgKz0gMzApIHtcbiAgLy8gICAgIGxldCB0ID0gbWludXRlIC8gNjA7XG4gIC8vICAgICBsZXQgbSA9IG1pbnV0ZSAlIDYwO1xuICAvLyAgICAgbGV0IGggPSAobWludXRlIC0gbSkgLyA2MDtcbiAgLy8gICAgIGxldCB0aW1lID0gaCArIFwiOlwiICsgbSArIFwiaFwiO1xuICAvLyB9XG5cbiAgcmV0dXJuIHtcbiAgICB0ZXN0OiB4QSxcbiAgICB4OiB4QSxcbiAgICB5OiB5QSxcbiAgICB6OiByb3dzLFxuICB9O1xufVxuXG5mdW5jdGlvbiBwcmVwYXJlRGF0YVNpbXBsZSh2b2x1bWUsIGFjdGl2aXR5LCBhaXIsIHBlb3BsZSkge1xuICBjb25zdCBWID0gdm9sdW1lO1xuICBjb25zdCBRID0gZl9RKGFpcikgKiBwZW9wbGVcbiBcbiAgY29uc29sZS5sb2coYFRvdGFsIGFpcmZsb3cgZm9yIGFsbCBwZW9wbGUgaW4gdGhlIHJvb20gaXMgKFEpIGlzICR7UX1gKVxuXG4gIGxldCB4ID0gW107XG4gIGxldCB5ID0gW107IC8vIHBpcmFcbiAgbGV0IHgyID0gW107IC8vIG9ubHkgdGltZXN0YW1wcyBmb3IgdGhlIGZ1bGwgaG91clxuICBsZXQgeTIgPSBbXTsgLy8gaW5mZWN0ZWQgcGVvcGxlXG5cbiAgZm9yIChsZXQgdCA9IDA7IHQgPD0gNjsgdCArPSAxKSB7XG4gICAgcCA9IHBpcmEodCwgUSwgYWN0aXZpdHksIFYpO1xuICAgIHAgPSBNYXRoLnJvdW5kKHAgKiAxMDAwMCkgLyAxMDA7XG4gICAgeS5wdXNoKHApO1xuICAgIHgucHVzaCh0KTtcbiAgICB4Mi5wdXNoKHQpXG4gICAgeTIucHVzaChNYXRoLnJvdW5kKHAgKiBwZW9wbGUgLyAxMDApKTtcbiAgICAvLyBpbnRlcm1lZGlhdGUgc3RlcHMgZm9yIHBpcmEgb25seSwgbm90IGZvciBuby4gaW5mZWN0ZWQgcGVvcGxlXG4gICAgZm9yIChsZXQgc3QgPSAwLjE7IHN0IDwgMTsgc3QgKz0gMC4xKSB7XG4gICAgICAgIHAgPSBwaXJhKHQgKyBzdCwgUSwgYWN0aXZpdHksIFYpO1xuICAgICAgICBwID0gTWF0aC5yb3VuZChwICogMTAwMDApIC8gMTAwO1xuICAgICAgICB5LnB1c2gocCk7XG4gICAgICAgIHgucHVzaCh0ICsgc3QpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBbXG4gICAge1xuICAgICAgeDogeCxcbiAgICAgIHk6IHlcbiAgICB9LFxuICAgIHtcbiAgICAgIHg6IHgyLFxuICAgICAgeTogeTJcbiAgICB9XG4gIF07XG5cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgcHJlcGFyZURhdGE6IHByZXBhcmVEYXRhLFxuICAgIHByZXBhcmVEYXRhU2ltcGxlOiBwcmVwYXJlRGF0YVNpbXBsZSxcbiAgICBwaXJhOiBwaXJhLFxuICAgIGZfcWE6IGZfcWFcbn1cbiIsImNvbnN0IHZvbHVtZSA9IHJlcXVpcmUoXCIuL3ZvbHVtZS5qc1wiKTtcbmNvbnN0IGdyYXBoID0gcmVxdWlyZShcIi4vZ3JhcGguanNcIik7XG5cbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibW9kZVwiKS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gIC8vIGlmIGV4cGVydCwgaGlkZSBzaW1wbGUgaHRtbCBlbGVtZW50c1xuICBpZiAoZXZlbnQudGFyZ2V0LnZhbHVlID09IFwiZXhwZXJ0XCIpIHtcbiAgICBzaW1wZWxFbGVtZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJzaW1wbGVcIilcbiAgICBmb3IgKGVsIG9mIHNpbXBlbEVsZW1lbnRzKSB7XG4gICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxuICAgIH1cbiAgICBleHBlcnRFbGVtZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJleHBlcnRcIilcbiAgICBmb3IgKGVsIG9mIGV4cGVydEVsZW1lbnRzKSB7XG4gICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCJcbiAgICB9XG4gIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0LnZhbHVlID09IFwic2ltcGxlXCIpIHtcbiAgICBleHBlcnRFbGVtZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJzaW1wbGVcIilcbiAgICBmb3IgKGVsIG9mIGV4cGVydEVsZW1lbnRzKSB7XG4gICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCJcbiAgICB9XG4gICAgZXhwZXJ0RWxlbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZXhwZXJ0XCIpXG4gICAgZm9yIChlbCBvZiBleHBlcnRFbGVtZW50cykge1xuICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCJcbiAgICB9XG4gIH1cbiAgZ3JhcGgubW9kZVVwZGF0ZWQoZXZlbnQudGFyZ2V0LnZhbHVlKVxufSk7XG5cbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWN0aXZpdHlcIikuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGZ1bmN0aW9uIChldmVudCkge1xuICBncmFwaC5hY3Rpdml0eVVwZGF0ZWQoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbn0pO1xuXG4vLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZpc3R5cGVcIikuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGZ1bmN0aW9uIChldmVudCkge1xuLy8gICBncmFwaC52aXN0eXBlVXBkYXRlZChldmVudC50YXJnZXQudmFsdWUpO1xuLy8gfSk7XG5cbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGVvcGxlXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0LnZhbHVlICE9IFwiXCIpIHtcbiAgICAgICAgYW1vdW50ID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuICAgICAgICBpZiAoMSA+IGFtb3VudCB8fCBhbW91bnQgPiAxMDApIHtcbiAgICAgICAgICAgIGFtb3VudCA9IDNcbiAgICAgICAgICAgIGV2ZW50LnRhcmdldC52YWx1ZSA9IGFtb3VudFxuICAgICAgICB9XG4gICAgICAgIGdyYXBoLnBlb3BsZVVwZGF0ZWQoYW1vdW50KTtcbiAgICB9XG59KTtcblxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhaXJcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmdW5jdGlvbihldmVudCkge1xuICAgIGdyYXBoLmFpclVwZGF0ZWQoZXZlbnQudGFyZ2V0LnZhbHVlKVxufSk7XG4iLCJjb25zdCBncmFwaCA9IHJlcXVpcmUoXCIuL2dyYXBoLmpzXCIpO1xuXG5mdW5jdGlvbiBJbnB1dEVsZW1lbnQoZWxlbWVudCwgZGF0YSkge1xuICB0aGlzLmRhdGEgPSBkYXRhO1xuICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICBlbGVtZW50LnZhbHVlID0gZGF0YTtcbiAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIHRoaXMsIGZhbHNlKTtcbn1cblxuLyoqXG4gKiBDYWxsZWQgd2hlbiB0aGUgaW5wdXQgZWxlbWVudCBpcyB1cGRhdGVkLCBlLmcuLCBieSB1c2luZyBhcnJvd3Mgd2hlbiB0eXBlPW51bWJlciBvciBieSBwcmVzc2luZyBlbnRlclxuICovXG5JbnB1dEVsZW1lbnQucHJvdG90eXBlLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gIHN3aXRjaCAoZXZlbnQudHlwZSkge1xuICAgIGNhc2UgXCJjaGFuZ2VcIjpcbiAgICAgIHRoaXMuY2hhbmdlKHRoaXMuZWxlbWVudC52YWx1ZSk7XG4gICAgICB1cGRhdGVWb2x1bWUoKTtcbiAgfVxufTtcblxuLyoqXG4gKiBVcGRhdGUgdGhlIGVsZW1lbnQ7IHRoaXMgbWV0aG9kIHVwZGF0ZXMgdGhlIERPTSByZXByZXNlbnRhdGlvbiBhbmQgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uXG4gKi9cbklucHV0RWxlbWVudC5wcm90b3R5cGUuY2hhbmdlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gIHRoaXMuZGF0YSA9IHZhbHVlO1xuICB0aGlzLmVsZW1lbnQudmFsdWUgPSB2YWx1ZTtcbn07XG5cbmZ1bmN0aW9uIHVwZGF0ZVZvbHVtZSgpIHtcbiAgaWYgKGxlbmd0aEVsZW1lbnQuZGF0YSA+IDEwKSB7XG4gICAgbGVuZ3RoRWxlbWVudC5jaGFuZ2UoMTApXG4gIH1cbiAgaWYgKGxlbmd0aEVsZW1lbnQuZGF0YSA8IDEpIHtcbiAgICBsZW5ndGhFbGVtZW50LmNoYW5nZSgxKVxuICB9XG5cbiAgaWYgKHdpZHRoRWxlbWVudC5kYXRhID4gMTApIHtcbiAgICBsZW5ndGhFbGVtZW50LmNoYW5nZSgxMClcbiAgfVxuICBpZiAod2lkdGhFbGVtZW50LmRhdGEgPCAxKSB7XG4gICAgbGVuZ3RoRWxlbWVudC5jaGFuZ2UoMSlcbiAgfVxuXG4gIGlmIChoZWlnaHRFbGVtZW50LmRhdGEgPiA1KSB7XG4gICAgbGVuZ3RoRWxlbWVudC5jaGFuZ2UoNSlcbiAgfVxuICBpZiAoaGVpZ2h0RWxlbWVudC5kYXRhIDwgMSkge1xuICAgIGxlbmd0aEVsZW1lbnQuY2hhbmdlKDEpXG4gIH1cblxuICBjb25zdCB2b2x1bWUgPSBsZW5ndGhFbGVtZW50LmRhdGEgKiB3aWR0aEVsZW1lbnQuZGF0YSAqIGhlaWdodEVsZW1lbnQuZGF0YTtcbiAgY29uc29sZS5sb2codm9sdW1lKTtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2b2x1bWVcIikudmFsdWUgPSB2b2x1bWU7XG4gIGdyYXBoLnZvbHVtZVVwZGF0ZWQodm9sdW1lKTtcbiAgcmV0dXJuIHZvbHVtZTtcbn1cblxuLy8gaXQgaXMgcG9zc2libGUgdG8gdXBkYXRlIHRoZXNlIGVsZW1lbnRzLCBlLmcuLCB3aXRoIGxlbmd0aEVsZW1lbnQuY2hhbmdlKDEwKVxudmFyIGxlbmd0aEVsZW1lbnQgPSBuZXcgSW5wdXRFbGVtZW50KFxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxlbmd0aFwiKSxcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsZW5ndGhcIikudmFsdWVcbik7XG52YXIgd2lkdGhFbGVtZW50ID0gbmV3IElucHV0RWxlbWVudChcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ3aWR0aFwiKSxcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ3aWR0aFwiKS52YWx1ZVxuKTtcbnZhciBoZWlnaHRFbGVtZW50ID0gbmV3IElucHV0RWxlbWVudChcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJoZWlnaHRcIiksXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaGVpZ2h0XCIpLnZhbHVlXG4pO1xudXBkYXRlVm9sdW1lKCk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBnZXQ6IHVwZGF0ZVZvbHVtZSxcbiAgaW5pdDogdXBkYXRlVm9sdW1lLFxufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=