!function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){const n={low_activity_lying:.45,low_activity:.54,singing:.65,mid_activity:.9,sports:1.2,test_1:.54,test_2:.65};function a(e){return"singing"==e?3500:"test_2"==e?2500:100}function o(e){const t=2.7618*(Math.exp(1.1761*3.35)-1),o=a("low_activity");return t*(a(e)/o)*(n[e]/n.low_activity)}function l(e,t,n,a){let o=390625*t+225625;return o*=Math.exp(t*a),o-=225625,o*=Math.exp(-t*a-.5776*a),o=390625*t-o,o*=e,o/(n*(225625*t+130321))}function i(e,t,a,i){0==t&&(t+=.01),console.log(`Calculating pira for: t=${e}, Q=${t}, activity=${a}, V=${i}`);const u=function(e,t){return e/t}(i,t),r=o(a),d=function(e,t){return e*Math.exp(-.5776*t)}(r,u),c=function(e,t){return t/e}(i,t);if(e>u){const o=l(r,c,t,u);let i=function(e,t,n,a,o){return e*(t*o+Math.exp(-t*o)-1/Math.E-1)/(a*t)}(d,c,0,t,e);return 1-Math.exp(-(o+i)*n[a])}{const o=l(r,c,t,e);return 1-Math.exp(-o*n[a])}}e.exports={prepareData:function(e,t,n){const a=e;let o=[],l=[],u=[];const r=n;for(let e=50;e<=r;e+=50){o=[];let n=[];for(let l=0;l<=6;l+=.1)p=i(l,e,t,a),p=Math.round(1e4*p)/100,n.push(p),o.push(l);l.push(e),u.push(n)}return{test:o,x:o,y:l,z:u}},prepareDataSimple:function(e,t,n,a){const o=e;console.log("Total airflow for all people in the room is (Q) is "+n);let l=[],u=[],r=[],d=[];for(let e=0;e<=6;e+=1){p=i(e,n,t,o),p=Math.round(1e4*p)/100,u.push(p),l.push(e),r.push(e),d.push(Math.round(p*(a-1)/100));for(let a=.1;a<1;a+=.1)p=i(e+a,n,t,o),p=Math.round(1e4*p)/100,u.push(p),l.push(e+a)}return[{x:l,y:u},{x:r,y:d}]},pira:i,f_qa:o,f_Q:function(e){return"very_bad"==e?10:"bad"==e?20:"ok"==e?30:"good"==e?40:"very_good"==e?60:void 0}}},function(e,t,n){const a=n(0).prepareData,o=n(0).prepareDataSimple,l=n(0).f_Q;var i=document.getElementById("volume").value,u=document.getElementById("activity").value,r=document.getElementById("mode").value,d=document.getElementById("airing").value,c=document.getElementById("people").value,s=-1;g();var p=-1;f();const m=document.getElementById("chart");function g(){s=l(d)*c,document.getElementById("usedQ").value=s}function f(){p=l("very_good")*c,document.getElementById("maxQ").value=p}function y(){console.log("The graph must be updated!"),console.log(`Volume: ${i}, activity: ${u}, airing: ${d}`),"simple"===r?(data=o(i,u,s,c),function(e){e[0].mode="lines",e[0].name="PIRA (in %)",e[0].yaxis="y",e[1].type="bar",e[1].yaxis="y2",e[1].name="Potentiell Angesteckte",console.log(e);var t={shareX:!0,xaxis:{title:{text:"Zeit in Stunden"}},yaxis:{title:"PIRA (in %)",overlaying:"y2",tickvals:[10,20,30,40,50,60,70,80,90,100],range:[0,100]},yaxis2:{tickmode:"auto",title:"Anzahl sich potentiell angesteckter Personen (gerundet)",side:"right",range:[0,c-1]},legend:{y:1,x:0}};Plotly.newPlot(m,e,t,{responsive:!0})}(data)):"expert"===r&&(data=a(i,u,p),function(e){e.type="contour",e.colorbar={title:"PIRA",ticksuffix:"%"},e.hovertemplate="PIRA: %{z:.2f}%<extra></extra>";console.log(e),Plotly.newPlot(m,[e],{showaxeslabels:!0,xaxis_title:"Zeit in Stunden",xaxis:{title:{text:"Zeit in Stunden"}},yaxis:{title:{text:"Frischluftmenge in mÂ³/h"}}},{responsive:!0})}(data))}e.exports={modeUpdated:function(e){r=e,y()},volumeUpdated:function(e){i=e,y()},activityUpdated:function(e){u=e,y()},airingUpdated:function(e){d=e,g(),y()},vistypeUpdated:function(e){vistype=e,y()},peopleUpdated:function(e){c=e,g(),f(),y()},usedQUpdated:function(e){s=e,y()},maxQUpdated:function(e){p=e,y()}}},function(e,t,n){n(3);const a=n(1);document.getElementById("mode").addEventListener("input",(function(e){if("expert"==e.target.value){for(el of(simpelElements=document.getElementsByClassName("simple"),simpelElements))el.style.display="none";for(el of(expertElements=document.getElementsByClassName("expert"),expertElements))el.style.display="block"}else if("simple"==e.target.value){for(el of(expertElements=document.getElementsByClassName("simple"),expertElements))el.style.display="block";for(el of(expertElements=document.getElementsByClassName("expert"),expertElements))el.style.display="none"}a.modeUpdated(e.target.value)})),document.getElementById("activity").addEventListener("input",(function(e){a.activityUpdated(e.target.value)})),document.getElementById("people").addEventListener("input",(function(e){""!=e.target.value&&(amount=e.target.value,(1>amount||amount>100)&&(amount=3,e.target.value=amount),a.peopleUpdated(amount))})),document.getElementById("airing").addEventListener("change",(function(e){a.airingUpdated(e.target.value)})),document.getElementById("usedQ").addEventListener("change",(function(e){e.target.value<1?e.target.value=1:e.target.value>6e3&&(e.target.value=6e3),a.usedQUpdated(e.target.value)})),document.getElementById("maxQ").addEventListener("change",(function(e){e.target.value<100?e.target.value=100:e.target.value>6e3&&(e.target.value=6e3),a.maxQUpdated(e.target.value)}))},function(e,t,n){const a=n(1);function o(e,t){this.data=t,this.element=e,e.value=t,e.addEventListener("change",this,!1)}function l(){i.data>10&&i.change(10),i.data<1&&i.change(1),u.data>10&&i.change(10),u.data<1&&i.change(1),r.data>5&&i.change(5),r.data<1&&i.change(1);const e=i.data*u.data*r.data;return console.log(e),document.getElementById("volume").value=e,a.volumeUpdated(e),e}o.prototype.handleEvent=function(e){switch(e.type){case"change":this.change(this.element.value),l()}},o.prototype.change=function(e){this.data=e,this.element.value=e};var i=new o(document.getElementById("length"),document.getElementById("length").value),u=new o(document.getElementById("width"),document.getElementById("width").value),r=new o(document.getElementById("height"),document.getElementById("height").value);l(),e.exports={get:l,init:l}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RhdGEuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyYXBoLmpzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdm9sdW1lLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiUWIiLCJsb3dfYWN0aXZpdHlfbHlpbmciLCJsb3dfYWN0aXZpdHkiLCJzaW5naW5nIiwibWlkX2FjdGl2aXR5Iiwic3BvcnRzIiwidGVzdF8xIiwidGVzdF8yIiwiZl9FIiwiYWN0aXZpdHkiLCJmX3FhIiwicV8wIiwiTWF0aCIsImV4cCIsIkVfMCIsImZfQyIsInFhIiwiQUNIIiwiUSIsInBpcmEiLCJWIiwiY29uc29sZSIsImxvZyIsInRhdSIsImZfdGF1IiwicWF0YXUiLCJmX3FhdGF1IiwiZl9BQ0giLCJDIiwiQ3RhdSIsIkUiLCJmX0N0YXUiLCJwcmVwYXJlRGF0YSIsInZvbHVtZSIsIm1heFEiLCJ4QSIsInlBIiwicm93cyIsIm1heCIsInJvdyIsInJvdW5kIiwicHVzaCIsInRlc3QiLCJ4IiwieSIsInoiLCJwcmVwYXJlRGF0YVNpbXBsZSIsInBlb3BsZSIsIngyIiwieTIiLCJzdCIsImZfUSIsImFpcmluZyIsImRhdGFGIiwiZGF0YUZTaW1wbGUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwidXNlZFEiLCJjYWxjdWxhdGVVc2VkUSIsImNhbGN1bGF0ZU1heFEiLCJjaGFydERpdiIsInVwZGF0ZUdyYXBoIiwiZGF0YSIsInlheGlzIiwidHlwZSIsImxheW91dCIsInNoYXJlWCIsInhheGlzIiwidGl0bGUiLCJ0ZXh0Iiwib3ZlcmxheWluZyIsInRpY2t2YWxzIiwicmFuZ2UiLCJ5YXhpczIiLCJ0aWNrbW9kZSIsInNpZGUiLCJsZWdlbmQiLCJQbG90bHkiLCJuZXdQbG90IiwicmVzcG9uc2l2ZSIsImRyYXdTaW1wbGVQbG90IiwiY29sb3JiYXIiLCJ0aWNrc3VmZml4IiwiaG92ZXJ0ZW1wbGF0ZSIsInNob3dheGVzbGFiZWxzIiwieGF4aXNfdGl0bGUiLCJkcmF3Q29udG91clBsb3QiLCJtb2RlVXBkYXRlZCIsIm5ld01vZGUiLCJ2b2x1bWVVcGRhdGVkIiwibmV3Vm9sdW1lIiwiYWN0aXZpdHlVcGRhdGVkIiwibmV3QWN0aXZpdHkiLCJhaXJpbmdVcGRhdGVkIiwibmV3QWlyaW5nIiwidmlzdHlwZVVwZGF0ZWQiLCJuZXdWaXNUeXBlIiwidmlzdHlwZSIsInBlb3BsZVVwZGF0ZWQiLCJuZXdQZW9wbGUiLCJ1c2VkUVVwZGF0ZWQiLCJuZXdVc2VkUSIsIm1heFFVcGRhdGVkIiwibmV3TWF4USIsImdyYXBoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwidGFyZ2V0IiwiZWwiLCJzaW1wZWxFbGVtZW50cyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJzdHlsZSIsImRpc3BsYXkiLCJleHBlcnRFbGVtZW50cyIsImFtb3VudCIsIklucHV0RWxlbWVudCIsImVsZW1lbnQiLCJ0aGlzIiwidXBkYXRlVm9sdW1lIiwibGVuZ3RoRWxlbWVudCIsImNoYW5nZSIsIndpZHRoRWxlbWVudCIsImhlaWdodEVsZW1lbnQiLCJoYW5kbGVFdmVudCIsImluaXQiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlB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QUFRQSxFQUFNMUMsTUFDWixJQUFLLFNBQ0hxRCxLQUFLRyxPQUFPSCxLQUFLRCxRQUFRbkksT0FDekJxSSxNQU9OSCxFQUFhdkgsVUFBVTRILE9BQVMsU0FBVXZJLEdBQ3hDb0ksS0FBS3ZELEtBQU83RSxFQUNab0ksS0FBS0QsUUFBUW5JLE1BQVFBLEdBaUN2QixJQUFJc0ksRUFBZ0IsSUFBSUosRUFDdEI1RCxTQUFTQyxlQUFlLFVBQ3hCRCxTQUFTQyxlQUFlLFVBQVV2RSxPQUVoQ3dJLEVBQWUsSUFBSU4sRUFDckI1RCxTQUFTQyxlQUFlLFNBQ3hCRCxTQUFTQyxlQUFlLFNBQVN2RSxPQUUvQnlJLEVBQWdCLElBQUlQLEVBQ3RCNUQsU0FBU0MsZUFBZSxVQUN4QkQsU0FBU0MsZUFBZSxVQUFVdkUsT0FFcENxSSxJQUVBdkosRUFBT0QsUUFBVSxDQUNmZSxJQUFLeUksRUFDTE0sS0FBTU4iLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDIpO1xuIiwiY29uc3QgUWIgPSB7XG4gIGxvd19hY3Rpdml0eV9seWluZzogMC40NSxcbiAgbG93X2FjdGl2aXR5OiAwLjU0LFxuICBzaW5naW5nOiAwLjY1LFxuICBtaWRfYWN0aXZpdHk6IDAuOSxcbiAgc3BvcnRzOiAxLjIsXG4gIHRlc3RfMTogMC41NCwgLy8gdmFsdWUgdXNlZCBpbiB0ZXN0X2RhdGEvUElSX01vZGVsbC5qcGdcbiAgdGVzdF8yOiAwLjY1LCAvLyB2YWx1ZSB1c2VkIGluIHRlc3RfZGF0YS9QSVJfTW9kZWxsX2FrdC5qcGcgYXMgaW5zdHJ1Y3RlZCBieSBtYWlsXG59O1xuXG5mdW5jdGlvbiBmX3RhdShWLCBRKSB7XG4gIHJldHVybiBWIC8gUTtcbn1cblxuZnVuY3Rpb24gZl9FKGFjdGl2aXR5KSB7XG4gIGlmIChhY3Rpdml0eSA9PSBcInNpbmdpbmdcIikge1xuICAgIHJldHVybiAzNTAwO1xuICB9IGVsc2UgaWYgKGFjdGl2aXR5ID09XCJ0ZXN0XzJcIikge1xuICAgIHJldHVybiAyNTAwOyAvLyB2YWx1ZSByZWNlaXZlZCB2aWEgbWFpbCBmcm9tIGtyaWVnZWxcbiAgfSBlbHNlIHJldHVybiAxMDA7XG59XG5cbmZ1bmN0aW9uIGZfUShhaXJpbmcpIHtcbiAgaWYgKGFpcmluZyA9PSBcInZlcnlfYmFkXCIpIHtcbiAgICByZXR1cm4gMTA7XG4gIH0gZWxzZSBpZiAoYWlyaW5nID09IFwiYmFkXCIpIHtcbiAgICByZXR1cm4gMjA7XG4gIH0gZWxzZSBpZiAoYWlyaW5nID09IFwib2tcIikge1xuICAgIHJldHVybiAzMDtcbiAgfSBlbHNlIGlmIChhaXJpbmcgPT0gXCJnb29kXCIpIHtcbiAgICByZXR1cm4gNDA7XG4gIH0gZWxzZSBpZiAoYWlyaW5nID09IFwidmVyeV9nb29kXCIpIHtcbiAgICByZXR1cm4gNjA7XG4gIH1cbn1cblxuZnVuY3Rpb24gZl9xYShhY3Rpdml0eSkge1xuICBjb25zdCBSXzAgPSAzLjM1O1xuICBjb25zdCBxXzAgPSAyLjc2MTggKiAoTWF0aC5leHAoMS4xNzYxICogUl8wKSAtIDEpO1xuXG4gIGNvbnN0IEVfMCA9IGZfRShcImxvd19hY3Rpdml0eVwiKTtcbiAgY29uc3QgRSA9IGZfRShhY3Rpdml0eSk7XG5cbiAgcmV0dXJuIHFfMCAqIChFIC8gRV8wKSAqIChRYlthY3Rpdml0eV0gLyBRYi5sb3dfYWN0aXZpdHkpO1xufVxuXG5mdW5jdGlvbiBmX3FhdGF1KHFhLCB0YXUpIHtcbiAgcmV0dXJuIHFhICogTWF0aC5leHAoLTAuNTc3NiAqIHRhdSk7XG59XG5cbmZ1bmN0aW9uIGZfQUNIKFYsIFEpIHtcbiAgcmV0dXJuIFEgLyBWO1xufVxuXG5mdW5jdGlvbiBmX0MocWEsIEFDSCwgUSwgdCkge1xuICAvLyBudW1lcmF0b3JcblxuICBsZXQgbiA9IDM5MDYyNSAqIEFDSCArIDIyNTYyNTtcbiAgLy8gY29uc29sZS5sb2cobik7XG4gIG4gPSBuICogTWF0aC5leHAoQUNIICogdCk7XG4gIC8vIGNvbnNvbGUubG9nKG4pO1xuICBuID0gbiAtIDIyNTYyNTtcbiAgLy8gY29uc29sZS5sb2cobik7XG4gIG4gPSBuICogTWF0aC5leHAoLUFDSCAqIHQgLSAoMzYxIC8gNjI1KSAqIHQpO1xuICAvLyBjb25zb2xlLmxvZyhuKTtcbiAgbiA9IDM5MDYyNSAqIEFDSCAtIG47XG4gIC8vIGNvbnNvbGUubG9nKG4pO1xuICBuID0gcWEgKiBuO1xuXG4gIC8vIGNvbnNvbGUubG9nKG4pO1xuICAvLyBjb25zb2xlLmxvZyhxYSk7XG4gIC8vIGNvbnNvbGUubG9nKEFDSCk7XG4gIC8vIGNvbnNvbGUubG9nKFEpO1xuICAvLyBjb25zb2xlLmxvZyhcInQ6IFwiICsgdCk7XG5cbiAgLy8gY29uc29sZS5sb2cobik7XG4gIC8vIGRlbm9taW5hdG9yXG4gIGxldCBkID0gUSAqICgyMjU2MjUgKiBBQ0ggKyAxMzAzMjEpO1xuICAvLyBjb25zb2xlLmxvZyhkKTtcblxuICByZXR1cm4gbiAvIGQ7XG59XG5cbmZ1bmN0aW9uIGZfQ3RhdShxYXRhdSwgQUNILCB0YXUsIFEsIHQpIHtcbiAgLy8gbnVtZXJhdG9yXG4gIC8vIGxldCBuID0gcWF0YXUgKiBNYXRoLmV4cCgtQUNIICogKHQgKyB0YXUpKSAqIChBQ0ggKiAodCAtIHRhdSkgKiBNYXRoLmV4cChBQ0ggKiAodCArIHRhdSkpIC0gTWF0aC5leHAoQUNIICogdCkgKyBNYXRoLmV4cChBQ0ggKiB0YXUpKTtcbiAgLy8gbGV0IG4gPSBxYXRhdSAqIE1hdGguZXhwKC1BQ0ggKiB0IC0gMSkgKiAoKEFDSCAqIHQgLSAxKSAqIE1hdGguZXhwKEFDSCAqIHQgKyAxKSAtIE1hdGguZXhwKEFDSCAqIHQpICsgTWF0aC5leHAoMSkpO1xuICBsZXQgbiA9IHFhdGF1ICogKEFDSCAqIHQgKyBNYXRoLmV4cCgtQUNIICogdCkgLSAxL01hdGguRSAtIDEpXG5cbiAgLy8gZGVub21pbmF0b3JcbiAgbGV0IGQgPSBRICogQUNIO1xuXG4gIHJldHVybiBuIC8gZDtcbn1cblxuZnVuY3Rpb24gcGlyYSh0LCBRLCBhY3Rpdml0eSwgVikge1xuICBpZiAoUSA9PSAwKSBRICs9IDAuMDE7XG4gIGNvbnNvbGUubG9nKGBDYWxjdWxhdGluZyBwaXJhIGZvcjogdD0ke3R9LCBRPSR7UX0sIGFjdGl2aXR5PSR7YWN0aXZpdHl9LCBWPSR7Vn1gKTtcbiAgY29uc3QgdGF1ID0gZl90YXUoViwgUSk7XG4gIC8vIGNvbnNvbGUubG9nKFwidGF1OiBcIiArIHRhdSk7XG4gIGNvbnN0IHFhID0gZl9xYShhY3Rpdml0eSk7XG4gIC8vIGNvbnNvbGUubG9nKFwicWE6IFwiICsgcWEpO1xuICBjb25zdCBxYXRhdSA9IGZfcWF0YXUocWEsIHRhdSk7XG4gIC8vIGNvbnNvbGUubG9nKFwicWF0YXU6IFwiICsgcWF0YXUpO1xuICBjb25zdCBBQ0ggPSBmX0FDSChWLCBRKTtcbiAgLy8gY29uc29sZS5sb2coXCJBQ0g6IFwiICsgQUNIKTtcbiAgLy8gY29uc29sZS5sb2coXCJRYjogXCIgKyBRYlthY3Rpdml0eV0pO1xuXG4gIGlmICh0ID4gdGF1KSB7XG4gICAgY29uc3QgQyA9IGZfQyhxYSwgQUNILCBRLCB0YXUpO1xuICAgIC8vIGNvbnNvbGUubG9nKEMpO1xuICAgIGxldCBDdGF1ID0gZl9DdGF1KHFhdGF1LCBBQ0gsIHRhdSwgUSwgdCk7XG4gICAgLy8gaWYgKGlzTmFOKEN0YXUpKSB7XG4gICAgLy8gICAgIEN0YXUgPSAxXG4gICAgLy8gfVxuICAgIC8vIGNvbnNvbGUubG9nKEN0YXUpO1xuICAgIHJldHVybiAxIC0gTWF0aC5leHAoLShDICsgQ3RhdSkgKiBRYlthY3Rpdml0eV0pO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IEMgPSBmX0MocWEsIEFDSCwgUSwgdCk7XG4gICAgLy8gY29uc29sZS5sb2coQyk7XG4gICAgcmV0dXJuIDEgLSBNYXRoLmV4cCgtQyAqIFFiW2FjdGl2aXR5XSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHJlcGFyZURhdGEodm9sdW1lLCBhY3Rpdml0eSwgbWF4USkge1xuICBjb25zdCBWID0gdm9sdW1lO1xuXG4gIGxldCB4QSA9IFtdO1xuICBsZXQgeUEgPSBbXTtcbiAgbGV0IHJvd3MgPSBbXTtcblxuICBjb25zdCBtaW4gPSA1MFxuICBjb25zdCBtYXggPSBtYXhRXG5cbiAgZm9yIChsZXQgUSA9IG1pbjsgUSA8PSBtYXg7IFEgKz0gNTApIHtcbiAgICB4QSA9IFtdO1xuICAgIGxldCByb3cgPSBbXTtcblxuICAgIGZvciAobGV0IHQgPSAwLjA7IHQgPD0gNi4wOyB0ICs9IDAuMSkge1xuICAgICAgLy8gaG91cnMsKyBpbmNyZW1lbnRzIGluIGhvdXJzXG4gICAgICBwID0gcGlyYSh0LCBRLCBhY3Rpdml0eSwgVik7XG4gICAgICAvL2NvbnNvbGUubG9nKFwiUGlyYSBmb3IgdD1cIiArIHQgKyBcIiwgUT1cIiArIFEgKyBcIjogXCIgKyBwKTtcbiAgICAgIHAgPSBNYXRoLnJvdW5kKHAgKiAxMDAwMCkgLyAxMDA7XG4gICAgICAvL2lmICh0ID09IDYgJiYgUSA9PSA1MDApIHAgPSAxMDA7XG4gICAgLy8gICBpZiAoaXNOYU4ocCkgfHwgcCA+PSAxMDApIHtcbiAgICAvLyAgICAgICBwID0gMFxuICAgIC8vICAgfVxuICAgICAgcm93LnB1c2gocCk7XG4gICAgICB4QS5wdXNoKHQpO1xuICAgIH1cbiAgICB5QS5wdXNoKFEpO1xuICAgIHJvd3MucHVzaChyb3cpO1xuICB9XG5cbiAgLy8gZm9yIChsZXQgbWludXRlID0gMDsgbWludXRlIDw9IDM2MDsgbWludXRlICs9IDMwKSB7XG4gIC8vICAgICBsZXQgdCA9IG1pbnV0ZSAvIDYwO1xuICAvLyAgICAgbGV0IG0gPSBtaW51dGUgJSA2MDtcbiAgLy8gICAgIGxldCBoID0gKG1pbnV0ZSAtIG0pIC8gNjA7XG4gIC8vICAgICBsZXQgdGltZSA9IGggKyBcIjpcIiArIG0gKyBcImhcIjtcbiAgLy8gfVxuXG4gIHJldHVybiB7XG4gICAgdGVzdDogeEEsXG4gICAgeDogeEEsXG4gICAgeTogeUEsXG4gICAgejogcm93c1xuICB9O1xufVxuXG5mdW5jdGlvbiBwcmVwYXJlRGF0YVNpbXBsZSh2b2x1bWUsIGFjdGl2aXR5LCBRLCBwZW9wbGUpIHtcbiAgY29uc3QgViA9IHZvbHVtZTtcbiBcbiAgY29uc29sZS5sb2coYFRvdGFsIGFpcmZsb3cgZm9yIGFsbCBwZW9wbGUgaW4gdGhlIHJvb20gaXMgKFEpIGlzICR7UX1gKVxuXG4gIGxldCB4ID0gW107XG4gIGxldCB5ID0gW107IC8vIHBpcmFcbiAgbGV0IHgyID0gW107IC8vIG9ubHkgdGltZXN0YW1wcyBmb3IgdGhlIGZ1bGwgaG91clxuICBsZXQgeTIgPSBbXTsgLy8gaW5mZWN0ZWQgcGVvcGxlXG5cbiAgZm9yIChsZXQgdCA9IDA7IHQgPD0gNjsgdCArPSAxKSB7XG4gICAgcCA9IHBpcmEodCwgUSwgYWN0aXZpdHksIFYpO1xuICAgIHAgPSBNYXRoLnJvdW5kKHAgKiAxMDAwMCkgLyAxMDA7XG4gICAgeS5wdXNoKHApO1xuICAgIHgucHVzaCh0KTtcbiAgICB4Mi5wdXNoKHQpXG4gICAgeTIucHVzaChNYXRoLnJvdW5kKHAgKiAocGVvcGxlIC0gMSkvIDEwMCkpOyAvLyB0aGUgaW5mZWN0ZWQgcGVyc29uIGNhbm5vdCBiZSBpbmZlY3RlZCBhZ2FpblxuICAgIC8vIGludGVybWVkaWF0ZSBzdGVwcyBmb3IgcGlyYSBvbmx5LCBub3QgZm9yIG5vLiBpbmZlY3RlZCBwZW9wbGVcbiAgICBmb3IgKGxldCBzdCA9IDAuMTsgc3QgPCAxOyBzdCArPSAwLjEpIHtcbiAgICAgICAgcCA9IHBpcmEodCArIHN0LCBRLCBhY3Rpdml0eSwgVik7XG4gICAgICAgIHAgPSBNYXRoLnJvdW5kKHAgKiAxMDAwMCkgLyAxMDA7XG4gICAgICAgIHkucHVzaChwKTtcbiAgICAgICAgeC5wdXNoKHQgKyBzdCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIFtcbiAgICB7XG4gICAgICB4OiB4LFxuICAgICAgeTogeVxuICAgIH0sXG4gICAge1xuICAgICAgeDogeDIsXG4gICAgICB5OiB5MlxuICAgIH1cbiAgXTtcblxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBwcmVwYXJlRGF0YTogcHJlcGFyZURhdGEsXG4gICAgcHJlcGFyZURhdGFTaW1wbGU6IHByZXBhcmVEYXRhU2ltcGxlLFxuICAgIHBpcmE6IHBpcmEsXG4gICAgZl9xYTogZl9xYSxcbiAgICBmX1E6IGZfUVxufVxuIiwiY29uc3QgZGF0YUYgPSByZXF1aXJlKFwiLi9kYXRhLmpzXCIpLnByZXBhcmVEYXRhO1xuY29uc3QgZGF0YUZTaW1wbGUgPSByZXF1aXJlKFwiLi9kYXRhLmpzXCIpLnByZXBhcmVEYXRhU2ltcGxlO1xuY29uc3QgZl9RID0gcmVxdWlyZShcIi4vZGF0YS5qc1wiKS5mX1E7XG4vLyBjb25zdCBQbG90bHkgPSByZXF1aXJlKFwicGxvdGx5LmpzLWdsM2QtZGlzdC1taW5cIikgLy8gbm90IGluc3RhbGxlZCB2aWEgbnBtIHRvIHJlZHVjZSBidW5kbGUgc2l6ZVxuXG52YXIgdm9sdW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2b2x1bWVcIikudmFsdWU7XG52YXIgYWN0aXZpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFjdGl2aXR5XCIpLnZhbHVlO1xuLy8gdmFyIHZpc3R5cGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZpc3R5cGVcIikudmFsdWU7XG52YXIgbW9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibW9kZVwiKS52YWx1ZTsgLy8gc2ltcGxlIG9yIGV4cGVydFxudmFyIGFpcmluZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWlyaW5nXCIpLnZhbHVlOyAvLyBpbiB0aGUgZm9ybXVsYSwgdGhpcyBpcyBRXG52YXIgcGVvcGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwZW9wbGVcIikudmFsdWU7XG52YXIgdXNlZFEgPSAtMTtcbmNhbGN1bGF0ZVVzZWRRKCk7XG52YXIgbWF4USA9IC0xO1xuY2FsY3VsYXRlTWF4USgpO1xuXG5jb25zdCBjaGFydERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2hhcnRcIik7XG5cbmZ1bmN0aW9uIG1vZGVVcGRhdGVkKG5ld01vZGUpIHtcbiAgbW9kZSA9IG5ld01vZGU7XG4gIHVwZGF0ZUdyYXBoKCk7XG59XG5cbmZ1bmN0aW9uIHZvbHVtZVVwZGF0ZWQobmV3Vm9sdW1lKSB7XG4gIHZvbHVtZSA9IG5ld1ZvbHVtZTtcbiAgdXBkYXRlR3JhcGgoKTtcbn1cblxuZnVuY3Rpb24gYWN0aXZpdHlVcGRhdGVkKG5ld0FjdGl2aXR5KSB7XG4gIGFjdGl2aXR5ID0gbmV3QWN0aXZpdHk7XG4gIHVwZGF0ZUdyYXBoKCk7XG59XG5cbmZ1bmN0aW9uIGFpcmluZ1VwZGF0ZWQobmV3QWlyaW5nKSB7XG4gIGFpcmluZyA9IG5ld0FpcmluZztcbiAgY2FsY3VsYXRlVXNlZFEoKVxuICB1cGRhdGVHcmFwaCgpO1xufVxuXG5mdW5jdGlvbiBwZW9wbGVVcGRhdGVkKG5ld1Blb3BsZSkge1xuICBwZW9wbGUgPSBuZXdQZW9wbGU7XG4gIGNhbGN1bGF0ZVVzZWRRKClcbiAgY2FsY3VsYXRlTWF4USgpXG4gIHVwZGF0ZUdyYXBoKCk7XG59XG5cbmZ1bmN0aW9uIHZpc3R5cGVVcGRhdGVkKG5ld1Zpc1R5cGUpIHtcbiAgdmlzdHlwZSA9IG5ld1Zpc1R5cGU7XG4gIHVwZGF0ZUdyYXBoKCk7XG59XG5cbi8vIHVzZWRRIHVwZGF0ZWQgYnkgbWFudWFsIHVzZXIgaW5wdXRcbmZ1bmN0aW9uIHVzZWRRVXBkYXRlZChuZXdVc2VkUSkge1xuICB1c2VkUSA9IG5ld1VzZWRRO1xuICB1cGRhdGVHcmFwaCgpO1xufVxuXG4vLyByZWNhbGN1bGF0ZSB1c2VkUSBiYXNlZCBvbiBhaXJpbmcgYW5kIHBlb3BsZVxuZnVuY3Rpb24gY2FsY3VsYXRlVXNlZFEoKSB7XG4gIHVzZWRRID0gZl9RKGFpcmluZykgKiBwZW9wbGU7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXNlZFFcIikudmFsdWUgPSB1c2VkUVxufVxuXG4vLyBtYXhRIHVwZGF0ZWQgYnkgbWFudWFsIHVzZXIgaW5wdXRcbmZ1bmN0aW9uIG1heFFVcGRhdGVkKG5ld01heFEpIHtcbiAgbWF4USA9IG5ld01heFFcbiAgdXBkYXRlR3JhcGgoKVxufVxuXG4vLyByZWNhbGN1bGF0ZSBtYXhRIGJhc2VkIG9uIHBlb3BsZSBhbmQgdmVyeV9nb29kIGFpcmluZ1xuZnVuY3Rpb24gY2FsY3VsYXRlTWF4USgpIHtcbiAgbWF4USA9IGZfUShcInZlcnlfZ29vZFwiKSAqIHBlb3BsZVxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1heFFcIikudmFsdWUgPSBtYXhRXG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUdyYXBoKCkge1xuICBjb25zb2xlLmxvZyhcIlRoZSBncmFwaCBtdXN0IGJlIHVwZGF0ZWQhXCIpO1xuICBjb25zb2xlLmxvZyhgVm9sdW1lOiAke3ZvbHVtZX0sIGFjdGl2aXR5OiAke2FjdGl2aXR5fSwgYWlyaW5nOiAke2FpcmluZ31gKTtcblxuICBpZiAobW9kZSA9PT0gXCJzaW1wbGVcIikge1xuICAgIGRhdGEgPSBkYXRhRlNpbXBsZSh2b2x1bWUsIGFjdGl2aXR5LCB1c2VkUSwgcGVvcGxlKVxuXG4gICAgZHJhd1NpbXBsZVBsb3QoZGF0YSlcbiAgfSBlbHNlIGlmIChtb2RlID09PSBcImV4cGVydFwiKSB7XG4gICAgZGF0YSA9IGRhdGFGKHZvbHVtZSwgYWN0aXZpdHksIG1heFEpO1xuXG4gICAgLy8gaWYgKHZpc3R5cGUgPT09IFwic3VyZmFjZVwiKSB7XG4gICAgLy8gICBkcmF3U3VyZmFjZVBsb3QoZGF0YSk7XG4gICAgLy8gfSBlbHNlIHtcbiAgICAvLyAgIGRyYXdDb250b3VyUGxvdChkYXRhKTtcbiAgICAvLyB9XG5cbiAgICBkcmF3Q29udG91clBsb3QoZGF0YSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZHJhd1NpbXBsZVBsb3QoZGF0YSkge1xuICBkYXRhWzBdLm1vZGUgPSBcImxpbmVzXCI7XG4gIGRhdGFbMF0ubmFtZSA9IFwiUElSQSAoaW4gJSlcIlxuICBkYXRhWzBdLnlheGlzID0gXCJ5XCJcblxuICBkYXRhWzFdLnR5cGUgPSBcImJhclwiO1xuICBkYXRhWzFdLnlheGlzID0gXCJ5MlwiO1xuICBkYXRhWzFdLm5hbWUgPSBcIlBvdGVudGllbGwgQW5nZXN0ZWNrdGVcIlxuXG4gIGNvbnNvbGUubG9nKGRhdGEpXG5cbiAgdmFyIGxheW91dCA9IHtcbiAgICBzaGFyZVg6IHRydWUsXG4gICAgeGF4aXM6IHtcbiAgICAgICAgdGl0bGU6IHtcbiAgICAgICAgICB0ZXh0OiBcIlplaXQgaW4gU3R1bmRlblwiLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB5YXhpczoge1xuICAgICAgdGl0bGU6ICdQSVJBIChpbiAlKScsXG4gICAgICBvdmVybGF5aW5nOiAneTInLFxuICAgICAgdGlja3ZhbHM6IFsxMCwgMjAsIDMwLCA0MCwgNTAsIDYwLCA3MCwgODAsIDkwLCAxMDBdLFxuICAgICAgcmFuZ2U6IFswLCAxMDBdXG4gICAgfSxcbiAgICB5YXhpczI6IHtcbiAgICAgIHRpY2ttb2RlOiBcImF1dG9cIixcbiAgICAgIHRpdGxlOiAnQW56YWhsIHNpY2ggcG90ZW50aWVsbCBhbmdlc3RlY2t0ZXIgUGVyc29uZW4gKGdlcnVuZGV0KScsXG4gICAgICBzaWRlOiAncmlnaHQnLFxuICAgICAgcmFuZ2U6IFswLCBwZW9wbGUgLSAxXSAvLyB0aGUgaW5mZWN0ZWQgcGVyc29uIGNhbiBub3QgYmUgaW5mZWN0ZWQgYWdhaW5cbiAgICB9LFxuICAgIGxlZ2VuZDoge1xuICAgICAgICB5OiAxLFxuICAgICAgICB4OiAwLFxuICAgICAgfVxuICB9O1xuXG4gIFBsb3RseS5uZXdQbG90KGNoYXJ0RGl2LCBkYXRhLCBsYXlvdXQsIHsgcmVzcG9uc2l2ZTogdHJ1ZSB9KTtcbn1cblxuZnVuY3Rpb24gZHJhd1N1cmZhY2VQbG90KGRhdGEpIHtcbiAgZGF0YS50eXBlID0gXCJzdXJmYWNlXCI7XG4gIGRhdGEuY29udG91cnMgPSB7XG4gICAgejoge1xuICAgICAgc2hvdzogdHJ1ZSxcbiAgICAgIHVzZWNvbG9ybWFwOiB0cnVlLFxuICAgICAgaGlnaGxpZ2h0Y29sb3I6IFwiIzQyZjQ2MlwiLFxuICAgICAgcHJvamVjdDogeyB6OiB0cnVlIH0sXG4gICAgfSxcbiAgfTtcbiAgY29uc3QgbGF5b3V0ID0ge1xuICAgIHhheGlzOiB7XG4gICAgICB0aXRsZToge1xuICAgICAgICB0ZXh0OiBcIlplaXQgaW4gU3R1bmRlblwiLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHlheGlzOiB7XG4gICAgICB0aXRsZToge1xuICAgICAgICB0ZXh0OiBcIkZyaXNjaGx1ZnRtZW5nZSBpbiBtXjMvaFwiLFxuICAgICAgfSxcbiAgICB9LFxuICB9O1xuXG4gIGNvbnNvbGUubG9nKGRhdGEpO1xuICBQbG90bHkubmV3UGxvdChjaGFydERpdiwgW2RhdGFdLCBsYXlvdXQsIHsgcmVzcG9uc2l2ZTogdHJ1ZSB9KTtcbn1cblxuZnVuY3Rpb24gZHJhd0NvbnRvdXJQbG90KGRhdGEpIHtcbiAgZGF0YS50eXBlID0gXCJjb250b3VyXCI7XG5cbiAgZGF0YS5jb2xvcmJhciA9IHtcbiAgICB0aXRsZTogXCJQSVJBXCIsXG4gICAgdGlja3N1ZmZpeDogXCIlXCIsXG4gIH07XG5cbiAgZGF0YS5ob3ZlcnRlbXBsYXRlID0gXCJQSVJBOiAle3o6LjJmfSU8ZXh0cmE+PC9leHRyYT5cIjtcblxuICBjb25zdCBsYXlvdXQgPSB7XG4gICAgc2hvd2F4ZXNsYWJlbHM6IHRydWUsXG4gICAgeGF4aXNfdGl0bGU6IFwiWmVpdCBpbiBTdHVuZGVuXCIsXG4gICAgeGF4aXM6IHtcbiAgICAgIHRpdGxlOiB7XG4gICAgICAgIHRleHQ6IFwiWmVpdCBpbiBTdHVuZGVuXCIsXG4gICAgICB9LFxuICAgIH0sXG4gICAgeWF4aXM6IHtcbiAgICAgIHRpdGxlOiB7XG4gICAgICAgIHRleHQ6IFwiRnJpc2NobHVmdG1lbmdlIGluIG3Csy9oXCIsXG4gICAgICB9LFxuICAgIH0sXG4gIH07XG5cbiAgY29uc29sZS5sb2coZGF0YSk7XG4gIFBsb3RseS5uZXdQbG90KGNoYXJ0RGl2LCBbZGF0YV0sIGxheW91dCwgeyByZXNwb25zaXZlOiB0cnVlIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgbW9kZVVwZGF0ZWQ6IG1vZGVVcGRhdGVkLFxuICB2b2x1bWVVcGRhdGVkOiB2b2x1bWVVcGRhdGVkLFxuICBhY3Rpdml0eVVwZGF0ZWQ6IGFjdGl2aXR5VXBkYXRlZCxcbiAgYWlyaW5nVXBkYXRlZDogYWlyaW5nVXBkYXRlZCxcbiAgdmlzdHlwZVVwZGF0ZWQ6IHZpc3R5cGVVcGRhdGVkLFxuICBwZW9wbGVVcGRhdGVkOiBwZW9wbGVVcGRhdGVkLFxuICB1c2VkUVVwZGF0ZWQ6IHVzZWRRVXBkYXRlZCxcbiAgbWF4UVVwZGF0ZWQ6IG1heFFVcGRhdGVkXG59O1xuIiwiY29uc3Qgdm9sdW1lID0gcmVxdWlyZShcIi4vdm9sdW1lLmpzXCIpO1xuY29uc3QgZ3JhcGggPSByZXF1aXJlKFwiLi9ncmFwaC5qc1wiKTtcblxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtb2RlXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgLy8gaWYgZXhwZXJ0LCBoaWRlIHNpbXBsZSBodG1sIGVsZW1lbnRzXG4gIGlmIChldmVudC50YXJnZXQudmFsdWUgPT0gXCJleHBlcnRcIikge1xuICAgIHNpbXBlbEVsZW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInNpbXBsZVwiKVxuICAgIGZvciAoZWwgb2Ygc2ltcGVsRWxlbWVudHMpIHtcbiAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiXG4gICAgfVxuICAgIGV4cGVydEVsZW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImV4cGVydFwiKVxuICAgIGZvciAoZWwgb2YgZXhwZXJ0RWxlbWVudHMpIHtcbiAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIlxuICAgIH1cbiAgfSBlbHNlIGlmIChldmVudC50YXJnZXQudmFsdWUgPT0gXCJzaW1wbGVcIikge1xuICAgIGV4cGVydEVsZW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInNpbXBsZVwiKVxuICAgIGZvciAoZWwgb2YgZXhwZXJ0RWxlbWVudHMpIHtcbiAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIlxuICAgIH1cbiAgICBleHBlcnRFbGVtZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJleHBlcnRcIilcbiAgICBmb3IgKGVsIG9mIGV4cGVydEVsZW1lbnRzKSB7XG4gICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxuICAgIH1cbiAgfVxuICBncmFwaC5tb2RlVXBkYXRlZChldmVudC50YXJnZXQudmFsdWUpXG59KTtcblxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhY3Rpdml0eVwiKS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gIGdyYXBoLmFjdGl2aXR5VXBkYXRlZChldmVudC50YXJnZXQudmFsdWUpO1xufSk7XG5cbi8vIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmlzdHlwZVwiKS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4vLyAgIGdyYXBoLnZpc3R5cGVVcGRhdGVkKGV2ZW50LnRhcmdldC52YWx1ZSk7XG4vLyB9KTtcblxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwZW9wbGVcIikuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIGlmIChldmVudC50YXJnZXQudmFsdWUgIT0gXCJcIikge1xuICAgICAgICBhbW91bnQgPSBldmVudC50YXJnZXQudmFsdWU7XG4gICAgICAgIGlmICgxID4gYW1vdW50IHx8IGFtb3VudCA+IDEwMCkge1xuICAgICAgICAgICAgYW1vdW50ID0gM1xuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnZhbHVlID0gYW1vdW50XG4gICAgICAgIH1cbiAgICAgICAgZ3JhcGgucGVvcGxlVXBkYXRlZChhbW91bnQpO1xuICAgIH1cbn0pO1xuXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFpcmluZ1wiKS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgZ3JhcGguYWlyaW5nVXBkYXRlZChldmVudC50YXJnZXQudmFsdWUpXG59KTtcblxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1c2VkUVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LnRhcmdldC52YWx1ZSA8IDEpIHtcbiAgICAgICAgZXZlbnQudGFyZ2V0LnZhbHVlID0gMVxuICAgIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0LnZhbHVlID4gNjAwMCkge1xuICAgICAgICBldmVudC50YXJnZXQudmFsdWUgPSA2MDAwXG4gICAgfVxuICAgIGdyYXBoLnVzZWRRVXBkYXRlZChldmVudC50YXJnZXQudmFsdWUpXG59KTtcblxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXhRXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0LnZhbHVlIDwgMTAwKSB7XG4gICAgICAgIGV2ZW50LnRhcmdldC52YWx1ZSA9IDEwMFxuICAgIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0LnZhbHVlID4gNjAwMCkge1xuICAgICAgICBldmVudC50YXJnZXQudmFsdWUgPSA2MDAwXG4gICAgfVxuICAgIGdyYXBoLm1heFFVcGRhdGVkKGV2ZW50LnRhcmdldC52YWx1ZSlcbn0pOyIsImNvbnN0IGdyYXBoID0gcmVxdWlyZShcIi4vZ3JhcGguanNcIik7XG5cbmZ1bmN0aW9uIElucHV0RWxlbWVudChlbGVtZW50LCBkYXRhKSB7XG4gIHRoaXMuZGF0YSA9IGRhdGE7XG4gIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gIGVsZW1lbnQudmFsdWUgPSBkYXRhO1xuICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgdGhpcywgZmFsc2UpO1xufVxuXG4vKipcbiAqIENhbGxlZCB3aGVuIHRoZSBpbnB1dCBlbGVtZW50IGlzIHVwZGF0ZWQsIGUuZy4sIGJ5IHVzaW5nIGFycm93cyB3aGVuIHR5cGU9bnVtYmVyIG9yIGJ5IHByZXNzaW5nIGVudGVyXG4gKi9cbklucHV0RWxlbWVudC5wcm90b3R5cGUuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgc3dpdGNoIChldmVudC50eXBlKSB7XG4gICAgY2FzZSBcImNoYW5nZVwiOlxuICAgICAgdGhpcy5jaGFuZ2UodGhpcy5lbGVtZW50LnZhbHVlKTtcbiAgICAgIHVwZGF0ZVZvbHVtZSgpO1xuICB9XG59O1xuXG4vKipcbiAqIFVwZGF0ZSB0aGUgZWxlbWVudDsgdGhpcyBtZXRob2QgdXBkYXRlcyB0aGUgRE9NIHJlcHJlc2VudGF0aW9uIGFuZCB0aGUgaW50ZXJuYWwgcmVwcmVzZW50YXRpb25cbiAqL1xuSW5wdXRFbGVtZW50LnByb3RvdHlwZS5jaGFuZ2UgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgdGhpcy5kYXRhID0gdmFsdWU7XG4gIHRoaXMuZWxlbWVudC52YWx1ZSA9IHZhbHVlO1xufTtcblxuZnVuY3Rpb24gdXBkYXRlVm9sdW1lKCkge1xuICBpZiAobGVuZ3RoRWxlbWVudC5kYXRhID4gMTApIHtcbiAgICBsZW5ndGhFbGVtZW50LmNoYW5nZSgxMClcbiAgfVxuICBpZiAobGVuZ3RoRWxlbWVudC5kYXRhIDwgMSkge1xuICAgIGxlbmd0aEVsZW1lbnQuY2hhbmdlKDEpXG4gIH1cblxuICBpZiAod2lkdGhFbGVtZW50LmRhdGEgPiAxMCkge1xuICAgIGxlbmd0aEVsZW1lbnQuY2hhbmdlKDEwKVxuICB9XG4gIGlmICh3aWR0aEVsZW1lbnQuZGF0YSA8IDEpIHtcbiAgICBsZW5ndGhFbGVtZW50LmNoYW5nZSgxKVxuICB9XG5cbiAgaWYgKGhlaWdodEVsZW1lbnQuZGF0YSA+IDUpIHtcbiAgICBsZW5ndGhFbGVtZW50LmNoYW5nZSg1KVxuICB9XG4gIGlmIChoZWlnaHRFbGVtZW50LmRhdGEgPCAxKSB7XG4gICAgbGVuZ3RoRWxlbWVudC5jaGFuZ2UoMSlcbiAgfVxuXG4gIGNvbnN0IHZvbHVtZSA9IGxlbmd0aEVsZW1lbnQuZGF0YSAqIHdpZHRoRWxlbWVudC5kYXRhICogaGVpZ2h0RWxlbWVudC5kYXRhO1xuICBjb25zb2xlLmxvZyh2b2x1bWUpO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZvbHVtZVwiKS52YWx1ZSA9IHZvbHVtZTtcbiAgZ3JhcGgudm9sdW1lVXBkYXRlZCh2b2x1bWUpO1xuICByZXR1cm4gdm9sdW1lO1xufVxuXG4vLyBpdCBpcyBwb3NzaWJsZSB0byB1cGRhdGUgdGhlc2UgZWxlbWVudHMsIGUuZy4sIHdpdGggbGVuZ3RoRWxlbWVudC5jaGFuZ2UoMTApXG52YXIgbGVuZ3RoRWxlbWVudCA9IG5ldyBJbnB1dEVsZW1lbnQoXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGVuZ3RoXCIpLFxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxlbmd0aFwiKS52YWx1ZVxuKTtcbnZhciB3aWR0aEVsZW1lbnQgPSBuZXcgSW5wdXRFbGVtZW50KFxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIndpZHRoXCIpLFxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIndpZHRoXCIpLnZhbHVlXG4pO1xudmFyIGhlaWdodEVsZW1lbnQgPSBuZXcgSW5wdXRFbGVtZW50KFxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImhlaWdodFwiKSxcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJoZWlnaHRcIikudmFsdWVcbik7XG51cGRhdGVWb2x1bWUoKTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGdldDogdXBkYXRlVm9sdW1lLFxuICBpbml0OiB1cGRhdGVWb2x1bWUsXG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==