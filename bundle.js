!function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){const n={low_activity_lying:.45,low_activity:.54,singing:.65,mid_activity:.9,sports:1.2,test_1:.54,test_2:.65};function a(e){return"singing"==e?3500:"test_2"==e?2500:100}function o(e,t){return"no"==e?1:"medical"==e?"tight"==t?.4:.9:"one_cotton"==e?"tight"==t?.85:.95:"two_cotton"==e?"tight"==t?.7:.95:"ffp1"==e?"tight"==t?.25:.6:(console.log(`No mask coefficient for ${e} and ${t}`),1)}function l(e,t){const o=2.7618*(Math.exp(1.1761*3.35)-1),l=a("low_activity");return t*o*(a(e)/l)*(n[e]/n.low_activity)}function i(e,t,n,a){let o=390625*t+225625;return o*=Math.exp(t*a),o-=225625,o*=Math.exp(-t*a-.5776*a),o=390625*t-o,o*=e,o/(n*(225625*t+130321))}function u(e,t,a,o,u){0==t&&(t+=.01);const d=function(e,t){return e/t}(o,t),r=l(a,u),c=function(e,t){return e*Math.exp(-.5776*t)}(r,d),s=function(e,t){return t/e}(o,t);if(e>d){const o=i(r,s,t,d);let l=function(e,t,n,a,o){return e*(t*o+Math.exp(-t*o)-1/Math.E-1)/(a*t)}(c,s,0,t,e);return 1-Math.exp(-(o+l)*n[a])}{const o=i(r,s,t,e);return 1-Math.exp(-o*n[a])}}e.exports={prepareData:function(e,t,n,a,l){const i=e,d=o(a,l);let r=[],c=[],s=[];const m=n;for(let e=50;e<=m;e+=50){r=[];let n=[];for(let a=0;a<=6;a+=.1)p=u(a,e,t,i,d),p=Math.round(1e4*p)/100,n.push(p),r.push(a);c.push(e),s.push(n)}return{test:r,x:r,y:c,z:s}},prepareDataSimple:function(e,t,n,a,l,i){const d=e,r=o(l,i);console.log("Total airflow for all people in the room is (Q) is "+n);let c=[],s=[],m=[],g=[];for(let e=0;e<=6;e+=1){p=u(e,n,t,d,r),p=Math.round(1e4*p)/100,s.push(p),c.push(e),m.push(e),g.push(Math.round(p*(a-1)/100));for(let a=.1;a<1;a+=.1)p=u(e+a,n,t,d,r),p=Math.round(1e4*p)/100,s.push(p),c.push(e+a)}return[{x:c,y:s},{x:m,y:g}]},pira:u,f_qa:l,f_Q:function(e){return"very_bad"==e?10:"bad"==e?20:"ok"==e?30:"good"==e?40:"very_good"==e?60:void 0}}},function(e,t,n){const a=n(0).prepareData,o=n(0).prepareDataSimple,l=n(0).f_Q;var i=document.getElementById("volume").value,u=document.getElementById("activity").value,d=document.getElementById("mask").value,r=document.getElementById("maskPosition").value,c=document.getElementById("mode").value,s=document.getElementById("airing").value,p=document.getElementById("people").value,m=-1,g=0,f=-1;h();var v=-1;x();const y=document.getElementById("chart");function h(){m=l(s)*p,f=m+g,document.getElementById("isQ").value=m,document.getElementById("usedQ").value=f}function x(){v=l("very_good")*p,document.getElementById("maxQ").value=v}function E(){console.log("The graph must be updated!"),console.log(`Volume: ${i}, activity: ${u}, airing: ${s}`),"simple"===c?(data=o(i,u,f,p,d,r),function(e){e[0].mode="lines",e[0].name="PIRA (in %)",e[0].yaxis="y",e[1].type="bar",e[1].yaxis="y2",e[1].name="Potentiell Angesteckte",console.log(e);var t={shareX:!0,xaxis:{title:{text:"Zeit in Stunden"}},yaxis:{title:"PIRA (in %)",overlaying:"y2",tickvals:[10,20,30,40,50,60,70,80,90,100],range:[0,100]},yaxis2:{tickmode:"auto",title:"Anzahl sich potentiell angesteckter Personen (gerundet)",side:"right",range:[0,p-1]},legend:{y:1,x:0}};Plotly.newPlot(y,e,t,{responsive:!0})}(data)):"expert"===c&&(data=a(i,u,v,d,r),function(e){e.type="contour",e.colorbar={title:"PIRA",ticksuffix:"%"},e.hovertemplate="PIRA: %{z:.2f}%<extra></extra>";console.log(e),Plotly.newPlot(y,[e],{showaxeslabels:!0,xaxis_title:"Zeit in Stunden",xaxis:{title:{text:"Zeit in Stunden"}},yaxis:{title:{text:"Frischluftmenge in mÂ³/h"}}},{responsive:!0})}(data))}e.exports={modeUpdated:function(e){c=e,E()},volumeUpdated:function(e){i=e,E()},activityUpdated:function(e){u=e,E()},maskUpdated:function(e){d=e,E()},maskPositionUpdated:function(e){r=e,E()},airingUpdated:function(e){s=e,h(),E()},vistypeUpdated:function(e){vistype=e,E()},peopleUpdated:function(e){p=e,h(),x(),E()},addQUpdated:function(e){g=e,h(),E()},maxQUpdated:function(e){v=e,E()}}},function(e,t,n){n(3);const a=n(1);document.getElementById("mode").addEventListener("input",(function(e){if("expert"==e.target.value){for(el of(simpelElements=document.getElementsByClassName("simple"),simpelElements))el.style.display="none";for(el of(expertElements=document.getElementsByClassName("expert"),expertElements))el.style.display="block"}else if("simple"==e.target.value){for(el of(expertElements=document.getElementsByClassName("simple"),expertElements))el.style.display="block";for(el of(expertElements=document.getElementsByClassName("expert"),expertElements))el.style.display="none"}a.modeUpdated(e.target.value)})),document.getElementById("activity").addEventListener("input",(function(e){a.activityUpdated(e.target.value)})),document.getElementById("mask").addEventListener("input",(function(e){a.maskUpdated(e.target.value)})),document.getElementById("maskPosition").addEventListener("input",(function(e){a.maskPositionUpdated(e.target.value)})),document.getElementById("people").addEventListener("change",(function(e){""!=e.target.value&&(e.target.value<1?e.target.value=1:e.target.value>100&&(e.target.value=100),a.peopleUpdated(e.target.value))})),document.getElementById("airing").addEventListener("change",(function(e){a.airingUpdated(e.target.value)})),document.getElementById("addQ").addEventListener("change",(function(e){e.target.value<0?e.target.value=0:e.target.value>5e3&&(e.target.value=5e3),a.addQUpdated(parseInt(e.target.value))})),document.getElementById("maxQ").addEventListener("change",(function(e){e.target.value<100?e.target.value=100:e.target.value>6e3&&(e.target.value=6e3),a.maxQUpdated(e.target.value)}))},function(e,t,n){const a=n(1);function o(e,t){this.data=t,this.element=e,e.value=t,e.addEventListener("change",this,!1)}function l(){i.data>10&&i.change(10),i.data<1&&i.change(1),u.data>10&&u.change(10),u.data<1&&u.change(1),d.data>5&&d.change(5),d.data<1&&d.change(1);const e=i.data*u.data*d.data;return console.log(e),document.getElementById("volume").value=e,a.volumeUpdated(e),e}o.prototype.handleEvent=function(e){switch(e.type){case"change":this.change(this.element.value),l()}},o.prototype.change=function(e){this.data=e,this.element.value=e};var i=new o(document.getElementById("length"),document.getElementById("length").value),u=new o(document.getElementById("width"),document.getElementById("width").value),d=new o(document.getElementById("height"),document.getElementById("height").value);l(),e.exports={get:l,init:l}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RhdGEuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyYXBoLmpzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdm9sdW1lLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiUWIiLCJsb3dfYWN0aXZpdHlfbHlpbmciLCJsb3dfYWN0aXZpdHkiLCJzaW5naW5nIiwibWlkX2FjdGl2aXR5Iiwic3BvcnRzIiwidGVzdF8xIiwidGVzdF8yIiwiZl9FIiwiYWN0aXZpdHkiLCJmX21hc2siLCJtYXNrIiwibWFza1Bvc2l0aW9uIiwiY29uc29sZSIsImxvZyIsImZfcWEiLCJtYXNrQ29lZmZpY2llbnQiLCJxXzAiLCJNYXRoIiwiZXhwIiwiRV8wIiwiZl9DIiwicWEiLCJBQ0giLCJRIiwicGlyYSIsIlYiLCJ0YXUiLCJmX3RhdSIsInFhdGF1IiwiZl9xYXRhdSIsImZfQUNIIiwiQyIsIkN0YXUiLCJFIiwiZl9DdGF1IiwicHJlcGFyZURhdGEiLCJ2b2x1bWUiLCJtYXhRIiwieEEiLCJ5QSIsInJvd3MiLCJtYXgiLCJyb3ciLCJyb3VuZCIsInB1c2giLCJ0ZXN0IiwieCIsInkiLCJ6IiwicHJlcGFyZURhdGFTaW1wbGUiLCJwZW9wbGUiLCJ4MiIsInkyIiwic3QiLCJmX1EiLCJhaXJpbmciLCJkYXRhRiIsImRhdGFGU2ltcGxlIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImlzUSIsImFkZFEiLCJ1c2VkUSIsImNhbGN1bGF0ZVVzZWRRIiwiY2FsY3VsYXRlTWF4USIsImNoYXJ0RGl2IiwidXBkYXRlR3JhcGgiLCJkYXRhIiwieWF4aXMiLCJ0eXBlIiwibGF5b3V0Iiwic2hhcmVYIiwieGF4aXMiLCJ0aXRsZSIsInRleHQiLCJvdmVybGF5aW5nIiwidGlja3ZhbHMiLCJyYW5nZSIsInlheGlzMiIsInRpY2ttb2RlIiwic2lkZSIsImxlZ2VuZCIsIlBsb3RseSIsIm5ld1Bsb3QiLCJyZXNwb25zaXZlIiwiZHJhd1NpbXBsZVBsb3QiLCJjb2xvcmJhciIsInRpY2tzdWZmaXgiLCJob3ZlcnRlbXBsYXRlIiwic2hvd2F4ZXNsYWJlbHMiLCJ4YXhpc190aXRsZSIsImRyYXdDb250b3VyUGxvdCIsIm1vZGVVcGRhdGVkIiwibmV3TW9kZSIsInZvbHVtZVVwZGF0ZWQiLCJuZXdWb2x1bWUiLCJhY3Rpdml0eVVwZGF0ZWQiLCJuZXdBY3Rpdml0eSIsIm1hc2tVcGRhdGVkIiwibmV3TWFzayIsIm1hc2tQb3NpdGlvblVwZGF0ZWQiLCJuZXdNYXNrUG9zaXRpb24iLCJhaXJpbmdVcGRhdGVkIiwibmV3QWlyaW5nIiwidmlzdHlwZVVwZGF0ZWQiLCJuZXdWaXNUeXBlIiwidmlzdHlwZSIsInBlb3BsZVVwZGF0ZWQiLCJuZXdQZW9wbGUiLCJhZGRRVXBkYXRlZCIsIm5ld0FkZFEiLCJtYXhRVXBkYXRlZCIsIm5ld01heFEiLCJncmFwaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInRhcmdldCIsImVsIiwic2ltcGVsRWxlbWVudHMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwic3R5bGUiLCJkaXNwbGF5IiwiZXhwZXJ0RWxlbWVudHMiLCJwYXJzZUludCIsIklucHV0RWxlbWVudCIsImVsZW1lbnQiLCJ0aGlzIiwidXBkYXRlVm9sdW1lIiwibGVuZ3RoRWxlbWVudCIsImNoYW5nZSIsIndpZHRoRWxlbWVudCIsImhlaWdodEVsZW1lbnQiLCJoYW5kbGVFdmVudCIsImluaXQiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gsRUFDaEYsSUFBSUksRUFBS1gsT0FBT1ksT0FBTyxNQUd2QixHQUZBMUIsRUFBb0JrQixFQUFFTyxHQUN0QlgsT0FBT0MsZUFBZVUsRUFBSSxVQUFXLENBQUVULFlBQVksRUFB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WixJQUFLLFNBQ0h5RCxLQUFLRyxPQUFPSCxLQUFLRCxRQUFRN0ksT0FDekIrSSxNQU9OSCxFQUFhakksVUFBVXNJLE9BQVMsU0FBVWpKLEdBQ3hDOEksS0FBSzNELEtBQU9uRixFQUNaOEksS0FBS0QsUUFBUTdJLE1BQVFBLEdBaUN2QixJQUFJZ0osRUFBZ0IsSUFBSUosRUFDdEJsRSxTQUFTQyxlQUFlLFVBQ3hCRCxTQUFTQyxlQUFlLFVBQVUzRSxPQUVoQ2tKLEVBQWUsSUFBSU4sRUFDckJsRSxTQUFTQyxlQUFlLFNBQ3hCRCxTQUFTQyxlQUFlLFNBQVMzRSxPQUUvQm1KLEVBQWdCLElBQUlQLEVBQ3RCbEUsU0FBU0MsZUFBZSxVQUN4QkQsU0FBU0MsZUFBZSxVQUFVM0UsT0FFcEMrSSxJQUVBakssRUFBT0QsUUFBVSxDQUNmZSxJQUFLbUosRUFDTE0sS0FBTU4iLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDIpO1xuIiwiY29uc3QgUWIgPSB7XG4gIGxvd19hY3Rpdml0eV9seWluZzogMC40NSxcbiAgbG93X2FjdGl2aXR5OiAwLjU0LFxuICBzaW5naW5nOiAwLjY1LFxuICBtaWRfYWN0aXZpdHk6IDAuOSxcbiAgc3BvcnRzOiAxLjIsXG4gIHRlc3RfMTogMC41NCwgLy8gdmFsdWUgdXNlZCBpbiB0ZXN0X2RhdGEvUElSX01vZGVsbC5qcGdcbiAgdGVzdF8yOiAwLjY1LCAvLyB2YWx1ZSB1c2VkIGluIHRlc3RfZGF0YS9QSVJfTW9kZWxsX2FrdC5qcGcgYXMgaW5zdHJ1Y3RlZCBieSBtYWlsXG59O1xuXG5mdW5jdGlvbiBmX3RhdShWLCBRKSB7XG4gIHJldHVybiBWIC8gUTtcbn1cblxuZnVuY3Rpb24gZl9FKGFjdGl2aXR5KSB7XG4gIGlmIChhY3Rpdml0eSA9PSBcInNpbmdpbmdcIikge1xuICAgIHJldHVybiAzNTAwO1xuICB9IGVsc2UgaWYgKGFjdGl2aXR5ID09XCJ0ZXN0XzJcIikge1xuICAgIHJldHVybiAyNTAwOyAvLyB2YWx1ZSByZWNlaXZlZCB2aWEgbWFpbCBmcm9tIGtyaWVnZWxcbiAgfSBlbHNlIHJldHVybiAxMDA7XG59XG5cbmZ1bmN0aW9uIGZfUShhaXJpbmcpIHtcbiAgaWYgKGFpcmluZyA9PSBcInZlcnlfYmFkXCIpIHtcbiAgICByZXR1cm4gMTA7XG4gIH0gZWxzZSBpZiAoYWlyaW5nID09IFwiYmFkXCIpIHtcbiAgICByZXR1cm4gMjA7XG4gIH0gZWxzZSBpZiAoYWlyaW5nID09IFwib2tcIikge1xuICAgIHJldHVybiAzMDtcbiAgfSBlbHNlIGlmIChhaXJpbmcgPT0gXCJnb29kXCIpIHtcbiAgICByZXR1cm4gNDA7XG4gIH0gZWxzZSBpZiAoYWlyaW5nID09IFwidmVyeV9nb29kXCIpIHtcbiAgICByZXR1cm4gNjA7XG4gIH1cbn1cblxuZnVuY3Rpb24gZl9tYXNrKG1hc2ssIG1hc2tQb3NpdGlvbikge1xuICAgIGlmIChtYXNrID09IFwibm9cIikge1xuICAgICAgICByZXR1cm4gMS4wXG4gICAgfVxuICAgIGlmIChtYXNrID09IFwibWVkaWNhbFwiKSB7XG4gICAgICAgIGlmIChtYXNrUG9zaXRpb24gPT0gXCJ0aWdodFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gMC40XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDAuOVxuICAgIH1cbiAgICBpZiAobWFzayA9PSBcIm9uZV9jb3R0b25cIikge1xuICAgICAgICBpZiAobWFza1Bvc2l0aW9uID09IFwidGlnaHRcIikge1xuICAgICAgICAgICAgcmV0dXJuIDAuODVcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMC45NVxuICAgIH1cbiAgICBpZiAobWFzayA9PSBcInR3b19jb3R0b25cIikge1xuICAgICAgICBpZiAobWFza1Bvc2l0aW9uID09IFwidGlnaHRcIikge1xuICAgICAgICAgICAgcmV0dXJuIDAuN1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwLjk1XG4gICAgfVxuICAgIGlmIChtYXNrID09IFwiZmZwMVwiKSB7XG4gICAgICAgIGlmIChtYXNrUG9zaXRpb24gPT0gXCJ0aWdodFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gMC4yNVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwLjZcbiAgICB9XG4gICAgY29uc29sZS5sb2coYE5vIG1hc2sgY29lZmZpY2llbnQgZm9yICR7bWFza30gYW5kICR7bWFza1Bvc2l0aW9ufWApXG4gICAgcmV0dXJuIDEuMFxufVxuXG5mdW5jdGlvbiBmX3FhKGFjdGl2aXR5LCBtYXNrQ29lZmZpY2llbnQpIHtcbiAgY29uc3QgUl8wID0gMy4zNTtcbiAgY29uc3QgcV8wID0gMi43NjE4ICogKE1hdGguZXhwKDEuMTc2MSAqIFJfMCkgLSAxKTtcblxuICBjb25zdCBFXzAgPSBmX0UoXCJsb3dfYWN0aXZpdHlcIik7XG4gIGNvbnN0IEUgPSBmX0UoYWN0aXZpdHkpO1xuXG4gIHJldHVybiBtYXNrQ29lZmZpY2llbnQgKiBxXzAgKiAoRSAvIEVfMCkgKiAoUWJbYWN0aXZpdHldIC8gUWIubG93X2FjdGl2aXR5KTtcbn1cblxuZnVuY3Rpb24gZl9xYXRhdShxYSwgdGF1KSB7XG4gIHJldHVybiBxYSAqIE1hdGguZXhwKC0wLjU3NzYgKiB0YXUpO1xufVxuXG5mdW5jdGlvbiBmX0FDSChWLCBRKSB7XG4gIHJldHVybiBRIC8gVjtcbn1cblxuZnVuY3Rpb24gZl9DKHFhLCBBQ0gsIFEsIHQpIHtcbiAgLy8gbnVtZXJhdG9yXG5cbiAgbGV0IG4gPSAzOTA2MjUgKiBBQ0ggKyAyMjU2MjU7XG4gIC8vIGNvbnNvbGUubG9nKG4pO1xuICBuID0gbiAqIE1hdGguZXhwKEFDSCAqIHQpO1xuICAvLyBjb25zb2xlLmxvZyhuKTtcbiAgbiA9IG4gLSAyMjU2MjU7XG4gIC8vIGNvbnNvbGUubG9nKG4pO1xuICBuID0gbiAqIE1hdGguZXhwKC1BQ0ggKiB0IC0gKDM2MSAvIDYyNSkgKiB0KTtcbiAgLy8gY29uc29sZS5sb2cobik7XG4gIG4gPSAzOTA2MjUgKiBBQ0ggLSBuO1xuICAvLyBjb25zb2xlLmxvZyhuKTtcbiAgbiA9IHFhICogbjtcblxuICAvLyBjb25zb2xlLmxvZyhuKTtcbiAgLy8gY29uc29sZS5sb2cocWEpO1xuICAvLyBjb25zb2xlLmxvZyhBQ0gpO1xuICAvLyBjb25zb2xlLmxvZyhRKTtcbiAgLy8gY29uc29sZS5sb2coXCJ0OiBcIiArIHQpO1xuXG4gIC8vIGNvbnNvbGUubG9nKG4pO1xuICAvLyBkZW5vbWluYXRvclxuICBsZXQgZCA9IFEgKiAoMjI1NjI1ICogQUNIICsgMTMwMzIxKTtcbiAgLy8gY29uc29sZS5sb2coZCk7XG5cbiAgcmV0dXJuIG4gLyBkO1xufVxuXG5mdW5jdGlvbiBmX0N0YXUocWF0YXUsIEFDSCwgdGF1LCBRLCB0KSB7XG4gIC8vIG51bWVyYXRvclxuICAvLyBsZXQgbiA9IHFhdGF1ICogTWF0aC5leHAoLUFDSCAqICh0ICsgdGF1KSkgKiAoQUNIICogKHQgLSB0YXUpICogTWF0aC5leHAoQUNIICogKHQgKyB0YXUpKSAtIE1hdGguZXhwKEFDSCAqIHQpICsgTWF0aC5leHAoQUNIICogdGF1KSk7XG4gIC8vIGxldCBuID0gcWF0YXUgKiBNYXRoLmV4cCgtQUNIICogdCAtIDEpICogKChBQ0ggKiB0IC0gMSkgKiBNYXRoLmV4cChBQ0ggKiB0ICsgMSkgLSBNYXRoLmV4cChBQ0ggKiB0KSArIE1hdGguZXhwKDEpKTtcbiAgbGV0IG4gPSBxYXRhdSAqIChBQ0ggKiB0ICsgTWF0aC5leHAoLUFDSCAqIHQpIC0gMS9NYXRoLkUgLSAxKSAvLyB0aGlzIGlzIGEgc2ltcGxpZmljYXRpb24gb2YgdGhlIGFib3ZlIGdlbmVyYXRlZCBieSB3b2xmcmFtIGFscGhhXG5cbiAgLy8gZGVub21pbmF0b3JcbiAgbGV0IGQgPSBRICogQUNIO1xuXG4gIHJldHVybiBuIC8gZDtcbn1cblxuZnVuY3Rpb24gcGlyYSh0LCBRLCBhY3Rpdml0eSwgViwgbWFza0NvZWZmaWNpZW50KSB7XG4gIGlmIChRID09IDApIFEgKz0gMC4wMTtcbiAgLy8gY29uc29sZS5sb2coYENhbGN1bGF0aW5nIHBpcmEgZm9yOiB0PSR7dH0sIFE9JHtRfSwgYWN0aXZpdHk9JHthY3Rpdml0eX0sIFY9JHtWfWApO1xuICBjb25zdCB0YXUgPSBmX3RhdShWLCBRKTtcbiAgLy8gY29uc29sZS5sb2coXCJ0YXU6IFwiICsgdGF1KTtcbiAgY29uc3QgcWEgPSBmX3FhKGFjdGl2aXR5LCBtYXNrQ29lZmZpY2llbnQpO1xuICAvLyBjb25zb2xlLmxvZyhcInFhOiBcIiArIHFhKTtcbiAgY29uc3QgcWF0YXUgPSBmX3FhdGF1KHFhLCB0YXUpO1xuICAvLyBjb25zb2xlLmxvZyhcInFhdGF1OiBcIiArIHFhdGF1KTtcbiAgY29uc3QgQUNIID0gZl9BQ0goViwgUSk7XG4gIC8vIGNvbnNvbGUubG9nKFwiQUNIOiBcIiArIEFDSCk7XG4gIC8vIGNvbnNvbGUubG9nKFwiUWI6IFwiICsgUWJbYWN0aXZpdHldKTtcblxuICBpZiAodCA+IHRhdSkge1xuICAgIGNvbnN0IEMgPSBmX0MocWEsIEFDSCwgUSwgdGF1KTtcbiAgICAvLyBjb25zb2xlLmxvZyhDKTtcbiAgICBsZXQgQ3RhdSA9IGZfQ3RhdShxYXRhdSwgQUNILCB0YXUsIFEsIHQpO1xuICAgIC8vIGlmIChpc05hTihDdGF1KSkge1xuICAgIC8vICAgICBDdGF1ID0gMVxuICAgIC8vIH1cbiAgICAvLyBjb25zb2xlLmxvZyhDdGF1KTtcbiAgICByZXR1cm4gMSAtIE1hdGguZXhwKC0oQyArIEN0YXUpICogUWJbYWN0aXZpdHldKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBDID0gZl9DKHFhLCBBQ0gsIFEsIHQpO1xuICAgIC8vIGNvbnNvbGUubG9nKEMpO1xuICAgIHJldHVybiAxIC0gTWF0aC5leHAoLUMgKiBRYlthY3Rpdml0eV0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHByZXBhcmVEYXRhKHZvbHVtZSwgYWN0aXZpdHksIG1heFEsIG1hc2ssIG1hc2tQb3NpdGlvbikge1xuICBjb25zdCBWID0gdm9sdW1lO1xuICBjb25zdCBtYXNrQ29lZmZpY2llbnQgPSBmX21hc2sobWFzaywgbWFza1Bvc2l0aW9uKVxuXG4gIGxldCB4QSA9IFtdO1xuICBsZXQgeUEgPSBbXTtcbiAgbGV0IHJvd3MgPSBbXTtcblxuICBjb25zdCBtaW4gPSA1MFxuICBjb25zdCBtYXggPSBtYXhRXG5cbiAgZm9yIChsZXQgUSA9IG1pbjsgUSA8PSBtYXg7IFEgKz0gNTApIHtcbiAgICB4QSA9IFtdO1xuICAgIGxldCByb3cgPSBbXTtcblxuICAgIGZvciAobGV0IHQgPSAwLjA7IHQgPD0gNi4wOyB0ICs9IDAuMSkge1xuICAgICAgLy8gaG91cnMsKyBpbmNyZW1lbnRzIGluIGhvdXJzXG4gICAgICBwID0gcGlyYSh0LCBRLCBhY3Rpdml0eSwgViwgbWFza0NvZWZmaWNpZW50KTtcbiAgICAgIC8vY29uc29sZS5sb2coXCJQaXJhIGZvciB0PVwiICsgdCArIFwiLCBRPVwiICsgUSArIFwiOiBcIiArIHApO1xuICAgICAgcCA9IE1hdGgucm91bmQocCAqIDEwMDAwKSAvIDEwMDtcbiAgICAgIC8vaWYgKHQgPT0gNiAmJiBRID09IDUwMCkgcCA9IDEwMDtcbiAgICAvLyAgIGlmIChpc05hTihwKSB8fCBwID49IDEwMCkge1xuICAgIC8vICAgICAgIHAgPSAwXG4gICAgLy8gICB9XG4gICAgICByb3cucHVzaChwKTtcbiAgICAgIHhBLnB1c2godCk7XG4gICAgfVxuICAgIHlBLnB1c2goUSk7XG4gICAgcm93cy5wdXNoKHJvdyk7XG4gIH1cblxuICAvLyBmb3IgKGxldCBtaW51dGUgPSAwOyBtaW51dGUgPD0gMzYwOyBtaW51dGUgKz0gMzApIHtcbiAgLy8gICAgIGxldCB0ID0gbWludXRlIC8gNjA7XG4gIC8vICAgICBsZXQgbSA9IG1pbnV0ZSAlIDYwO1xuICAvLyAgICAgbGV0IGggPSAobWludXRlIC0gbSkgLyA2MDtcbiAgLy8gICAgIGxldCB0aW1lID0gaCArIFwiOlwiICsgbSArIFwiaFwiO1xuICAvLyB9XG5cbiAgcmV0dXJuIHtcbiAgICB0ZXN0OiB4QSxcbiAgICB4OiB4QSxcbiAgICB5OiB5QSxcbiAgICB6OiByb3dzXG4gIH07XG59XG5cbmZ1bmN0aW9uIHByZXBhcmVEYXRhU2ltcGxlKHZvbHVtZSwgYWN0aXZpdHksIFEsIHBlb3BsZSwgbWFzaywgbWFza1Bvc2l0aW9uKSB7XG4gIGNvbnN0IFYgPSB2b2x1bWU7XG4gIGNvbnN0IG1hc2tDb2VmZmljaWVudCA9IGZfbWFzayhtYXNrLCBtYXNrUG9zaXRpb24pXG4gXG4gIGNvbnNvbGUubG9nKGBUb3RhbCBhaXJmbG93IGZvciBhbGwgcGVvcGxlIGluIHRoZSByb29tIGlzIChRKSBpcyAke1F9YClcblxuICBsZXQgeCA9IFtdO1xuICBsZXQgeSA9IFtdOyAvLyBwaXJhXG4gIGxldCB4MiA9IFtdOyAvLyBvbmx5IHRpbWVzdGFtcHMgZm9yIHRoZSBmdWxsIGhvdXJcbiAgbGV0IHkyID0gW107IC8vIGluZmVjdGVkIHBlb3BsZVxuXG4gIGZvciAobGV0IHQgPSAwOyB0IDw9IDY7IHQgKz0gMSkge1xuICAgIHAgPSBwaXJhKHQsIFEsIGFjdGl2aXR5LCBWLCBtYXNrQ29lZmZpY2llbnQpO1xuICAgIHAgPSBNYXRoLnJvdW5kKHAgKiAxMDAwMCkgLyAxMDA7XG4gICAgeS5wdXNoKHApO1xuICAgIHgucHVzaCh0KTtcbiAgICB4Mi5wdXNoKHQpXG4gICAgeTIucHVzaChNYXRoLnJvdW5kKHAgKiAocGVvcGxlIC0gMSkvIDEwMCkpOyAvLyB0aGUgaW5mZWN0ZWQgcGVyc29uIGNhbm5vdCBiZSBpbmZlY3RlZCBhZ2FpblxuICAgIC8vIGludGVybWVkaWF0ZSBzdGVwcyBmb3IgcGlyYSBvbmx5LCBub3QgZm9yIG5vLiBpbmZlY3RlZCBwZW9wbGVcbiAgICBmb3IgKGxldCBzdCA9IDAuMTsgc3QgPCAxOyBzdCArPSAwLjEpIHtcbiAgICAgICAgcCA9IHBpcmEodCArIHN0LCBRLCBhY3Rpdml0eSwgViwgbWFza0NvZWZmaWNpZW50KTtcbiAgICAgICAgcCA9IE1hdGgucm91bmQocCAqIDEwMDAwKSAvIDEwMDtcbiAgICAgICAgeS5wdXNoKHApO1xuICAgICAgICB4LnB1c2godCArIHN0KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gW1xuICAgIHtcbiAgICAgIHg6IHgsXG4gICAgICB5OiB5XG4gICAgfSxcbiAgICB7XG4gICAgICB4OiB4MixcbiAgICAgIHk6IHkyXG4gICAgfVxuICBdO1xuXG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIHByZXBhcmVEYXRhOiBwcmVwYXJlRGF0YSxcbiAgICBwcmVwYXJlRGF0YVNpbXBsZTogcHJlcGFyZURhdGFTaW1wbGUsXG4gICAgcGlyYTogcGlyYSxcbiAgICBmX3FhOiBmX3FhLFxuICAgIGZfUTogZl9RXG59XG4iLCJjb25zdCBkYXRhRiA9IHJlcXVpcmUoXCIuL2RhdGEuanNcIikucHJlcGFyZURhdGE7XG5jb25zdCBkYXRhRlNpbXBsZSA9IHJlcXVpcmUoXCIuL2RhdGEuanNcIikucHJlcGFyZURhdGFTaW1wbGU7XG5jb25zdCBmX1EgPSByZXF1aXJlKFwiLi9kYXRhLmpzXCIpLmZfUTtcbi8vIGNvbnN0IFBsb3RseSA9IHJlcXVpcmUoXCJwbG90bHkuanMtZ2wzZC1kaXN0LW1pblwiKSAvLyBub3QgaW5zdGFsbGVkIHZpYSBucG0gdG8gcmVkdWNlIGJ1bmRsZSBzaXplXG5cbnZhciB2b2x1bWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZvbHVtZVwiKS52YWx1ZTtcbnZhciBhY3Rpdml0eSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWN0aXZpdHlcIikudmFsdWU7XG52YXIgbWFzayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFza1wiKS52YWx1ZTtcbnZhciBtYXNrUG9zaXRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hc2tQb3NpdGlvblwiKS52YWx1ZTtcbi8vIHZhciB2aXN0eXBlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aXN0eXBlXCIpLnZhbHVlO1xudmFyIG1vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1vZGVcIikudmFsdWU7IC8vIHNpbXBsZSBvciBleHBlcnRcbnZhciBhaXJpbmcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFpcmluZ1wiKS52YWx1ZTsgLy8gaW4gdGhlIGZvcm11bGEsIHRoaXMgaXMgUVxudmFyIHBlb3BsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGVvcGxlXCIpLnZhbHVlO1xudmFyIGlzUSA9IC0xXG52YXIgYWRkUSA9IDBcbnZhciB1c2VkUSA9IC0xXG5jYWxjdWxhdGVVc2VkUSgpO1xudmFyIG1heFEgPSAtMTtcbmNhbGN1bGF0ZU1heFEoKTtcblxuY29uc3QgY2hhcnREaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNoYXJ0XCIpO1xuXG5mdW5jdGlvbiBtb2RlVXBkYXRlZChuZXdNb2RlKSB7XG4gIG1vZGUgPSBuZXdNb2RlO1xuICB1cGRhdGVHcmFwaCgpO1xufVxuXG5mdW5jdGlvbiB2b2x1bWVVcGRhdGVkKG5ld1ZvbHVtZSkge1xuICB2b2x1bWUgPSBuZXdWb2x1bWU7XG4gIHVwZGF0ZUdyYXBoKCk7XG59XG5cbmZ1bmN0aW9uIGFjdGl2aXR5VXBkYXRlZChuZXdBY3Rpdml0eSkge1xuICBhY3Rpdml0eSA9IG5ld0FjdGl2aXR5O1xuICB1cGRhdGVHcmFwaCgpO1xufVxuXG5mdW5jdGlvbiBtYXNrVXBkYXRlZChuZXdNYXNrKSB7XG4gIG1hc2sgPSBuZXdNYXNrO1xuICB1cGRhdGVHcmFwaCgpO1xufVxuXG5mdW5jdGlvbiBtYXNrUG9zaXRpb25VcGRhdGVkKG5ld01hc2tQb3NpdGlvbikge1xuICBtYXNrUG9zaXRpb24gPSBuZXdNYXNrUG9zaXRpb247XG4gIHVwZGF0ZUdyYXBoKCk7XG59XG5cbmZ1bmN0aW9uIGFpcmluZ1VwZGF0ZWQobmV3QWlyaW5nKSB7XG4gIGFpcmluZyA9IG5ld0FpcmluZztcbiAgY2FsY3VsYXRlVXNlZFEoKVxuICB1cGRhdGVHcmFwaCgpO1xufVxuXG5mdW5jdGlvbiBwZW9wbGVVcGRhdGVkKG5ld1Blb3BsZSkge1xuICBwZW9wbGUgPSBuZXdQZW9wbGU7XG4gIGNhbGN1bGF0ZVVzZWRRKClcbiAgY2FsY3VsYXRlTWF4USgpXG4gIHVwZGF0ZUdyYXBoKCk7XG59XG5cbmZ1bmN0aW9uIHZpc3R5cGVVcGRhdGVkKG5ld1Zpc1R5cGUpIHtcbiAgdmlzdHlwZSA9IG5ld1Zpc1R5cGU7XG4gIHVwZGF0ZUdyYXBoKCk7XG59XG5cbmZ1bmN0aW9uIGFkZFFVcGRhdGVkKG5ld0FkZFEpIHtcbiAgYWRkUSA9IG5ld0FkZFE7XG4gIGNhbGN1bGF0ZVVzZWRRKCk7XG4gIHVwZGF0ZUdyYXBoKCk7XG59XG5cbi8vIHJlY2FsY3VsYXRlIHVzZWRRIGJhc2VkIG9uIGFpcmluZyBhbmQgcGVvcGxlXG5mdW5jdGlvbiBjYWxjdWxhdGVVc2VkUSgpIHtcbiAgaXNRID0gZl9RKGFpcmluZykgKiBwZW9wbGU7XG4gIHVzZWRRID0gaXNRICsgYWRkUTtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpc1FcIikudmFsdWUgPSBpc1FcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1c2VkUVwiKS52YWx1ZSA9IHVzZWRRXG59XG5cbi8vIG1heFEgdXBkYXRlZCBieSBtYW51YWwgdXNlciBpbnB1dFxuZnVuY3Rpb24gbWF4UVVwZGF0ZWQobmV3TWF4USkge1xuICBtYXhRID0gbmV3TWF4UVxuICB1cGRhdGVHcmFwaCgpXG59XG5cbi8vIHJlY2FsY3VsYXRlIG1heFEgYmFzZWQgb24gcGVvcGxlIGFuZCB2ZXJ5X2dvb2QgYWlyaW5nXG5mdW5jdGlvbiBjYWxjdWxhdGVNYXhRKCkge1xuICBtYXhRID0gZl9RKFwidmVyeV9nb29kXCIpICogcGVvcGxlXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWF4UVwiKS52YWx1ZSA9IG1heFFcbn1cblxuZnVuY3Rpb24gdXBkYXRlR3JhcGgoKSB7XG4gIGNvbnNvbGUubG9nKFwiVGhlIGdyYXBoIG11c3QgYmUgdXBkYXRlZCFcIik7XG4gIGNvbnNvbGUubG9nKGBWb2x1bWU6ICR7dm9sdW1lfSwgYWN0aXZpdHk6ICR7YWN0aXZpdHl9LCBhaXJpbmc6ICR7YWlyaW5nfWApO1xuXG4gIGlmIChtb2RlID09PSBcInNpbXBsZVwiKSB7XG4gICAgZGF0YSA9IGRhdGFGU2ltcGxlKHZvbHVtZSwgYWN0aXZpdHksIHVzZWRRLCBwZW9wbGUsIG1hc2ssIG1hc2tQb3NpdGlvbilcblxuICAgIGRyYXdTaW1wbGVQbG90KGRhdGEpXG4gIH0gZWxzZSBpZiAobW9kZSA9PT0gXCJleHBlcnRcIikge1xuICAgIGRhdGEgPSBkYXRhRih2b2x1bWUsIGFjdGl2aXR5LCBtYXhRLCBtYXNrLCBtYXNrUG9zaXRpb24pO1xuXG4gICAgLy8gaWYgKHZpc3R5cGUgPT09IFwic3VyZmFjZVwiKSB7XG4gICAgLy8gICBkcmF3U3VyZmFjZVBsb3QoZGF0YSk7XG4gICAgLy8gfSBlbHNlIHtcbiAgICAvLyAgIGRyYXdDb250b3VyUGxvdChkYXRhKTtcbiAgICAvLyB9XG5cbiAgICBkcmF3Q29udG91clBsb3QoZGF0YSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZHJhd1NpbXBsZVBsb3QoZGF0YSkge1xuICBkYXRhWzBdLm1vZGUgPSBcImxpbmVzXCI7XG4gIGRhdGFbMF0ubmFtZSA9IFwiUElSQSAoaW4gJSlcIlxuICBkYXRhWzBdLnlheGlzID0gXCJ5XCJcblxuICBkYXRhWzFdLnR5cGUgPSBcImJhclwiO1xuICBkYXRhWzFdLnlheGlzID0gXCJ5MlwiO1xuICBkYXRhWzFdLm5hbWUgPSBcIlBvdGVudGllbGwgQW5nZXN0ZWNrdGVcIlxuXG4gIGNvbnNvbGUubG9nKGRhdGEpXG5cbiAgdmFyIGxheW91dCA9IHtcbiAgICBzaGFyZVg6IHRydWUsXG4gICAgeGF4aXM6IHtcbiAgICAgICAgdGl0bGU6IHtcbiAgICAgICAgICB0ZXh0OiBcIlplaXQgaW4gU3R1bmRlblwiLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB5YXhpczoge1xuICAgICAgdGl0bGU6ICdQSVJBIChpbiAlKScsXG4gICAgICBvdmVybGF5aW5nOiAneTInLFxuICAgICAgdGlja3ZhbHM6IFsxMCwgMjAsIDMwLCA0MCwgNTAsIDYwLCA3MCwgODAsIDkwLCAxMDBdLFxuICAgICAgcmFuZ2U6IFswLCAxMDBdXG4gICAgfSxcbiAgICB5YXhpczI6IHtcbiAgICAgIHRpY2ttb2RlOiBcImF1dG9cIixcbiAgICAgIHRpdGxlOiAnQW56YWhsIHNpY2ggcG90ZW50aWVsbCBhbmdlc3RlY2t0ZXIgUGVyc29uZW4gKGdlcnVuZGV0KScsXG4gICAgICBzaWRlOiAncmlnaHQnLFxuICAgICAgcmFuZ2U6IFswLCBwZW9wbGUgLSAxXSAvLyB0aGUgaW5mZWN0ZWQgcGVyc29uIGNhbiBub3QgYmUgaW5mZWN0ZWQgYWdhaW5cbiAgICB9LFxuICAgIGxlZ2VuZDoge1xuICAgICAgICB5OiAxLFxuICAgICAgICB4OiAwLFxuICAgICAgfVxuICB9O1xuXG4gIFBsb3RseS5uZXdQbG90KGNoYXJ0RGl2LCBkYXRhLCBsYXlvdXQsIHsgcmVzcG9uc2l2ZTogdHJ1ZSB9KTtcbn1cblxuZnVuY3Rpb24gZHJhd1N1cmZhY2VQbG90KGRhdGEpIHtcbiAgZGF0YS50eXBlID0gXCJzdXJmYWNlXCI7XG4gIGRhdGEuY29udG91cnMgPSB7XG4gICAgejoge1xuICAgICAgc2hvdzogdHJ1ZSxcbiAgICAgIHVzZWNvbG9ybWFwOiB0cnVlLFxuICAgICAgaGlnaGxpZ2h0Y29sb3I6IFwiIzQyZjQ2MlwiLFxuICAgICAgcHJvamVjdDogeyB6OiB0cnVlIH0sXG4gICAgfSxcbiAgfTtcbiAgY29uc3QgbGF5b3V0ID0ge1xuICAgIHhheGlzOiB7XG4gICAgICB0aXRsZToge1xuICAgICAgICB0ZXh0OiBcIlplaXQgaW4gU3R1bmRlblwiLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHlheGlzOiB7XG4gICAgICB0aXRsZToge1xuICAgICAgICB0ZXh0OiBcIkZyaXNjaGx1ZnRtZW5nZSBpbiBtXjMvaFwiLFxuICAgICAgfSxcbiAgICB9LFxuICB9O1xuXG4gIGNvbnNvbGUubG9nKGRhdGEpO1xuICBQbG90bHkubmV3UGxvdChjaGFydERpdiwgW2RhdGFdLCBsYXlvdXQsIHsgcmVzcG9uc2l2ZTogdHJ1ZSB9KTtcbn1cblxuZnVuY3Rpb24gZHJhd0NvbnRvdXJQbG90KGRhdGEpIHtcbiAgZGF0YS50eXBlID0gXCJjb250b3VyXCI7XG5cbiAgZGF0YS5jb2xvcmJhciA9IHtcbiAgICB0aXRsZTogXCJQSVJBXCIsXG4gICAgdGlja3N1ZmZpeDogXCIlXCIsXG4gIH07XG5cbiAgZGF0YS5ob3ZlcnRlbXBsYXRlID0gXCJQSVJBOiAle3o6LjJmfSU8ZXh0cmE+PC9leHRyYT5cIjtcblxuICBjb25zdCBsYXlvdXQgPSB7XG4gICAgc2hvd2F4ZXNsYWJlbHM6IHRydWUsXG4gICAgeGF4aXNfdGl0bGU6IFwiWmVpdCBpbiBTdHVuZGVuXCIsXG4gICAgeGF4aXM6IHtcbiAgICAgIHRpdGxlOiB7XG4gICAgICAgIHRleHQ6IFwiWmVpdCBpbiBTdHVuZGVuXCIsXG4gICAgICB9LFxuICAgIH0sXG4gICAgeWF4aXM6IHtcbiAgICAgIHRpdGxlOiB7XG4gICAgICAgIHRleHQ6IFwiRnJpc2NobHVmdG1lbmdlIGluIG3Csy9oXCIsXG4gICAgICB9LFxuICAgIH0sXG4gIH07XG5cbiAgY29uc29sZS5sb2coZGF0YSk7XG4gIFBsb3RseS5uZXdQbG90KGNoYXJ0RGl2LCBbZGF0YV0sIGxheW91dCwgeyByZXNwb25zaXZlOiB0cnVlIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgbW9kZVVwZGF0ZWQ6IG1vZGVVcGRhdGVkLFxuICB2b2x1bWVVcGRhdGVkOiB2b2x1bWVVcGRhdGVkLFxuICBhY3Rpdml0eVVwZGF0ZWQ6IGFjdGl2aXR5VXBkYXRlZCxcbiAgbWFza1VwZGF0ZWQ6IG1hc2tVcGRhdGVkLFxuICBtYXNrUG9zaXRpb25VcGRhdGVkOiBtYXNrUG9zaXRpb25VcGRhdGVkLFxuICBhaXJpbmdVcGRhdGVkOiBhaXJpbmdVcGRhdGVkLFxuICB2aXN0eXBlVXBkYXRlZDogdmlzdHlwZVVwZGF0ZWQsXG4gIHBlb3BsZVVwZGF0ZWQ6IHBlb3BsZVVwZGF0ZWQsXG4gIGFkZFFVcGRhdGVkOiBhZGRRVXBkYXRlZCxcbiAgbWF4UVVwZGF0ZWQ6IG1heFFVcGRhdGVkXG59O1xuIiwiY29uc3Qgdm9sdW1lID0gcmVxdWlyZShcIi4vdm9sdW1lLmpzXCIpO1xuY29uc3QgZ3JhcGggPSByZXF1aXJlKFwiLi9ncmFwaC5qc1wiKTtcblxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtb2RlXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgLy8gaWYgZXhwZXJ0LCBoaWRlIHNpbXBsZSBodG1sIGVsZW1lbnRzXG4gIGlmIChldmVudC50YXJnZXQudmFsdWUgPT0gXCJleHBlcnRcIikge1xuICAgIHNpbXBlbEVsZW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInNpbXBsZVwiKVxuICAgIGZvciAoZWwgb2Ygc2ltcGVsRWxlbWVudHMpIHtcbiAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiXG4gICAgfVxuICAgIGV4cGVydEVsZW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImV4cGVydFwiKVxuICAgIGZvciAoZWwgb2YgZXhwZXJ0RWxlbWVudHMpIHtcbiAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIlxuICAgIH1cbiAgfSBlbHNlIGlmIChldmVudC50YXJnZXQudmFsdWUgPT0gXCJzaW1wbGVcIikge1xuICAgIGV4cGVydEVsZW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInNpbXBsZVwiKVxuICAgIGZvciAoZWwgb2YgZXhwZXJ0RWxlbWVudHMpIHtcbiAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIlxuICAgIH1cbiAgICBleHBlcnRFbGVtZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJleHBlcnRcIilcbiAgICBmb3IgKGVsIG9mIGV4cGVydEVsZW1lbnRzKSB7XG4gICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxuICAgIH1cbiAgfVxuICBncmFwaC5tb2RlVXBkYXRlZChldmVudC50YXJnZXQudmFsdWUpXG59KTtcblxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhY3Rpdml0eVwiKS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gIGdyYXBoLmFjdGl2aXR5VXBkYXRlZChldmVudC50YXJnZXQudmFsdWUpO1xufSk7XG5cbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFza1wiKS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gIGdyYXBoLm1hc2tVcGRhdGVkKGV2ZW50LnRhcmdldC52YWx1ZSk7XG59KTtcblxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXNrUG9zaXRpb25cIikuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGZ1bmN0aW9uIChldmVudCkge1xuICBncmFwaC5tYXNrUG9zaXRpb25VcGRhdGVkKGV2ZW50LnRhcmdldC52YWx1ZSk7XG59KTtcblxuLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aXN0eXBlXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbi8vICAgZ3JhcGgudmlzdHlwZVVwZGF0ZWQoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbi8vIH0pO1xuXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBlb3BsZVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIGlmIChldmVudC50YXJnZXQudmFsdWUgIT0gXCJcIikge1xuICAgICAgaWYgKGV2ZW50LnRhcmdldC52YWx1ZSA8IDEpIHtcbiAgICAgICAgZXZlbnQudGFyZ2V0LnZhbHVlID0gMVxuICAgICAgfSBlbHNlIGlmIChldmVudC50YXJnZXQudmFsdWUgPiAxMDApIHtcbiAgICAgICAgZXZlbnQudGFyZ2V0LnZhbHVlID0gMTAwXG4gICAgICB9XG4gICAgICBncmFwaC5wZW9wbGVVcGRhdGVkKGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gICAgfVxufSk7XG5cbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWlyaW5nXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBncmFwaC5haXJpbmdVcGRhdGVkKGV2ZW50LnRhcmdldC52YWx1ZSlcbn0pO1xuXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZFFcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmdW5jdGlvbihldmVudCkge1xuICAgIGlmIChldmVudC50YXJnZXQudmFsdWUgPCAwKSB7XG4gICAgICAgIGV2ZW50LnRhcmdldC52YWx1ZSA9IDBcbiAgICB9IGVsc2UgaWYgKGV2ZW50LnRhcmdldC52YWx1ZSA+IDUwMDApIHtcbiAgICAgICAgZXZlbnQudGFyZ2V0LnZhbHVlID0gNTAwMFxuICAgIH1cbiAgICBncmFwaC5hZGRRVXBkYXRlZChwYXJzZUludChldmVudC50YXJnZXQudmFsdWUpKVxufSk7XG5cbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWF4UVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LnRhcmdldC52YWx1ZSA8IDEwMCkge1xuICAgICAgICBldmVudC50YXJnZXQudmFsdWUgPSAxMDBcbiAgICB9IGVsc2UgaWYgKGV2ZW50LnRhcmdldC52YWx1ZSA+IDYwMDApIHtcbiAgICAgICAgZXZlbnQudGFyZ2V0LnZhbHVlID0gNjAwMFxuICAgIH1cbiAgICBncmFwaC5tYXhRVXBkYXRlZChldmVudC50YXJnZXQudmFsdWUpXG59KTsiLCJjb25zdCBncmFwaCA9IHJlcXVpcmUoXCIuL2dyYXBoLmpzXCIpO1xuXG5mdW5jdGlvbiBJbnB1dEVsZW1lbnQoZWxlbWVudCwgZGF0YSkge1xuICB0aGlzLmRhdGEgPSBkYXRhO1xuICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICBlbGVtZW50LnZhbHVlID0gZGF0YTtcbiAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIHRoaXMsIGZhbHNlKTtcbn1cblxuLyoqXG4gKiBDYWxsZWQgd2hlbiB0aGUgaW5wdXQgZWxlbWVudCBpcyB1cGRhdGVkLCBlLmcuLCBieSB1c2luZyBhcnJvd3Mgd2hlbiB0eXBlPW51bWJlciBvciBieSBwcmVzc2luZyBlbnRlclxuICovXG5JbnB1dEVsZW1lbnQucHJvdG90eXBlLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gIHN3aXRjaCAoZXZlbnQudHlwZSkge1xuICAgIGNhc2UgXCJjaGFuZ2VcIjpcbiAgICAgIHRoaXMuY2hhbmdlKHRoaXMuZWxlbWVudC52YWx1ZSk7XG4gICAgICB1cGRhdGVWb2x1bWUoKTtcbiAgfVxufTtcblxuLyoqXG4gKiBVcGRhdGUgdGhlIGVsZW1lbnQ7IHRoaXMgbWV0aG9kIHVwZGF0ZXMgdGhlIERPTSByZXByZXNlbnRhdGlvbiBhbmQgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uXG4gKi9cbklucHV0RWxlbWVudC5wcm90b3R5cGUuY2hhbmdlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gIHRoaXMuZGF0YSA9IHZhbHVlO1xuICB0aGlzLmVsZW1lbnQudmFsdWUgPSB2YWx1ZTtcbn07XG5cbmZ1bmN0aW9uIHVwZGF0ZVZvbHVtZSgpIHtcbiAgaWYgKGxlbmd0aEVsZW1lbnQuZGF0YSA+IDEwKSB7XG4gICAgbGVuZ3RoRWxlbWVudC5jaGFuZ2UoMTApXG4gIH1cbiAgaWYgKGxlbmd0aEVsZW1lbnQuZGF0YSA8IDEpIHtcbiAgICBsZW5ndGhFbGVtZW50LmNoYW5nZSgxKVxuICB9XG5cbiAgaWYgKHdpZHRoRWxlbWVudC5kYXRhID4gMTApIHtcbiAgICB3aWR0aEVsZW1lbnQuY2hhbmdlKDEwKVxuICB9XG4gIGlmICh3aWR0aEVsZW1lbnQuZGF0YSA8IDEpIHtcbiAgICB3aWR0aEVsZW1lbnQuY2hhbmdlKDEpXG4gIH1cblxuICBpZiAoaGVpZ2h0RWxlbWVudC5kYXRhID4gNSkge1xuICAgIGhlaWdodEVsZW1lbnQuY2hhbmdlKDUpXG4gIH1cbiAgaWYgKGhlaWdodEVsZW1lbnQuZGF0YSA8IDEpIHtcbiAgICBoZWlnaHRFbGVtZW50LmNoYW5nZSgxKVxuICB9XG5cbiAgY29uc3Qgdm9sdW1lID0gbGVuZ3RoRWxlbWVudC5kYXRhICogd2lkdGhFbGVtZW50LmRhdGEgKiBoZWlnaHRFbGVtZW50LmRhdGE7XG4gIGNvbnNvbGUubG9nKHZvbHVtZSk7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidm9sdW1lXCIpLnZhbHVlID0gdm9sdW1lO1xuICBncmFwaC52b2x1bWVVcGRhdGVkKHZvbHVtZSk7XG4gIHJldHVybiB2b2x1bWU7XG59XG5cbi8vIGl0IGlzIHBvc3NpYmxlIHRvIHVwZGF0ZSB0aGVzZSBlbGVtZW50cywgZS5nLiwgd2l0aCBsZW5ndGhFbGVtZW50LmNoYW5nZSgxMClcbnZhciBsZW5ndGhFbGVtZW50ID0gbmV3IElucHV0RWxlbWVudChcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsZW5ndGhcIiksXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGVuZ3RoXCIpLnZhbHVlXG4pO1xudmFyIHdpZHRoRWxlbWVudCA9IG5ldyBJbnB1dEVsZW1lbnQoXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwid2lkdGhcIiksXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwid2lkdGhcIikudmFsdWVcbik7XG52YXIgaGVpZ2h0RWxlbWVudCA9IG5ldyBJbnB1dEVsZW1lbnQoXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaGVpZ2h0XCIpLFxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImhlaWdodFwiKS52YWx1ZVxuKTtcbnVwZGF0ZVZvbHVtZSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZ2V0OiB1cGRhdGVWb2x1bWUsXG4gIGluaXQ6IHVwZGF0ZVZvbHVtZSxcbn07XG4iXSwic291cmNlUm9vdCI6IiJ9