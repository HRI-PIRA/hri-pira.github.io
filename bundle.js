!function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){const n={low_activity_lying:.45,low_activity:.54,singing:.65,mid_activity:.9,sports:1.2,test_1:.54,test_2:.65};function a(e){return"singing"==e?3500:"test_2"==e?2500:100}function o(e){const t=2.7618*(Math.exp(1.1761*3.35)-1),o=a("low_activity");return t*(a(e)/o)*(n[e]/n.low_activity)}function l(e,t,n,a){let o=390625*t+225625;return o*=Math.exp(t*a),o-=225625,o*=Math.exp(-t*a-.5776*a),o=390625*t-o,o*=e,o/(n*(225625*t+130321))}function i(e,t,a,i){0==t&&(t+=.01),console.log(`Calculating pira for: t=${e}, Q=${t}, activity=${a}, V=${i}`);const u=function(e,t){return e/t}(i,t),r=o(a),d=function(e,t){return e*Math.exp(-.5776*t)}(r,u),c=function(e,t){return t/e}(i,t);if(e>u){const o=l(r,c,t,u);let i=function(e,t,n,a,o){return e*(t*o+Math.exp(-t*o)-1/Math.E-1)/(a*t)}(d,c,0,t,e);return 1-Math.exp(-(o+i)*n[a])}{const o=l(r,c,t,e);return 1-Math.exp(-o*n[a])}}e.exports={prepareData:function(e,t,n){const a=e;let o=[],l=[],u=[];const r=n;for(let e=50;e<=r;e+=50){o=[];let n=[];for(let l=0;l<=6;l+=.1)p=i(l,e,t,a),p=Math.round(1e4*p)/100,n.push(p),o.push(l);l.push(e),u.push(n)}return{test:o,x:o,y:l,z:u}},prepareDataSimple:function(e,t,n,a){const o=e;console.log("Total airflow for all people in the room is (Q) is "+n);let l=[],u=[],r=[],d=[];for(let e=0;e<=6;e+=1){p=i(e,n,t,o),p=Math.round(1e4*p)/100,u.push(p),l.push(e),r.push(e),d.push(Math.round(p*(a-1)/100));for(let a=.1;a<1;a+=.1)p=i(e+a,n,t,o),p=Math.round(1e4*p)/100,u.push(p),l.push(e+a)}return[{x:l,y:u},{x:r,y:d}]},pira:i,f_qa:o,f_Q:function(e){return"very_bad"==e?10:"bad"==e?20:"ok"==e?30:"good"==e?40:"very_good"==e?60:void 0}}},function(e,t,n){const a=n(0).prepareData,o=n(0).prepareDataSimple,l=n(0).f_Q;var i=document.getElementById("volume").value,u=document.getElementById("activity").value,r=document.getElementById("mode").value,d=document.getElementById("airing").value,c=document.getElementById("people").value,s=-1,p=0,m=-1;y();var g=-1;v();const f=document.getElementById("chart");function y(){s=l(d)*c,m=s+p,document.getElementById("isQ").value=s,document.getElementById("usedQ").value=m}function v(){g=l("very_good")*c,document.getElementById("maxQ").value=g}function h(){console.log("The graph must be updated!"),console.log(`Volume: ${i}, activity: ${u}, airing: ${d}`),"simple"===r?(data=o(i,u,m,c),function(e){e[0].mode="lines",e[0].name="PIRA (in %)",e[0].yaxis="y",e[1].type="bar",e[1].yaxis="y2",e[1].name="Potentiell Angesteckte",console.log(e);var t={shareX:!0,xaxis:{title:{text:"Zeit in Stunden"}},yaxis:{title:"PIRA (in %)",overlaying:"y2",tickvals:[10,20,30,40,50,60,70,80,90,100],range:[0,100]},yaxis2:{tickmode:"auto",title:"Anzahl sich potentiell angesteckter Personen (gerundet)",side:"right",range:[0,c-1]},legend:{y:1,x:0}};Plotly.newPlot(f,e,t,{responsive:!0})}(data)):"expert"===r&&(data=a(i,u,g),function(e){e.type="contour",e.colorbar={title:"PIRA",ticksuffix:"%"},e.hovertemplate="PIRA: %{z:.2f}%<extra></extra>";console.log(e),Plotly.newPlot(f,[e],{showaxeslabels:!0,xaxis_title:"Zeit in Stunden",xaxis:{title:{text:"Zeit in Stunden"}},yaxis:{title:{text:"Frischluftmenge in mÂ³/h"}}},{responsive:!0})}(data))}e.exports={modeUpdated:function(e){r=e,h()},volumeUpdated:function(e){i=e,h()},activityUpdated:function(e){u=e,h()},airingUpdated:function(e){d=e,y(),h()},vistypeUpdated:function(e){vistype=e,h()},peopleUpdated:function(e){c=e,y(),v(),h()},addQUpdated:function(e){p=e,y(),h()},maxQUpdated:function(e){g=e,h()}}},function(e,t,n){n(3);const a=n(1);document.getElementById("mode").addEventListener("input",(function(e){if("expert"==e.target.value){for(el of(simpelElements=document.getElementsByClassName("simple"),simpelElements))el.style.display="none";for(el of(expertElements=document.getElementsByClassName("expert"),expertElements))el.style.display="block"}else if("simple"==e.target.value){for(el of(expertElements=document.getElementsByClassName("simple"),expertElements))el.style.display="block";for(el of(expertElements=document.getElementsByClassName("expert"),expertElements))el.style.display="none"}a.modeUpdated(e.target.value)})),document.getElementById("activity").addEventListener("input",(function(e){a.activityUpdated(e.target.value)})),document.getElementById("people").addEventListener("change",(function(e){""!=e.target.value&&(e.target.value<1?e.target.value=1:e.target.value>100&&(e.target.value=100),a.peopleUpdated(e.target.value))})),document.getElementById("airing").addEventListener("change",(function(e){a.airingUpdated(e.target.value)})),document.getElementById("addQ").addEventListener("change",(function(e){e.target.value<0?e.target.value=0:e.target.value>5e3&&(e.target.value=5e3),a.addQUpdated(parseInt(e.target.value))})),document.getElementById("maxQ").addEventListener("change",(function(e){e.target.value<100?e.target.value=100:e.target.value>6e3&&(e.target.value=6e3),a.maxQUpdated(e.target.value)}))},function(e,t,n){const a=n(1);function o(e,t){this.data=t,this.element=e,e.value=t,e.addEventListener("change",this,!1)}function l(){i.data>10&&i.change(10),i.data<1&&i.change(1),u.data>10&&i.change(10),u.data<1&&i.change(1),r.data>5&&i.change(5),r.data<1&&i.change(1);const e=i.data*u.data*r.data;return console.log(e),document.getElementById("volume").value=e,a.volumeUpdated(e),e}o.prototype.handleEvent=function(e){switch(e.type){case"change":this.change(this.element.value),l()}},o.prototype.change=function(e){this.data=e,this.element.value=e};var i=new o(document.getElementById("length"),document.getElementById("length").value),u=new o(document.getElementById("width"),document.getElementById("width").value),r=new o(document.getElementById("height"),document.getElementById("height").value);l(),e.exports={get:l,init:l}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RhdGEuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyYXBoLmpzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdm9sdW1lLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiUWIiLCJsb3dfYWN0aXZpdHlfbHlpbmciLCJsb3dfYWN0aXZpdHkiLCJzaW5naW5nIiwibWlkX2FjdGl2aXR5Iiwic3BvcnRzIiwidGVzdF8xIiwidGVzdF8yIiwiZl9FIiwiYWN0aXZpdHkiLCJmX3FhIiwicV8wIiwiTWF0aCIsImV4cCIsIkVfMCIsImZfQyIsInFhIiwiQUNIIiwiUSIsInBpcmEiLCJWIiwiY29uc29sZSIsImxvZyIsInRhdSIsImZfdGF1IiwicWF0YXUiLCJmX3FhdGF1IiwiZl9BQ0giLCJDIiwiQ3RhdSIsIkUiLCJmX0N0YXUiLCJwcmVwYXJlRGF0YSIsInZvbHVtZSIsIm1heFEiLCJ4QSIsInlBIiwicm93cyIsIm1heCIsInJvdyIsInJvdW5kIiwicHVzaCIsInRlc3QiLCJ4IiwieSIsInoiLCJwcmVwYXJlRGF0YVNpbXBsZSIsInBlb3BsZSIsIngyIiwieTIiLCJzdCIsImZfUSIsImFpcmluZyIsImRhdGFGIiwiZGF0YUZTaW1wbGUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaXNRIiwiYWRkUSIsInVzZWRRIiwiY2FsY3VsYXRlVXNlZFEiLCJjYWxjdWxhdGVNYXhRIiwiY2hhcnREaXYiLCJ1cGRhdGVHcmFwaCIsImRhdGEiLCJ5YXhpcyIsInR5cGUiLCJsYXlvdXQiLCJzaGFyZVgiLCJ4YXhpcyIsInRpdGxlIiwidGV4dCIsIm92ZXJsYXlpbmciLCJ0aWNrdmFscyIsInJhbmdlIiwieWF4aXMyIiwidGlja21vZGUiLCJzaWRlIiwibGVnZW5kIiwiUGxvdGx5IiwibmV3UGxvdCIsInJlc3BvbnNpdmUiLCJkcmF3U2ltcGxlUGxvdCIsImNvbG9yYmFyIiwidGlja3N1ZmZpeCIsImhvdmVydGVtcGxhdGUiLCJzaG93YXhlc2xhYmVscyIsInhheGlzX3RpdGxlIiwiZHJhd0NvbnRvdXJQbG90IiwibW9kZVVwZGF0ZWQiLCJuZXdNb2RlIiwidm9sdW1lVXBkYXRlZCIsIm5ld1ZvbHVtZSIsImFjdGl2aXR5VXBkYXRlZCIsIm5ld0FjdGl2aXR5IiwiYWlyaW5nVXBkYXRlZCIsIm5ld0FpcmluZyIsInZpc3R5cGVVcGRhdGVkIiwibmV3VmlzVHlwZSIsInZpc3R5cGUiLCJwZW9wbGVVcGRhdGVkIiwibmV3UGVvcGxlIiwiYWRkUVVwZGF0ZWQiLCJuZXdBZGRRIiwibWF4UVVwZGF0ZWQiLCJuZXdNYXhRIiwiZ3JhcGgiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJ0YXJnZXQiLCJlbCIsInNpbXBlbEVsZW1lbnRzIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInN0eWxlIiwiZGlzcGxheSIsImV4cGVydEVsZW1lbnRzIiwicGFyc2VJbnQiLCJJbnB1dEVsZW1lbnQiLCJlbGVtZW50IiwidGhpcyIsInVwZGF0ZVZvbHVtZSIsImxlbmd0aEVsZW1lbnQiLCJjaGFuZ2UiLCJ3aWR0aEVsZW1lbnQiLCJoZWlnaHRFbGVtZW50IiwiaGFuZGxlRXZlbnQiLCJpbml0Il0sIm1hcHBpbmdz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S0FJdEUsT0FIQTNDLFFBQVFDLElBQUlXLEdBQ1pzQixTQUFTQyxlQUFlLFVBQVV2RSxNQUFRZ0QsRUFDMUN5RSxFQUFNZixjQUFjMUQsR0FDYkEsRUExQ1RvRixFQUFhekgsVUFBVWlJLFlBQWMsU0FBVWpCLEdBQzdDLE9BQVFBLEVBQU0xQyxNQUNaLElBQUssU0FDSHFELEtBQUtHLE9BQU9ILEtBQUtELFFBQVFySSxPQUN6QnVJLE1BT05ILEVBQWF6SCxVQUFVOEgsT0FBUyxTQUFVekksR0FDeENzSSxLQUFLdkQsS0FBTy9FLEVBQ1pzSSxLQUFLRCxRQUFRckksTUFBUUEsR0FpQ3ZCLElBQUl3SSxFQUFnQixJQUFJSixFQUN0QjlELFNBQVNDLGVBQWUsVUFDeEJELFNBQVNDLGVBQWUsVUFBVXZFLE9BRWhDMEksRUFBZSxJQUFJTixFQUNyQjlELFNBQVNDLGVBQWUsU0FDeEJELFNBQVNDLGVBQWUsU0FBU3ZFLE9BRS9CMkksRUFBZ0IsSUFBSVAsRUFDdEI5RCxTQUFTQyxlQUFlLFVBQ3hCRCxTQUFTQyxlQUFlLFVBQVV2RSxPQUVwQ3VJLElBRUF6SixFQUFPRCxRQUFVLENBQ2ZlLElBQUsySSxFQUNMTSxLQUFNTiIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMik7XG4iLCJjb25zdCBRYiA9IHtcbiAgbG93X2FjdGl2aXR5X2x5aW5nOiAwLjQ1LFxuICBsb3dfYWN0aXZpdHk6IDAuNTQsXG4gIHNpbmdpbmc6IDAuNjUsXG4gIG1pZF9hY3Rpdml0eTogMC45LFxuICBzcG9ydHM6IDEuMixcbiAgdGVzdF8xOiAwLjU0LCAvLyB2YWx1ZSB1c2VkIGluIHRlc3RfZGF0YS9QSVJfTW9kZWxsLmpwZ1xuICB0ZXN0XzI6IDAuNjUsIC8vIHZhbHVlIHVzZWQgaW4gdGVzdF9kYXRhL1BJUl9Nb2RlbGxfYWt0LmpwZyBhcyBpbnN0cnVjdGVkIGJ5IG1haWxcbn07XG5cbmZ1bmN0aW9uIGZfdGF1KFYsIFEpIHtcbiAgcmV0dXJuIFYgLyBRO1xufVxuXG5mdW5jdGlvbiBmX0UoYWN0aXZpdHkpIHtcbiAgaWYgKGFjdGl2aXR5ID09IFwic2luZ2luZ1wiKSB7XG4gICAgcmV0dXJuIDM1MDA7XG4gIH0gZWxzZSBpZiAoYWN0aXZpdHkgPT1cInRlc3RfMlwiKSB7XG4gICAgcmV0dXJuIDI1MDA7IC8vIHZhbHVlIHJlY2VpdmVkIHZpYSBtYWlsIGZyb20ga3JpZWdlbFxuICB9IGVsc2UgcmV0dXJuIDEwMDtcbn1cblxuZnVuY3Rpb24gZl9RKGFpcmluZykge1xuICBpZiAoYWlyaW5nID09IFwidmVyeV9iYWRcIikge1xuICAgIHJldHVybiAxMDtcbiAgfSBlbHNlIGlmIChhaXJpbmcgPT0gXCJiYWRcIikge1xuICAgIHJldHVybiAyMDtcbiAgfSBlbHNlIGlmIChhaXJpbmcgPT0gXCJva1wiKSB7XG4gICAgcmV0dXJuIDMwO1xuICB9IGVsc2UgaWYgKGFpcmluZyA9PSBcImdvb2RcIikge1xuICAgIHJldHVybiA0MDtcbiAgfSBlbHNlIGlmIChhaXJpbmcgPT0gXCJ2ZXJ5X2dvb2RcIikge1xuICAgIHJldHVybiA2MDtcbiAgfVxufVxuXG5mdW5jdGlvbiBmX3FhKGFjdGl2aXR5KSB7XG4gIGNvbnN0IFJfMCA9IDMuMzU7XG4gIGNvbnN0IHFfMCA9IDIuNzYxOCAqIChNYXRoLmV4cCgxLjE3NjEgKiBSXzApIC0gMSk7XG5cbiAgY29uc3QgRV8wID0gZl9FKFwibG93X2FjdGl2aXR5XCIpO1xuICBjb25zdCBFID0gZl9FKGFjdGl2aXR5KTtcblxuICByZXR1cm4gcV8wICogKEUgLyBFXzApICogKFFiW2FjdGl2aXR5XSAvIFFiLmxvd19hY3Rpdml0eSk7XG59XG5cbmZ1bmN0aW9uIGZfcWF0YXUocWEsIHRhdSkge1xuICByZXR1cm4gcWEgKiBNYXRoLmV4cCgtMC41Nzc2ICogdGF1KTtcbn1cblxuZnVuY3Rpb24gZl9BQ0goViwgUSkge1xuICByZXR1cm4gUSAvIFY7XG59XG5cbmZ1bmN0aW9uIGZfQyhxYSwgQUNILCBRLCB0KSB7XG4gIC8vIG51bWVyYXRvclxuXG4gIGxldCBuID0gMzkwNjI1ICogQUNIICsgMjI1NjI1O1xuICAvLyBjb25zb2xlLmxvZyhuKTtcbiAgbiA9IG4gKiBNYXRoLmV4cChBQ0ggKiB0KTtcbiAgLy8gY29uc29sZS5sb2cobik7XG4gIG4gPSBuIC0gMjI1NjI1O1xuICAvLyBjb25zb2xlLmxvZyhuKTtcbiAgbiA9IG4gKiBNYXRoLmV4cCgtQUNIICogdCAtICgzNjEgLyA2MjUpICogdCk7XG4gIC8vIGNvbnNvbGUubG9nKG4pO1xuICBuID0gMzkwNjI1ICogQUNIIC0gbjtcbiAgLy8gY29uc29sZS5sb2cobik7XG4gIG4gPSBxYSAqIG47XG5cbiAgLy8gY29uc29sZS5sb2cobik7XG4gIC8vIGNvbnNvbGUubG9nKHFhKTtcbiAgLy8gY29uc29sZS5sb2coQUNIKTtcbiAgLy8gY29uc29sZS5sb2coUSk7XG4gIC8vIGNvbnNvbGUubG9nKFwidDogXCIgKyB0KTtcblxuICAvLyBjb25zb2xlLmxvZyhuKTtcbiAgLy8gZGVub21pbmF0b3JcbiAgbGV0IGQgPSBRICogKDIyNTYyNSAqIEFDSCArIDEzMDMyMSk7XG4gIC8vIGNvbnNvbGUubG9nKGQpO1xuXG4gIHJldHVybiBuIC8gZDtcbn1cblxuZnVuY3Rpb24gZl9DdGF1KHFhdGF1LCBBQ0gsIHRhdSwgUSwgdCkge1xuICAvLyBudW1lcmF0b3JcbiAgLy8gbGV0IG4gPSBxYXRhdSAqIE1hdGguZXhwKC1BQ0ggKiAodCArIHRhdSkpICogKEFDSCAqICh0IC0gdGF1KSAqIE1hdGguZXhwKEFDSCAqICh0ICsgdGF1KSkgLSBNYXRoLmV4cChBQ0ggKiB0KSArIE1hdGguZXhwKEFDSCAqIHRhdSkpO1xuICAvLyBsZXQgbiA9IHFhdGF1ICogTWF0aC5leHAoLUFDSCAqIHQgLSAxKSAqICgoQUNIICogdCAtIDEpICogTWF0aC5leHAoQUNIICogdCArIDEpIC0gTWF0aC5leHAoQUNIICogdCkgKyBNYXRoLmV4cCgxKSk7XG4gIGxldCBuID0gcWF0YXUgKiAoQUNIICogdCArIE1hdGguZXhwKC1BQ0ggKiB0KSAtIDEvTWF0aC5FIC0gMSkgLy8gdGhpcyBpcyBhIHNpbXBsaWZpY2F0aW9uIG9mIHRoZSBhYm92ZSBnZW5lcmF0ZWQgYnkgd29sZnJhbSBhbHBoYVxuXG4gIC8vIGRlbm9taW5hdG9yXG4gIGxldCBkID0gUSAqIEFDSDtcblxuICByZXR1cm4gbiAvIGQ7XG59XG5cbmZ1bmN0aW9uIHBpcmEodCwgUSwgYWN0aXZpdHksIFYpIHtcbiAgaWYgKFEgPT0gMCkgUSArPSAwLjAxO1xuICBjb25zb2xlLmxvZyhgQ2FsY3VsYXRpbmcgcGlyYSBmb3I6IHQ9JHt0fSwgUT0ke1F9LCBhY3Rpdml0eT0ke2FjdGl2aXR5fSwgVj0ke1Z9YCk7XG4gIGNvbnN0IHRhdSA9IGZfdGF1KFYsIFEpO1xuICAvLyBjb25zb2xlLmxvZyhcInRhdTogXCIgKyB0YXUpO1xuICBjb25zdCBxYSA9IGZfcWEoYWN0aXZpdHkpO1xuICAvLyBjb25zb2xlLmxvZyhcInFhOiBcIiArIHFhKTtcbiAgY29uc3QgcWF0YXUgPSBmX3FhdGF1KHFhLCB0YXUpO1xuICAvLyBjb25zb2xlLmxvZyhcInFhdGF1OiBcIiArIHFhdGF1KTtcbiAgY29uc3QgQUNIID0gZl9BQ0goViwgUSk7XG4gIC8vIGNvbnNvbGUubG9nKFwiQUNIOiBcIiArIEFDSCk7XG4gIC8vIGNvbnNvbGUubG9nKFwiUWI6IFwiICsgUWJbYWN0aXZpdHldKTtcblxuICBpZiAodCA+IHRhdSkge1xuICAgIGNvbnN0IEMgPSBmX0MocWEsIEFDSCwgUSwgdGF1KTtcbiAgICAvLyBjb25zb2xlLmxvZyhDKTtcbiAgICBsZXQgQ3RhdSA9IGZfQ3RhdShxYXRhdSwgQUNILCB0YXUsIFEsIHQpO1xuICAgIC8vIGlmIChpc05hTihDdGF1KSkge1xuICAgIC8vICAgICBDdGF1ID0gMVxuICAgIC8vIH1cbiAgICAvLyBjb25zb2xlLmxvZyhDdGF1KTtcbiAgICByZXR1cm4gMSAtIE1hdGguZXhwKC0oQyArIEN0YXUpICogUWJbYWN0aXZpdHldKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBDID0gZl9DKHFhLCBBQ0gsIFEsIHQpO1xuICAgIC8vIGNvbnNvbGUubG9nKEMpO1xuICAgIHJldHVybiAxIC0gTWF0aC5leHAoLUMgKiBRYlthY3Rpdml0eV0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHByZXBhcmVEYXRhKHZvbHVtZSwgYWN0aXZpdHksIG1heFEpIHtcbiAgY29uc3QgViA9IHZvbHVtZTtcblxuICBsZXQgeEEgPSBbXTtcbiAgbGV0IHlBID0gW107XG4gIGxldCByb3dzID0gW107XG5cbiAgY29uc3QgbWluID0gNTBcbiAgY29uc3QgbWF4ID0gbWF4UVxuXG4gIGZvciAobGV0IFEgPSBtaW47IFEgPD0gbWF4OyBRICs9IDUwKSB7XG4gICAgeEEgPSBbXTtcbiAgICBsZXQgcm93ID0gW107XG5cbiAgICBmb3IgKGxldCB0ID0gMC4wOyB0IDw9IDYuMDsgdCArPSAwLjEpIHtcbiAgICAgIC8vIGhvdXJzLCsgaW5jcmVtZW50cyBpbiBob3Vyc1xuICAgICAgcCA9IHBpcmEodCwgUSwgYWN0aXZpdHksIFYpO1xuICAgICAgLy9jb25zb2xlLmxvZyhcIlBpcmEgZm9yIHQ9XCIgKyB0ICsgXCIsIFE9XCIgKyBRICsgXCI6IFwiICsgcCk7XG4gICAgICBwID0gTWF0aC5yb3VuZChwICogMTAwMDApIC8gMTAwO1xuICAgICAgLy9pZiAodCA9PSA2ICYmIFEgPT0gNTAwKSBwID0gMTAwO1xuICAgIC8vICAgaWYgKGlzTmFOKHApIHx8IHAgPj0gMTAwKSB7XG4gICAgLy8gICAgICAgcCA9IDBcbiAgICAvLyAgIH1cbiAgICAgIHJvdy5wdXNoKHApO1xuICAgICAgeEEucHVzaCh0KTtcbiAgICB9XG4gICAgeUEucHVzaChRKTtcbiAgICByb3dzLnB1c2gocm93KTtcbiAgfVxuXG4gIC8vIGZvciAobGV0IG1pbnV0ZSA9IDA7IG1pbnV0ZSA8PSAzNjA7IG1pbnV0ZSArPSAzMCkge1xuICAvLyAgICAgbGV0IHQgPSBtaW51dGUgLyA2MDtcbiAgLy8gICAgIGxldCBtID0gbWludXRlICUgNjA7XG4gIC8vICAgICBsZXQgaCA9IChtaW51dGUgLSBtKSAvIDYwO1xuICAvLyAgICAgbGV0IHRpbWUgPSBoICsgXCI6XCIgKyBtICsgXCJoXCI7XG4gIC8vIH1cblxuICByZXR1cm4ge1xuICAgIHRlc3Q6IHhBLFxuICAgIHg6IHhBLFxuICAgIHk6IHlBLFxuICAgIHo6IHJvd3NcbiAgfTtcbn1cblxuZnVuY3Rpb24gcHJlcGFyZURhdGFTaW1wbGUodm9sdW1lLCBhY3Rpdml0eSwgUSwgcGVvcGxlKSB7XG4gIGNvbnN0IFYgPSB2b2x1bWU7XG4gXG4gIGNvbnNvbGUubG9nKGBUb3RhbCBhaXJmbG93IGZvciBhbGwgcGVvcGxlIGluIHRoZSByb29tIGlzIChRKSBpcyAke1F9YClcblxuICBsZXQgeCA9IFtdO1xuICBsZXQgeSA9IFtdOyAvLyBwaXJhXG4gIGxldCB4MiA9IFtdOyAvLyBvbmx5IHRpbWVzdGFtcHMgZm9yIHRoZSBmdWxsIGhvdXJcbiAgbGV0IHkyID0gW107IC8vIGluZmVjdGVkIHBlb3BsZVxuXG4gIGZvciAobGV0IHQgPSAwOyB0IDw9IDY7IHQgKz0gMSkge1xuICAgIHAgPSBwaXJhKHQsIFEsIGFjdGl2aXR5LCBWKTtcbiAgICBwID0gTWF0aC5yb3VuZChwICogMTAwMDApIC8gMTAwO1xuICAgIHkucHVzaChwKTtcbiAgICB4LnB1c2godCk7XG4gICAgeDIucHVzaCh0KVxuICAgIHkyLnB1c2goTWF0aC5yb3VuZChwICogKHBlb3BsZSAtIDEpLyAxMDApKTsgLy8gdGhlIGluZmVjdGVkIHBlcnNvbiBjYW5ub3QgYmUgaW5mZWN0ZWQgYWdhaW5cbiAgICAvLyBpbnRlcm1lZGlhdGUgc3RlcHMgZm9yIHBpcmEgb25seSwgbm90IGZvciBuby4gaW5mZWN0ZWQgcGVvcGxlXG4gICAgZm9yIChsZXQgc3QgPSAwLjE7IHN0IDwgMTsgc3QgKz0gMC4xKSB7XG4gICAgICAgIHAgPSBwaXJhKHQgKyBzdCwgUSwgYWN0aXZpdHksIFYpO1xuICAgICAgICBwID0gTWF0aC5yb3VuZChwICogMTAwMDApIC8gMTAwO1xuICAgICAgICB5LnB1c2gocCk7XG4gICAgICAgIHgucHVzaCh0ICsgc3QpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBbXG4gICAge1xuICAgICAgeDogeCxcbiAgICAgIHk6IHlcbiAgICB9LFxuICAgIHtcbiAgICAgIHg6IHgyLFxuICAgICAgeTogeTJcbiAgICB9XG4gIF07XG5cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgcHJlcGFyZURhdGE6IHByZXBhcmVEYXRhLFxuICAgIHByZXBhcmVEYXRhU2ltcGxlOiBwcmVwYXJlRGF0YVNpbXBsZSxcbiAgICBwaXJhOiBwaXJhLFxuICAgIGZfcWE6IGZfcWEsXG4gICAgZl9ROiBmX1Fcbn1cbiIsImNvbnN0IGRhdGFGID0gcmVxdWlyZShcIi4vZGF0YS5qc1wiKS5wcmVwYXJlRGF0YTtcbmNvbnN0IGRhdGFGU2ltcGxlID0gcmVxdWlyZShcIi4vZGF0YS5qc1wiKS5wcmVwYXJlRGF0YVNpbXBsZTtcbmNvbnN0IGZfUSA9IHJlcXVpcmUoXCIuL2RhdGEuanNcIikuZl9RO1xuLy8gY29uc3QgUGxvdGx5ID0gcmVxdWlyZShcInBsb3RseS5qcy1nbDNkLWRpc3QtbWluXCIpIC8vIG5vdCBpbnN0YWxsZWQgdmlhIG5wbSB0byByZWR1Y2UgYnVuZGxlIHNpemVcblxudmFyIHZvbHVtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidm9sdW1lXCIpLnZhbHVlO1xudmFyIGFjdGl2aXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhY3Rpdml0eVwiKS52YWx1ZTtcbi8vIHZhciB2aXN0eXBlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aXN0eXBlXCIpLnZhbHVlO1xudmFyIG1vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1vZGVcIikudmFsdWU7IC8vIHNpbXBsZSBvciBleHBlcnRcbnZhciBhaXJpbmcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFpcmluZ1wiKS52YWx1ZTsgLy8gaW4gdGhlIGZvcm11bGEsIHRoaXMgaXMgUVxudmFyIHBlb3BsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGVvcGxlXCIpLnZhbHVlO1xudmFyIGlzUSA9IC0xXG52YXIgYWRkUSA9IDBcbnZhciB1c2VkUSA9IC0xXG5jYWxjdWxhdGVVc2VkUSgpO1xudmFyIG1heFEgPSAtMTtcbmNhbGN1bGF0ZU1heFEoKTtcblxuY29uc3QgY2hhcnREaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNoYXJ0XCIpO1xuXG5mdW5jdGlvbiBtb2RlVXBkYXRlZChuZXdNb2RlKSB7XG4gIG1vZGUgPSBuZXdNb2RlO1xuICB1cGRhdGVHcmFwaCgpO1xufVxuXG5mdW5jdGlvbiB2b2x1bWVVcGRhdGVkKG5ld1ZvbHVtZSkge1xuICB2b2x1bWUgPSBuZXdWb2x1bWU7XG4gIHVwZGF0ZUdyYXBoKCk7XG59XG5cbmZ1bmN0aW9uIGFjdGl2aXR5VXBkYXRlZChuZXdBY3Rpdml0eSkge1xuICBhY3Rpdml0eSA9IG5ld0FjdGl2aXR5O1xuICB1cGRhdGVHcmFwaCgpO1xufVxuXG5mdW5jdGlvbiBhaXJpbmdVcGRhdGVkKG5ld0FpcmluZykge1xuICBhaXJpbmcgPSBuZXdBaXJpbmc7XG4gIGNhbGN1bGF0ZVVzZWRRKClcbiAgdXBkYXRlR3JhcGgoKTtcbn1cblxuZnVuY3Rpb24gcGVvcGxlVXBkYXRlZChuZXdQZW9wbGUpIHtcbiAgcGVvcGxlID0gbmV3UGVvcGxlO1xuICBjYWxjdWxhdGVVc2VkUSgpXG4gIGNhbGN1bGF0ZU1heFEoKVxuICB1cGRhdGVHcmFwaCgpO1xufVxuXG5mdW5jdGlvbiB2aXN0eXBlVXBkYXRlZChuZXdWaXNUeXBlKSB7XG4gIHZpc3R5cGUgPSBuZXdWaXNUeXBlO1xuICB1cGRhdGVHcmFwaCgpO1xufVxuXG5mdW5jdGlvbiBhZGRRVXBkYXRlZChuZXdBZGRRKSB7XG4gIGFkZFEgPSBuZXdBZGRRO1xuICBjYWxjdWxhdGVVc2VkUSgpO1xuICB1cGRhdGVHcmFwaCgpO1xufVxuXG4vLyByZWNhbGN1bGF0ZSB1c2VkUSBiYXNlZCBvbiBhaXJpbmcgYW5kIHBlb3BsZVxuZnVuY3Rpb24gY2FsY3VsYXRlVXNlZFEoKSB7XG4gIGlzUSA9IGZfUShhaXJpbmcpICogcGVvcGxlO1xuICB1c2VkUSA9IGlzUSArIGFkZFE7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaXNRXCIpLnZhbHVlID0gaXNRXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXNlZFFcIikudmFsdWUgPSB1c2VkUVxufVxuXG4vLyBtYXhRIHVwZGF0ZWQgYnkgbWFudWFsIHVzZXIgaW5wdXRcbmZ1bmN0aW9uIG1heFFVcGRhdGVkKG5ld01heFEpIHtcbiAgbWF4USA9IG5ld01heFFcbiAgdXBkYXRlR3JhcGgoKVxufVxuXG4vLyByZWNhbGN1bGF0ZSBtYXhRIGJhc2VkIG9uIHBlb3BsZSBhbmQgdmVyeV9nb29kIGFpcmluZ1xuZnVuY3Rpb24gY2FsY3VsYXRlTWF4USgpIHtcbiAgbWF4USA9IGZfUShcInZlcnlfZ29vZFwiKSAqIHBlb3BsZVxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1heFFcIikudmFsdWUgPSBtYXhRXG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUdyYXBoKCkge1xuICBjb25zb2xlLmxvZyhcIlRoZSBncmFwaCBtdXN0IGJlIHVwZGF0ZWQhXCIpO1xuICBjb25zb2xlLmxvZyhgVm9sdW1lOiAke3ZvbHVtZX0sIGFjdGl2aXR5OiAke2FjdGl2aXR5fSwgYWlyaW5nOiAke2FpcmluZ31gKTtcblxuICBpZiAobW9kZSA9PT0gXCJzaW1wbGVcIikge1xuICAgIGRhdGEgPSBkYXRhRlNpbXBsZSh2b2x1bWUsIGFjdGl2aXR5LCB1c2VkUSwgcGVvcGxlKVxuXG4gICAgZHJhd1NpbXBsZVBsb3QoZGF0YSlcbiAgfSBlbHNlIGlmIChtb2RlID09PSBcImV4cGVydFwiKSB7XG4gICAgZGF0YSA9IGRhdGFGKHZvbHVtZSwgYWN0aXZpdHksIG1heFEpO1xuXG4gICAgLy8gaWYgKHZpc3R5cGUgPT09IFwic3VyZmFjZVwiKSB7XG4gICAgLy8gICBkcmF3U3VyZmFjZVBsb3QoZGF0YSk7XG4gICAgLy8gfSBlbHNlIHtcbiAgICAvLyAgIGRyYXdDb250b3VyUGxvdChkYXRhKTtcbiAgICAvLyB9XG5cbiAgICBkcmF3Q29udG91clBsb3QoZGF0YSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZHJhd1NpbXBsZVBsb3QoZGF0YSkge1xuICBkYXRhWzBdLm1vZGUgPSBcImxpbmVzXCI7XG4gIGRhdGFbMF0ubmFtZSA9IFwiUElSQSAoaW4gJSlcIlxuICBkYXRhWzBdLnlheGlzID0gXCJ5XCJcblxuICBkYXRhWzFdLnR5cGUgPSBcImJhclwiO1xuICBkYXRhWzFdLnlheGlzID0gXCJ5MlwiO1xuICBkYXRhWzFdLm5hbWUgPSBcIlBvdGVudGllbGwgQW5nZXN0ZWNrdGVcIlxuXG4gIGNvbnNvbGUubG9nKGRhdGEpXG5cbiAgdmFyIGxheW91dCA9IHtcbiAgICBzaGFyZVg6IHRydWUsXG4gICAgeGF4aXM6IHtcbiAgICAgICAgdGl0bGU6IHtcbiAgICAgICAgICB0ZXh0OiBcIlplaXQgaW4gU3R1bmRlblwiLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB5YXhpczoge1xuICAgICAgdGl0bGU6ICdQSVJBIChpbiAlKScsXG4gICAgICBvdmVybGF5aW5nOiAneTInLFxuICAgICAgdGlja3ZhbHM6IFsxMCwgMjAsIDMwLCA0MCwgNTAsIDYwLCA3MCwgODAsIDkwLCAxMDBdLFxuICAgICAgcmFuZ2U6IFswLCAxMDBdXG4gICAgfSxcbiAgICB5YXhpczI6IHtcbiAgICAgIHRpY2ttb2RlOiBcImF1dG9cIixcbiAgICAgIHRpdGxlOiAnQW56YWhsIHNpY2ggcG90ZW50aWVsbCBhbmdlc3RlY2t0ZXIgUGVyc29uZW4gKGdlcnVuZGV0KScsXG4gICAgICBzaWRlOiAncmlnaHQnLFxuICAgICAgcmFuZ2U6IFswLCBwZW9wbGUgLSAxXSAvLyB0aGUgaW5mZWN0ZWQgcGVyc29uIGNhbiBub3QgYmUgaW5mZWN0ZWQgYWdhaW5cbiAgICB9LFxuICAgIGxlZ2VuZDoge1xuICAgICAgICB5OiAxLFxuICAgICAgICB4OiAwLFxuICAgICAgfVxuICB9O1xuXG4gIFBsb3RseS5uZXdQbG90KGNoYXJ0RGl2LCBkYXRhLCBsYXlvdXQsIHsgcmVzcG9uc2l2ZTogdHJ1ZSB9KTtcbn1cblxuZnVuY3Rpb24gZHJhd1N1cmZhY2VQbG90KGRhdGEpIHtcbiAgZGF0YS50eXBlID0gXCJzdXJmYWNlXCI7XG4gIGRhdGEuY29udG91cnMgPSB7XG4gICAgejoge1xuICAgICAgc2hvdzogdHJ1ZSxcbiAgICAgIHVzZWNvbG9ybWFwOiB0cnVlLFxuICAgICAgaGlnaGxpZ2h0Y29sb3I6IFwiIzQyZjQ2MlwiLFxuICAgICAgcHJvamVjdDogeyB6OiB0cnVlIH0sXG4gICAgfSxcbiAgfTtcbiAgY29uc3QgbGF5b3V0ID0ge1xuICAgIHhheGlzOiB7XG4gICAgICB0aXRsZToge1xuICAgICAgICB0ZXh0OiBcIlplaXQgaW4gU3R1bmRlblwiLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHlheGlzOiB7XG4gICAgICB0aXRsZToge1xuICAgICAgICB0ZXh0OiBcIkZyaXNjaGx1ZnRtZW5nZSBpbiBtXjMvaFwiLFxuICAgICAgfSxcbiAgICB9LFxuICB9O1xuXG4gIGNvbnNvbGUubG9nKGRhdGEpO1xuICBQbG90bHkubmV3UGxvdChjaGFydERpdiwgW2RhdGFdLCBsYXlvdXQsIHsgcmVzcG9uc2l2ZTogdHJ1ZSB9KTtcbn1cblxuZnVuY3Rpb24gZHJhd0NvbnRvdXJQbG90KGRhdGEpIHtcbiAgZGF0YS50eXBlID0gXCJjb250b3VyXCI7XG5cbiAgZGF0YS5jb2xvcmJhciA9IHtcbiAgICB0aXRsZTogXCJQSVJBXCIsXG4gICAgdGlja3N1ZmZpeDogXCIlXCIsXG4gIH07XG5cbiAgZGF0YS5ob3ZlcnRlbXBsYXRlID0gXCJQSVJBOiAle3o6LjJmfSU8ZXh0cmE+PC9leHRyYT5cIjtcblxuICBjb25zdCBsYXlvdXQgPSB7XG4gICAgc2hvd2F4ZXNsYWJlbHM6IHRydWUsXG4gICAgeGF4aXNfdGl0bGU6IFwiWmVpdCBpbiBTdHVuZGVuXCIsXG4gICAgeGF4aXM6IHtcbiAgICAgIHRpdGxlOiB7XG4gICAgICAgIHRleHQ6IFwiWmVpdCBpbiBTdHVuZGVuXCIsXG4gICAgICB9LFxuICAgIH0sXG4gICAgeWF4aXM6IHtcbiAgICAgIHRpdGxlOiB7XG4gICAgICAgIHRleHQ6IFwiRnJpc2NobHVmdG1lbmdlIGluIG3Csy9oXCIsXG4gICAgICB9LFxuICAgIH0sXG4gIH07XG5cbiAgY29uc29sZS5sb2coZGF0YSk7XG4gIFBsb3RseS5uZXdQbG90KGNoYXJ0RGl2LCBbZGF0YV0sIGxheW91dCwgeyByZXNwb25zaXZlOiB0cnVlIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgbW9kZVVwZGF0ZWQ6IG1vZGVVcGRhdGVkLFxuICB2b2x1bWVVcGRhdGVkOiB2b2x1bWVVcGRhdGVkLFxuICBhY3Rpdml0eVVwZGF0ZWQ6IGFjdGl2aXR5VXBkYXRlZCxcbiAgYWlyaW5nVXBkYXRlZDogYWlyaW5nVXBkYXRlZCxcbiAgdmlzdHlwZVVwZGF0ZWQ6IHZpc3R5cGVVcGRhdGVkLFxuICBwZW9wbGVVcGRhdGVkOiBwZW9wbGVVcGRhdGVkLFxuICBhZGRRVXBkYXRlZDogYWRkUVVwZGF0ZWQsXG4gIG1heFFVcGRhdGVkOiBtYXhRVXBkYXRlZFxufTtcbiIsImNvbnN0IHZvbHVtZSA9IHJlcXVpcmUoXCIuL3ZvbHVtZS5qc1wiKTtcbmNvbnN0IGdyYXBoID0gcmVxdWlyZShcIi4vZ3JhcGguanNcIik7XG5cbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibW9kZVwiKS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gIC8vIGlmIGV4cGVydCwgaGlkZSBzaW1wbGUgaHRtbCBlbGVtZW50c1xuICBpZiAoZXZlbnQudGFyZ2V0LnZhbHVlID09IFwiZXhwZXJ0XCIpIHtcbiAgICBzaW1wZWxFbGVtZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJzaW1wbGVcIilcbiAgICBmb3IgKGVsIG9mIHNpbXBlbEVsZW1lbnRzKSB7XG4gICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxuICAgIH1cbiAgICBleHBlcnRFbGVtZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJleHBlcnRcIilcbiAgICBmb3IgKGVsIG9mIGV4cGVydEVsZW1lbnRzKSB7XG4gICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCJcbiAgICB9XG4gIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0LnZhbHVlID09IFwic2ltcGxlXCIpIHtcbiAgICBleHBlcnRFbGVtZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJzaW1wbGVcIilcbiAgICBmb3IgKGVsIG9mIGV4cGVydEVsZW1lbnRzKSB7XG4gICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCJcbiAgICB9XG4gICAgZXhwZXJ0RWxlbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZXhwZXJ0XCIpXG4gICAgZm9yIChlbCBvZiBleHBlcnRFbGVtZW50cykge1xuICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCJcbiAgICB9XG4gIH1cbiAgZ3JhcGgubW9kZVVwZGF0ZWQoZXZlbnQudGFyZ2V0LnZhbHVlKVxufSk7XG5cbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWN0aXZpdHlcIikuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGZ1bmN0aW9uIChldmVudCkge1xuICBncmFwaC5hY3Rpdml0eVVwZGF0ZWQoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbn0pO1xuXG4vLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZpc3R5cGVcIikuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGZ1bmN0aW9uIChldmVudCkge1xuLy8gICBncmFwaC52aXN0eXBlVXBkYXRlZChldmVudC50YXJnZXQudmFsdWUpO1xuLy8gfSk7XG5cbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGVvcGxlXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LnRhcmdldC52YWx1ZSAhPSBcIlwiKSB7XG4gICAgICBpZiAoZXZlbnQudGFyZ2V0LnZhbHVlIDwgMSkge1xuICAgICAgICBldmVudC50YXJnZXQudmFsdWUgPSAxXG4gICAgICB9IGVsc2UgaWYgKGV2ZW50LnRhcmdldC52YWx1ZSA+IDEwMCkge1xuICAgICAgICBldmVudC50YXJnZXQudmFsdWUgPSAxMDBcbiAgICAgIH1cbiAgICAgIGdyYXBoLnBlb3BsZVVwZGF0ZWQoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICB9XG59KTtcblxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhaXJpbmdcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmdW5jdGlvbihldmVudCkge1xuICAgIGdyYXBoLmFpcmluZ1VwZGF0ZWQoZXZlbnQudGFyZ2V0LnZhbHVlKVxufSk7XG5cbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkUVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LnRhcmdldC52YWx1ZSA8IDApIHtcbiAgICAgICAgZXZlbnQudGFyZ2V0LnZhbHVlID0gMFxuICAgIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0LnZhbHVlID4gNTAwMCkge1xuICAgICAgICBldmVudC50YXJnZXQudmFsdWUgPSA1MDAwXG4gICAgfVxuICAgIGdyYXBoLmFkZFFVcGRhdGVkKHBhcnNlSW50KGV2ZW50LnRhcmdldC52YWx1ZSkpXG59KTtcblxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXhRXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0LnZhbHVlIDwgMTAwKSB7XG4gICAgICAgIGV2ZW50LnRhcmdldC52YWx1ZSA9IDEwMFxuICAgIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0LnZhbHVlID4gNjAwMCkge1xuICAgICAgICBldmVudC50YXJnZXQudmFsdWUgPSA2MDAwXG4gICAgfVxuICAgIGdyYXBoLm1heFFVcGRhdGVkKGV2ZW50LnRhcmdldC52YWx1ZSlcbn0pOyIsImNvbnN0IGdyYXBoID0gcmVxdWlyZShcIi4vZ3JhcGguanNcIik7XG5cbmZ1bmN0aW9uIElucHV0RWxlbWVudChlbGVtZW50LCBkYXRhKSB7XG4gIHRoaXMuZGF0YSA9IGRhdGE7XG4gIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gIGVsZW1lbnQudmFsdWUgPSBkYXRhO1xuICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgdGhpcywgZmFsc2UpO1xufVxuXG4vKipcbiAqIENhbGxlZCB3aGVuIHRoZSBpbnB1dCBlbGVtZW50IGlzIHVwZGF0ZWQsIGUuZy4sIGJ5IHVzaW5nIGFycm93cyB3aGVuIHR5cGU9bnVtYmVyIG9yIGJ5IHByZXNzaW5nIGVudGVyXG4gKi9cbklucHV0RWxlbWVudC5wcm90b3R5cGUuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgc3dpdGNoIChldmVudC50eXBlKSB7XG4gICAgY2FzZSBcImNoYW5nZVwiOlxuICAgICAgdGhpcy5jaGFuZ2UodGhpcy5lbGVtZW50LnZhbHVlKTtcbiAgICAgIHVwZGF0ZVZvbHVtZSgpO1xuICB9XG59O1xuXG4vKipcbiAqIFVwZGF0ZSB0aGUgZWxlbWVudDsgdGhpcyBtZXRob2QgdXBkYXRlcyB0aGUgRE9NIHJlcHJlc2VudGF0aW9uIGFuZCB0aGUgaW50ZXJuYWwgcmVwcmVzZW50YXRpb25cbiAqL1xuSW5wdXRFbGVtZW50LnByb3RvdHlwZS5jaGFuZ2UgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgdGhpcy5kYXRhID0gdmFsdWU7XG4gIHRoaXMuZWxlbWVudC52YWx1ZSA9IHZhbHVlO1xufTtcblxuZnVuY3Rpb24gdXBkYXRlVm9sdW1lKCkge1xuICBpZiAobGVuZ3RoRWxlbWVudC5kYXRhID4gMTApIHtcbiAgICBsZW5ndGhFbGVtZW50LmNoYW5nZSgxMClcbiAgfVxuICBpZiAobGVuZ3RoRWxlbWVudC5kYXRhIDwgMSkge1xuICAgIGxlbmd0aEVsZW1lbnQuY2hhbmdlKDEpXG4gIH1cblxuICBpZiAod2lkdGhFbGVtZW50LmRhdGEgPiAxMCkge1xuICAgIGxlbmd0aEVsZW1lbnQuY2hhbmdlKDEwKVxuICB9XG4gIGlmICh3aWR0aEVsZW1lbnQuZGF0YSA8IDEpIHtcbiAgICBsZW5ndGhFbGVtZW50LmNoYW5nZSgxKVxuICB9XG5cbiAgaWYgKGhlaWdodEVsZW1lbnQuZGF0YSA+IDUpIHtcbiAgICBsZW5ndGhFbGVtZW50LmNoYW5nZSg1KVxuICB9XG4gIGlmIChoZWlnaHRFbGVtZW50LmRhdGEgPCAxKSB7XG4gICAgbGVuZ3RoRWxlbWVudC5jaGFuZ2UoMSlcbiAgfVxuXG4gIGNvbnN0IHZvbHVtZSA9IGxlbmd0aEVsZW1lbnQuZGF0YSAqIHdpZHRoRWxlbWVudC5kYXRhICogaGVpZ2h0RWxlbWVudC5kYXRhO1xuICBjb25zb2xlLmxvZyh2b2x1bWUpO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZvbHVtZVwiKS52YWx1ZSA9IHZvbHVtZTtcbiAgZ3JhcGgudm9sdW1lVXBkYXRlZCh2b2x1bWUpO1xuICByZXR1cm4gdm9sdW1lO1xufVxuXG4vLyBpdCBpcyBwb3NzaWJsZSB0byB1cGRhdGUgdGhlc2UgZWxlbWVudHMsIGUuZy4sIHdpdGggbGVuZ3RoRWxlbWVudC5jaGFuZ2UoMTApXG52YXIgbGVuZ3RoRWxlbWVudCA9IG5ldyBJbnB1dEVsZW1lbnQoXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGVuZ3RoXCIpLFxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxlbmd0aFwiKS52YWx1ZVxuKTtcbnZhciB3aWR0aEVsZW1lbnQgPSBuZXcgSW5wdXRFbGVtZW50KFxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIndpZHRoXCIpLFxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIndpZHRoXCIpLnZhbHVlXG4pO1xudmFyIGhlaWdodEVsZW1lbnQgPSBuZXcgSW5wdXRFbGVtZW50KFxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImhlaWdodFwiKSxcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJoZWlnaHRcIikudmFsdWVcbik7XG51cGRhdGVWb2x1bWUoKTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGdldDogdXBkYXRlVm9sdW1lLFxuICBpbml0OiB1cGRhdGVWb2x1bWUsXG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==